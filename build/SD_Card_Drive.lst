ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"SD_Card_Drive.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.SD_ReadData,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	SD_ReadData:
  26              	.LFB144:
  27              		.file 1 "User/SDcard/SD_Card_Drive.c"
   1:User/SDcard/SD_Card_Drive.c **** /*****************************************************************************
   2:User/SDcard/SD_Card_Drive.c **** * | File        :   SD_Card.h
   3:User/SDcard/SD_Card_Drive.c **** * | Author      :   Waveshare Team
   4:User/SDcard/SD_Card_Drive.c **** * | Function    :   SD card driver
   5:User/SDcard/SD_Card_Drive.c **** * | Info        :
   6:User/SDcard/SD_Card_Drive.c **** *   Image scanning
   7:User/SDcard/SD_Card_Drive.c **** *      Please use progressive scanning to generate images or fonts
   8:User/SDcard/SD_Card_Drive.c **** *----------------
   9:User/SDcard/SD_Card_Drive.c **** * | This version:   V1.0
  10:User/SDcard/SD_Card_Drive.c **** * | Date        :   2018-06-25
  11:User/SDcard/SD_Card_Drive.c **** * | Info        :   Basic version
  12:User/SDcard/SD_Card_Drive.c **** *
  13:User/SDcard/SD_Card_Drive.c **** ******************************************************************************/
  14:User/SDcard/SD_Card_Drive.c **** #include "SD_Card_Drive.h"
  15:User/SDcard/SD_Card_Drive.c **** #include "SD_Card_Interface.h"
  16:User/SDcard/SD_Card_Drive.c **** #include "stdlib.h"
  17:User/SDcard/SD_Card_Drive.c **** #include "string.h"
  18:User/SDcard/SD_Card_Drive.c **** #include "stdio.h"
  19:User/SDcard/SD_Card_Drive.c **** 
  20:User/SDcard/SD_Card_Drive.c **** /** @addtogroup BSP
  21:User/SDcard/SD_Card_Drive.c ****   * @{
  22:User/SDcard/SD_Card_Drive.c ****   */
  23:User/SDcard/SD_Card_Drive.c **** 
  24:User/SDcard/SD_Card_Drive.c **** /** @addtogroup STM32_ADAFRUIT
  25:User/SDcard/SD_Card_Drive.c ****   * @{
  26:User/SDcard/SD_Card_Drive.c ****   */
  27:User/SDcard/SD_Card_Drive.c **** 
  28:User/SDcard/SD_Card_Drive.c **** /** @defgroup STM32_ADAFRUIT_SD
  29:User/SDcard/SD_Card_Drive.c ****   * @{
  30:User/SDcard/SD_Card_Drive.c ****   */
  31:User/SDcard/SD_Card_Drive.c **** 
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 2


  32:User/SDcard/SD_Card_Drive.c **** /* Private typedef -----------------------------------------------------------*/
  33:User/SDcard/SD_Card_Drive.c **** 
  34:User/SDcard/SD_Card_Drive.c **** /** @defgroup STM32_ADAFRUIT_SD_Private_Types_Definitions
  35:User/SDcard/SD_Card_Drive.c ****   * @{
  36:User/SDcard/SD_Card_Drive.c ****   */
  37:User/SDcard/SD_Card_Drive.c **** typedef struct {
  38:User/SDcard/SD_Card_Drive.c ****     uint8_t r1;
  39:User/SDcard/SD_Card_Drive.c ****     uint8_t r2;
  40:User/SDcard/SD_Card_Drive.c ****     uint8_t r3;
  41:User/SDcard/SD_Card_Drive.c ****     uint8_t r4;
  42:User/SDcard/SD_Card_Drive.c ****     uint8_t r5;
  43:User/SDcard/SD_Card_Drive.c **** } SD_CmdAnswer_typedef;
  44:User/SDcard/SD_Card_Drive.c **** 
  45:User/SDcard/SD_Card_Drive.c **** /**
  46:User/SDcard/SD_Card_Drive.c ****   * @}
  47:User/SDcard/SD_Card_Drive.c ****   */
  48:User/SDcard/SD_Card_Drive.c **** 
  49:User/SDcard/SD_Card_Drive.c **** /* Private define ------------------------------------------------------------*/
  50:User/SDcard/SD_Card_Drive.c **** 
  51:User/SDcard/SD_Card_Drive.c **** /** @defgroup STM32_ADAFRUIT_SD_Private_Defines
  52:User/SDcard/SD_Card_Drive.c ****   * @{
  53:User/SDcard/SD_Card_Drive.c ****   */
  54:User/SDcard/SD_Card_Drive.c **** #define SD_DUMMY_BYTE            0xFF
  55:User/SDcard/SD_Card_Drive.c **** 
  56:User/SDcard/SD_Card_Drive.c **** #define SD_MAX_FRAME_LENGTH        17    /* Lenght = 16 + 1 */
  57:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_LENGTH               6
  58:User/SDcard/SD_Card_Drive.c **** 
  59:User/SDcard/SD_Card_Drive.c **** #define SD_MAX_TRY                100    /* Number of try */
  60:User/SDcard/SD_Card_Drive.c **** 
  61:User/SDcard/SD_Card_Drive.c **** #define SD_CSD_STRUCT_V1          0x2    /* CSD struct version V1 */
  62:User/SDcard/SD_Card_Drive.c **** #define SD_CSD_STRUCT_V2          0x1    /* CSD struct version V2 */
  63:User/SDcard/SD_Card_Drive.c **** 
  64:User/SDcard/SD_Card_Drive.c **** 
  65:User/SDcard/SD_Card_Drive.c **** /**
  66:User/SDcard/SD_Card_Drive.c ****   * @brief  SD ansewer format
  67:User/SDcard/SD_Card_Drive.c ****   */
  68:User/SDcard/SD_Card_Drive.c **** typedef enum {
  69:User/SDcard/SD_Card_Drive.c ****     SD_ANSWER_R1_EXPECTED,
  70:User/SDcard/SD_Card_Drive.c ****     SD_ANSWER_R1B_EXPECTED,
  71:User/SDcard/SD_Card_Drive.c ****     SD_ANSWER_R2_EXPECTED,
  72:User/SDcard/SD_Card_Drive.c ****     SD_ANSWER_R3_EXPECTED,
  73:User/SDcard/SD_Card_Drive.c ****     SD_ANSWER_R4R5_EXPECTED,
  74:User/SDcard/SD_Card_Drive.c ****     SD_ANSWER_R7_EXPECTED,
  75:User/SDcard/SD_Card_Drive.c **** } SD_Answer_type;
  76:User/SDcard/SD_Card_Drive.c **** 
  77:User/SDcard/SD_Card_Drive.c **** /**
  78:User/SDcard/SD_Card_Drive.c ****   * @brief  Start Data tokens:
  79:User/SDcard/SD_Card_Drive.c ****   *         Tokens (necessary because at nop/idle (and CS active) only 0xff is
  80:User/SDcard/SD_Card_Drive.c ****   *         on the data/command line)
  81:User/SDcard/SD_Card_Drive.c ****   */
  82:User/SDcard/SD_Card_Drive.c **** #define SD_TOKEN_START_DATA_SINGLE_BLOCK_READ    0xFE  /* Data token start byte, Start Single Block
  83:User/SDcard/SD_Card_Drive.c **** #define SD_TOKEN_START_DATA_MULTIPLE_BLOCK_READ  0xFE  /* Data token start byte, Start Multiple Blo
  84:User/SDcard/SD_Card_Drive.c **** #define SD_TOKEN_START_DATA_SINGLE_BLOCK_WRITE   0xFE  /* Data token start byte, Start Single Block
  85:User/SDcard/SD_Card_Drive.c **** #define SD_TOKEN_START_DATA_MULTIPLE_BLOCK_WRITE 0xFD  /* Data token start byte, Start Multiple Blo
  86:User/SDcard/SD_Card_Drive.c **** #define SD_TOKEN_STOP_DATA_MULTIPLE_BLOCK_WRITE  0xFD  /* Data toke stop byte, Stop Multiple Block 
  87:User/SDcard/SD_Card_Drive.c **** 
  88:User/SDcard/SD_Card_Drive.c **** /**
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 3


  89:User/SDcard/SD_Card_Drive.c ****   * @brief  Commands: CMDxx = CMD-number | 0x40
  90:User/SDcard/SD_Card_Drive.c ****   */
  91:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_GO_IDLE_STATE          0   /* CMD0 = 0x40  */
  92:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_SEND_OP_COND           1   /* CMD1 = 0x41  */
  93:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_SEND_IF_COND           8   /* CMD8 = 0x48  */
  94:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_SEND_CSD               9   /* CMD9 = 0x49  */
  95:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_SEND_CID               10  /* CMD10 = 0x4A */
  96:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_STOP_TRANSMISSION      12  /* CMD12 = 0x4C */
  97:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_SEND_STATUS            13  /* CMD13 = 0x4D */
  98:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_SET_BLOCKLEN           16  /* CMD16 = 0x50 */
  99:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_READ_SINGLE_BLOCK      17  /* CMD17 = 0x51 */
 100:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_READ_MULT_BLOCK        18  /* CMD18 = 0x52 */
 101:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_SET_BLOCK_COUNT        23  /* CMD23 = 0x57 */
 102:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_WRITE_SINGLE_BLOCK     24  /* CMD24 = 0x58 */
 103:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_WRITE_MULT_BLOCK       25  /* CMD25 = 0x59 */
 104:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_PROG_CSD               27  /* CMD27 = 0x5B */
 105:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_SET_WRITE_PROT         28  /* CMD28 = 0x5C */
 106:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_CLR_WRITE_PROT         29  /* CMD29 = 0x5D */
 107:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_SEND_WRITE_PROT        30  /* CMD30 = 0x5E */
 108:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_SD_ERASE_GRP_START     32  /* CMD32 = 0x60 */
 109:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_SD_ERASE_GRP_END       33  /* CMD33 = 0x61 */
 110:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_UNTAG_SECTOR           34  /* CMD34 = 0x62 */
 111:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_ERASE_GRP_START        35  /* CMD35 = 0x63 */
 112:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_ERASE_GRP_END          36  /* CMD36 = 0x64 */
 113:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_UNTAG_ERASE_GROUP      37  /* CMD37 = 0x65 */
 114:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_ERASE                  38  /* CMD38 = 0x66 */
 115:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_SD_APP_OP_COND         41  /* CMD41 = 0x69 */
 116:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_APP_CMD                55  /* CMD55 = 0x77 */
 117:User/SDcard/SD_Card_Drive.c **** #define SD_CMD_READ_OCR               58  /* CMD55 = 0x79 */
 118:User/SDcard/SD_Card_Drive.c **** 
 119:User/SDcard/SD_Card_Drive.c **** /**
 120:User/SDcard/SD_Card_Drive.c ****   * @brief  SD reponses and error flags
 121:User/SDcard/SD_Card_Drive.c ****   */
 122:User/SDcard/SD_Card_Drive.c **** typedef enum {
 123:User/SDcard/SD_Card_Drive.c ****     /* R1 answer value */
 124:User/SDcard/SD_Card_Drive.c ****     SD_R1_NO_ERROR            = (0x00),
 125:User/SDcard/SD_Card_Drive.c ****     SD_R1_IN_IDLE_STATE       = (0x01),
 126:User/SDcard/SD_Card_Drive.c ****     SD_R1_ERASE_RESET         = (0x02),
 127:User/SDcard/SD_Card_Drive.c ****     SD_R1_ILLEGAL_COMMAND     = (0x04),
 128:User/SDcard/SD_Card_Drive.c ****     SD_R1_COM_CRC_ERROR       = (0x08),
 129:User/SDcard/SD_Card_Drive.c ****     SD_R1_ERASE_SEQUENCE_ERROR= (0x10),
 130:User/SDcard/SD_Card_Drive.c ****     SD_R1_ADDRESS_ERROR       = (0x20),
 131:User/SDcard/SD_Card_Drive.c ****     SD_R1_PARAMETER_ERROR     = (0x40),
 132:User/SDcard/SD_Card_Drive.c **** 
 133:User/SDcard/SD_Card_Drive.c ****     /* R2 answer value */
 134:User/SDcard/SD_Card_Drive.c ****     SD_R2_NO_ERROR            = 0x00,
 135:User/SDcard/SD_Card_Drive.c ****     SD_R2_CARD_LOCKED         = 0x01,
 136:User/SDcard/SD_Card_Drive.c ****     SD_R2_LOCKUNLOCK_ERROR    = 0x02,
 137:User/SDcard/SD_Card_Drive.c ****     SD_R2_ERROR               = 0x04,
 138:User/SDcard/SD_Card_Drive.c ****     SD_R2_CC_ERROR            = 0x08,
 139:User/SDcard/SD_Card_Drive.c ****     SD_R2_CARD_ECC_FAILED     = 0x10,
 140:User/SDcard/SD_Card_Drive.c ****     SD_R2_WP_VIOLATION        = 0x20,
 141:User/SDcard/SD_Card_Drive.c ****     SD_R2_ERASE_PARAM         = 0x40,
 142:User/SDcard/SD_Card_Drive.c ****     SD_R2_OUTOFRANGE          = 0x80,
 143:User/SDcard/SD_Card_Drive.c **** 
 144:User/SDcard/SD_Card_Drive.c ****     /**
 145:User/SDcard/SD_Card_Drive.c ****       * @brief  Data response error
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 4


 146:User/SDcard/SD_Card_Drive.c ****       */
 147:User/SDcard/SD_Card_Drive.c ****     SD_DATA_OK                = (0x05),
 148:User/SDcard/SD_Card_Drive.c ****     SD_DATA_CRC_ERROR         = (0x0B),
 149:User/SDcard/SD_Card_Drive.c ****     SD_DATA_WRITE_ERROR       = (0x0D),
 150:User/SDcard/SD_Card_Drive.c ****     SD_DATA_OTHER_ERROR       = (0xFF)
 151:User/SDcard/SD_Card_Drive.c **** } SD_Error;
 152:User/SDcard/SD_Card_Drive.c **** 
 153:User/SDcard/SD_Card_Drive.c **** /**
 154:User/SDcard/SD_Card_Drive.c ****   * @}
 155:User/SDcard/SD_Card_Drive.c ****   */
 156:User/SDcard/SD_Card_Drive.c **** 
 157:User/SDcard/SD_Card_Drive.c **** /* Private macro -------------------------------------------------------------*/
 158:User/SDcard/SD_Card_Drive.c **** 
 159:User/SDcard/SD_Card_Drive.c **** /** @defgroup STM32_ADAFRUIT_SD_Private_Macros
 160:User/SDcard/SD_Card_Drive.c ****   * @{
 161:User/SDcard/SD_Card_Drive.c ****   */
 162:User/SDcard/SD_Card_Drive.c **** 
 163:User/SDcard/SD_Card_Drive.c **** /**
 164:User/SDcard/SD_Card_Drive.c ****   * @}
 165:User/SDcard/SD_Card_Drive.c ****   */
 166:User/SDcard/SD_Card_Drive.c **** 
 167:User/SDcard/SD_Card_Drive.c **** /* Private variables ---------------------------------------------------------*/
 168:User/SDcard/SD_Card_Drive.c **** 
 169:User/SDcard/SD_Card_Drive.c **** /** @defgroup STM32_ADAFRUIT_SD_Private_Variables
 170:User/SDcard/SD_Card_Drive.c ****   * @{
 171:User/SDcard/SD_Card_Drive.c ****   */
 172:User/SDcard/SD_Card_Drive.c **** __IO uint8_t SdStatus = SD_NOT_PRESENT;
 173:User/SDcard/SD_Card_Drive.c **** 
 174:User/SDcard/SD_Card_Drive.c **** /* flag_SDHC :
 175:User/SDcard/SD_Card_Drive.c ****       0 :  Standard capacity
 176:User/SDcard/SD_Card_Drive.c ****       1 : High capacity
 177:User/SDcard/SD_Card_Drive.c **** */
 178:User/SDcard/SD_Card_Drive.c **** uint16_t flag_SDHC = 0;
 179:User/SDcard/SD_Card_Drive.c **** 
 180:User/SDcard/SD_Card_Drive.c **** /**
 181:User/SDcard/SD_Card_Drive.c ****   * @}
 182:User/SDcard/SD_Card_Drive.c ****   */
 183:User/SDcard/SD_Card_Drive.c **** 
 184:User/SDcard/SD_Card_Drive.c **** /* Private function prototypes -----------------------------------------------*/
 185:User/SDcard/SD_Card_Drive.c **** static uint8_t SD_GetCIDRegister(SD_CID* Cid);
 186:User/SDcard/SD_Card_Drive.c **** static uint8_t SD_GetCSDRegister(SD_CSD* Csd);
 187:User/SDcard/SD_Card_Drive.c **** static uint8_t SD_GetDataResponse(void);
 188:User/SDcard/SD_Card_Drive.c **** static uint8_t SD_GoIdleState(void);
 189:User/SDcard/SD_Card_Drive.c **** static SD_CmdAnswer_typedef SD_SendCmd(uint8_t Cmd, uint32_t Arg, uint8_t Crc, uint8_t Answer);
 190:User/SDcard/SD_Card_Drive.c **** static uint8_t SD_WaitData(uint8_t data);
 191:User/SDcard/SD_Card_Drive.c **** static uint8_t SD_ReadData(void);
 192:User/SDcard/SD_Card_Drive.c **** /** @defgroup STM32_ADAFRUIT_SD_Private_Function_Prototypes
 193:User/SDcard/SD_Card_Drive.c ****   * @{
 194:User/SDcard/SD_Card_Drive.c ****   */
 195:User/SDcard/SD_Card_Drive.c **** /**
 196:User/SDcard/SD_Card_Drive.c ****   * @}
 197:User/SDcard/SD_Card_Drive.c ****   */
 198:User/SDcard/SD_Card_Drive.c **** 
 199:User/SDcard/SD_Card_Drive.c **** /* Private functions ---------------------------------------------------------*/
 200:User/SDcard/SD_Card_Drive.c **** 
 201:User/SDcard/SD_Card_Drive.c **** /** @defgroup STM32_ADAFRUIT_SD_Private_Functions
 202:User/SDcard/SD_Card_Drive.c ****   * @{
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 5


 203:User/SDcard/SD_Card_Drive.c ****   */
 204:User/SDcard/SD_Card_Drive.c **** 
 205:User/SDcard/SD_Card_Drive.c **** /**
 206:User/SDcard/SD_Card_Drive.c ****   * @brief  Initializes the SD/SD communication.
 207:User/SDcard/SD_Card_Drive.c ****   * @param  None
 208:User/SDcard/SD_Card_Drive.c ****   * @retval The SD Response:
 209:User/SDcard/SD_Card_Drive.c ****   *         - MSD_ERROR: Sequence failed
 210:User/SDcard/SD_Card_Drive.c ****   *         - MSD_OK: Sequence succeed
 211:User/SDcard/SD_Card_Drive.c ****   */
 212:User/SDcard/SD_Card_Drive.c **** uint8_t BSP_SD_Init(void)
 213:User/SDcard/SD_Card_Drive.c **** {
 214:User/SDcard/SD_Card_Drive.c ****     uint8_t counter = 0;
 215:User/SDcard/SD_Card_Drive.c **** 
 216:User/SDcard/SD_Card_Drive.c ****     /*------------Put SD in SPI mode--------------*/
 217:User/SDcard/SD_Card_Drive.c ****     /* SD chip select high */
 218:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 219:User/SDcard/SD_Card_Drive.c **** 
 220:User/SDcard/SD_Card_Drive.c ****     /* Send dummy byte 0xFF, 10 times with CS high */
 221:User/SDcard/SD_Card_Drive.c ****     /* Rise CS and MOSI for 80 clocks cycles */
 222:User/SDcard/SD_Card_Drive.c ****     for (counter = 0; counter <= 9; counter++) {
 223:User/SDcard/SD_Card_Drive.c ****         /* Send dummy byte 0xFF */
 224:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 225:User/SDcard/SD_Card_Drive.c ****     }
 226:User/SDcard/SD_Card_Drive.c **** 
 227:User/SDcard/SD_Card_Drive.c ****     /* SD detection pin is not physically mapped on the Adafruit shield */
 228:User/SDcard/SD_Card_Drive.c ****     SdStatus = SD_PRESENT;
 229:User/SDcard/SD_Card_Drive.c **** 
 230:User/SDcard/SD_Card_Drive.c ****     /* SD initialized and set to SPI mode properly */
 231:User/SDcard/SD_Card_Drive.c ****     return SD_GoIdleState();
 232:User/SDcard/SD_Card_Drive.c **** }
 233:User/SDcard/SD_Card_Drive.c **** 
 234:User/SDcard/SD_Card_Drive.c **** /**
 235:User/SDcard/SD_Card_Drive.c ****   * @brief  Returns information about specific card.
 236:User/SDcard/SD_Card_Drive.c ****   * @param  pCardInfo: Pointer to a SD_CardInfo structure that contains all SD
 237:User/SDcard/SD_Card_Drive.c ****   *         card information.
 238:User/SDcard/SD_Card_Drive.c ****   * @retval The SD Response:
 239:User/SDcard/SD_Card_Drive.c ****   *         - MSD_ERROR: Sequence failed
 240:User/SDcard/SD_Card_Drive.c ****   *         - MSD_OK: Sequence succeed
 241:User/SDcard/SD_Card_Drive.c ****   */
 242:User/SDcard/SD_Card_Drive.c **** uint8_t BSP_SD_GetCardInfo(SD_CardInfo *pCardInfo)
 243:User/SDcard/SD_Card_Drive.c **** {
 244:User/SDcard/SD_Card_Drive.c ****     uint8_t status;
 245:User/SDcard/SD_Card_Drive.c **** 
 246:User/SDcard/SD_Card_Drive.c ****     status = SD_GetCSDRegister(&(pCardInfo->Csd));
 247:User/SDcard/SD_Card_Drive.c ****     status|= SD_GetCIDRegister(&(pCardInfo->Cid));
 248:User/SDcard/SD_Card_Drive.c ****     if(flag_SDHC == 1 ) {
 249:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockSize = 512;
 250:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardBlockSize = 512;
 251:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity = (pCardInfo->Csd.version.v2.DeviceSize + 1) * 1024 * pCardInfo->Lo
 252:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockNbr = (pCardInfo->CardCapacity) / (pCardInfo->LogBlockSize);
 253:User/SDcard/SD_Card_Drive.c ****     } else {
 254:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity = (pCardInfo->Csd.version.v1.DeviceSize + 1) ;
 255:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity *= (1 << (pCardInfo->Csd.version.v1.DeviceSizeMul + 2));
 256:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockSize = 512;
 257:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardBlockSize = 1 << (pCardInfo->Csd.RdBlockLen);
 258:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity *= pCardInfo->CardBlockSize;
 259:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockNbr = (pCardInfo->CardCapacity) / (pCardInfo->LogBlockSize);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 6


 260:User/SDcard/SD_Card_Drive.c ****     }
 261:User/SDcard/SD_Card_Drive.c **** 
 262:User/SDcard/SD_Card_Drive.c ****     return status;
 263:User/SDcard/SD_Card_Drive.c **** }
 264:User/SDcard/SD_Card_Drive.c **** 
 265:User/SDcard/SD_Card_Drive.c **** /**
 266:User/SDcard/SD_Card_Drive.c ****   * @brief  Reads block(s) from a specified address in the SD card, in polling mode.
 267:User/SDcard/SD_Card_Drive.c ****   * @param  pData: Pointer to the buffer that will contain the data to transmit
 268:User/SDcard/SD_Card_Drive.c ****   * @param  ReadAddr: Address from where data is to be read. The address is counted
 269:User/SDcard/SD_Card_Drive.c ****   *                   in blocks of 512bytes
 270:User/SDcard/SD_Card_Drive.c ****   * @param  NumOfBlocks: Number of SD blocks to read
 271:User/SDcard/SD_Card_Drive.c ****   * @param  Timeout: This parameter is used for compatibility with BSP implementation
 272:User/SDcard/SD_Card_Drive.c ****   * @retval SD status
 273:User/SDcard/SD_Card_Drive.c ****   */
 274:User/SDcard/SD_Card_Drive.c **** uint8_t BSP_SD_ReadBlocks(uint32_t *pData, uint32_t ReadAddr, uint32_t NumOfBlocks, uint32_t Timeou
 275:User/SDcard/SD_Card_Drive.c **** {
 276:User/SDcard/SD_Card_Drive.c ****     uint32_t offset = 0;
 277:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 278:User/SDcard/SD_Card_Drive.c ****     uint8_t *ptr = NULL;
 279:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 280:User/SDcard/SD_Card_Drive.c ****     uint16_t BlockSize = 512;
 281:User/SDcard/SD_Card_Drive.c **** 
 282:User/SDcard/SD_Card_Drive.c ****     /* Send CMD16 (SD_CMD_SET_BLOCKLEN) to set the size of the block and
 283:User/SDcard/SD_Card_Drive.c ****        Check if the SD acknowledged the set block length command: R1 response (0x00: no errors) */
 284:User/SDcard/SD_Card_Drive.c ****     response = SD_SendCmd(SD_CMD_SET_BLOCKLEN, BlockSize, 0xFF, SD_ANSWER_R1_EXPECTED);
 285:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 286:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 287:User/SDcard/SD_Card_Drive.c ****     if ( response.r1 != SD_R1_NO_ERROR) {
 288:User/SDcard/SD_Card_Drive.c ****         goto error;
 289:User/SDcard/SD_Card_Drive.c ****     }
 290:User/SDcard/SD_Card_Drive.c **** 
 291:User/SDcard/SD_Card_Drive.c ****     ptr = malloc(sizeof(uint8_t)*BlockSize);
 292:User/SDcard/SD_Card_Drive.c ****     if( ptr == NULL ) {
 293:User/SDcard/SD_Card_Drive.c ****         goto error;
 294:User/SDcard/SD_Card_Drive.c ****     }
 295:User/SDcard/SD_Card_Drive.c ****     memset(ptr, SD_DUMMY_BYTE, sizeof(uint8_t)*BlockSize);
 296:User/SDcard/SD_Card_Drive.c **** 
 297:User/SDcard/SD_Card_Drive.c ****     /* Data transfer */
 298:User/SDcard/SD_Card_Drive.c ****     while (NumOfBlocks--) {
 299:User/SDcard/SD_Card_Drive.c ****         /* Send CMD17 (SD_CMD_READ_SINGLE_BLOCK) to read one block */
 300:User/SDcard/SD_Card_Drive.c ****         /* Check if the SD acknowledged the read block command: R1 response (0x00: no errors) */
 301:User/SDcard/SD_Card_Drive.c ****         response = SD_SendCmd(SD_CMD_READ_SINGLE_BLOCK, (ReadAddr + offset) * (flag_SDHC == 1 ? 1: 
 302:User/SDcard/SD_Card_Drive.c ****         if ( response.r1 != SD_R1_NO_ERROR) {
 303:User/SDcard/SD_Card_Drive.c ****             goto error;
 304:User/SDcard/SD_Card_Drive.c ****         }
 305:User/SDcard/SD_Card_Drive.c **** 
 306:User/SDcard/SD_Card_Drive.c ****         /* Now look for the data token to signify the start of the data */
 307:User/SDcard/SD_Card_Drive.c ****         if (SD_WaitData(SD_TOKEN_START_DATA_SINGLE_BLOCK_READ) == BSP_SD_OK) {
 308:User/SDcard/SD_Card_Drive.c ****             /* Read the SD block data : read NumByteToRead data */
 309:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteReadData(ptr, (uint8_t*)pData + offset, BlockSize);
 310:User/SDcard/SD_Card_Drive.c **** 
 311:User/SDcard/SD_Card_Drive.c ****             /* Set next read address*/
 312:User/SDcard/SD_Card_Drive.c ****             offset += BlockSize;
 313:User/SDcard/SD_Card_Drive.c ****             /* get CRC bytes (not really needed by us, but required by SD) */
 314:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 315:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 316:User/SDcard/SD_Card_Drive.c ****         } else {
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 7


 317:User/SDcard/SD_Card_Drive.c ****             goto error;
 318:User/SDcard/SD_Card_Drive.c ****         }
 319:User/SDcard/SD_Card_Drive.c **** 
 320:User/SDcard/SD_Card_Drive.c ****         /* End the command data read cycle */
 321:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 322:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 323:User/SDcard/SD_Card_Drive.c ****     }
 324:User/SDcard/SD_Card_Drive.c **** 
 325:User/SDcard/SD_Card_Drive.c ****     retr = BSP_SD_OK;
 326:User/SDcard/SD_Card_Drive.c **** 
 327:User/SDcard/SD_Card_Drive.c **** error :
 328:User/SDcard/SD_Card_Drive.c ****     /* Send dummy byte: 8 Clock pulses of delay */
 329:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 330:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 331:User/SDcard/SD_Card_Drive.c ****     if(ptr != NULL) free(ptr);
 332:User/SDcard/SD_Card_Drive.c **** 
 333:User/SDcard/SD_Card_Drive.c ****     /* Return the reponse */
 334:User/SDcard/SD_Card_Drive.c ****     return retr;
 335:User/SDcard/SD_Card_Drive.c **** }
 336:User/SDcard/SD_Card_Drive.c **** 
 337:User/SDcard/SD_Card_Drive.c **** /**
 338:User/SDcard/SD_Card_Drive.c ****   * @brief  Writes block(s) to a specified address in the SD card, in polling mode.
 339:User/SDcard/SD_Card_Drive.c ****   * @param  pData: Pointer to the buffer that will contain the data to transmit
 340:User/SDcard/SD_Card_Drive.c ****   * @param  WriteAddr: Address from where data is to be written. The address is counted
 341:User/SDcard/SD_Card_Drive.c ****   *                   in blocks of 512bytes
 342:User/SDcard/SD_Card_Drive.c ****   * @param  NumOfBlocks: Number of SD blocks to write
 343:User/SDcard/SD_Card_Drive.c ****   * @param  Timeout: This parameter is used for compatibility with BSP implementation
 344:User/SDcard/SD_Card_Drive.c ****   * @retval SD status
 345:User/SDcard/SD_Card_Drive.c ****   */
 346:User/SDcard/SD_Card_Drive.c **** uint8_t BSP_SD_WriteBlocks(uint32_t *pData, uint32_t WriteAddr, uint32_t NumOfBlocks, uint32_t Time
 347:User/SDcard/SD_Card_Drive.c **** {
 348:User/SDcard/SD_Card_Drive.c ****     uint32_t offset = 0;
 349:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 350:User/SDcard/SD_Card_Drive.c ****     uint8_t *ptr = NULL;
 351:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 352:User/SDcard/SD_Card_Drive.c ****     uint16_t BlockSize = 512;
 353:User/SDcard/SD_Card_Drive.c **** 
 354:User/SDcard/SD_Card_Drive.c ****     /* Send CMD16 (SD_CMD_SET_BLOCKLEN) to set the size of the block and
 355:User/SDcard/SD_Card_Drive.c ****        Check if the SD acknowledged the set block length command: R1 response (0x00: no errors) */
 356:User/SDcard/SD_Card_Drive.c ****     response = SD_SendCmd(SD_CMD_SET_BLOCKLEN, BlockSize, 0xFF, SD_ANSWER_R1_EXPECTED);
 357:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 358:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 359:User/SDcard/SD_Card_Drive.c ****     if ( response.r1 != SD_R1_NO_ERROR) {
 360:User/SDcard/SD_Card_Drive.c ****         goto error;
 361:User/SDcard/SD_Card_Drive.c ****     }
 362:User/SDcard/SD_Card_Drive.c **** 
 363:User/SDcard/SD_Card_Drive.c ****     ptr = malloc(sizeof(uint8_t)*BlockSize);
 364:User/SDcard/SD_Card_Drive.c ****     if (ptr == NULL) {
 365:User/SDcard/SD_Card_Drive.c ****         goto error;
 366:User/SDcard/SD_Card_Drive.c ****     }
 367:User/SDcard/SD_Card_Drive.c **** 
 368:User/SDcard/SD_Card_Drive.c ****     /* Data transfer */
 369:User/SDcard/SD_Card_Drive.c ****     while (NumOfBlocks--) {
 370:User/SDcard/SD_Card_Drive.c ****         /* Send CMD24 (SD_CMD_WRITE_SINGLE_BLOCK) to write blocks  and
 371:User/SDcard/SD_Card_Drive.c ****            Check if the SD acknowledged the write block command: R1 response (0x00: no errors) */
 372:User/SDcard/SD_Card_Drive.c ****         response = SD_SendCmd(SD_CMD_WRITE_SINGLE_BLOCK, (WriteAddr + offset) * (flag_SDHC == 1 ? 1
 373:User/SDcard/SD_Card_Drive.c ****         if (response.r1 != SD_R1_NO_ERROR) {
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 8


 374:User/SDcard/SD_Card_Drive.c ****             goto error;
 375:User/SDcard/SD_Card_Drive.c ****         }
 376:User/SDcard/SD_Card_Drive.c **** 
 377:User/SDcard/SD_Card_Drive.c ****         /* Send dummy byte for NWR timing : one byte between CMDWRITE and TOKEN */
 378:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 379:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 380:User/SDcard/SD_Card_Drive.c **** 
 381:User/SDcard/SD_Card_Drive.c ****         /* Send the data token to signify the start of the data */
 382:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_TOKEN_START_DATA_SINGLE_BLOCK_WRITE);
 383:User/SDcard/SD_Card_Drive.c **** 
 384:User/SDcard/SD_Card_Drive.c ****         /* Write the block data to SD */
 385:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteReadData((uint8_t*)pData + offset, ptr, BlockSize);
 386:User/SDcard/SD_Card_Drive.c **** 
 387:User/SDcard/SD_Card_Drive.c ****         /* Set next write address */
 388:User/SDcard/SD_Card_Drive.c ****         offset += BlockSize;
 389:User/SDcard/SD_Card_Drive.c **** 
 390:User/SDcard/SD_Card_Drive.c ****         /* Put CRC bytes (not really needed by us, but required by SD) */
 391:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 392:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 393:User/SDcard/SD_Card_Drive.c **** 
 394:User/SDcard/SD_Card_Drive.c ****         /* Read data response */
 395:User/SDcard/SD_Card_Drive.c ****         if (SD_GetDataResponse() != SD_DATA_OK) {
 396:User/SDcard/SD_Card_Drive.c ****             /* Set response value to failure */
 397:User/SDcard/SD_Card_Drive.c ****             goto error;
 398:User/SDcard/SD_Card_Drive.c ****         }
 399:User/SDcard/SD_Card_Drive.c **** 
 400:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 401:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 402:User/SDcard/SD_Card_Drive.c ****     }
 403:User/SDcard/SD_Card_Drive.c ****     retr = BSP_SD_OK;
 404:User/SDcard/SD_Card_Drive.c **** 
 405:User/SDcard/SD_Card_Drive.c **** error :
 406:User/SDcard/SD_Card_Drive.c ****     if(ptr != NULL) free(ptr);
 407:User/SDcard/SD_Card_Drive.c ****     /* Send dummy byte: 8 Clock pulses of delay */
 408:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 409:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 410:User/SDcard/SD_Card_Drive.c **** 
 411:User/SDcard/SD_Card_Drive.c ****     /* Return the reponse */
 412:User/SDcard/SD_Card_Drive.c ****     return retr;
 413:User/SDcard/SD_Card_Drive.c **** }
 414:User/SDcard/SD_Card_Drive.c **** 
 415:User/SDcard/SD_Card_Drive.c **** /**
 416:User/SDcard/SD_Card_Drive.c ****   * @brief  Erases the specified memory area of the given SD card.
 417:User/SDcard/SD_Card_Drive.c ****   * @param  StartAddr: Start address in Blocks (Size of a block is 512bytes)
 418:User/SDcard/SD_Card_Drive.c ****   * @param  EndAddr: End address in Blocks (Size of a block is 512bytes)
 419:User/SDcard/SD_Card_Drive.c ****   * @retval SD status
 420:User/SDcard/SD_Card_Drive.c ****   */
 421:User/SDcard/SD_Card_Drive.c **** uint8_t BSP_SD_Erase(uint32_t StartAddr, uint32_t EndAddr)
 422:User/SDcard/SD_Card_Drive.c **** {
 423:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 424:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 425:User/SDcard/SD_Card_Drive.c ****     uint16_t BlockSize = 512;
 426:User/SDcard/SD_Card_Drive.c **** 
 427:User/SDcard/SD_Card_Drive.c ****     /* Send CMD32 (Erase group start) and check if the SD acknowledged the erase command: R1 respon
 428:User/SDcard/SD_Card_Drive.c ****     response = SD_SendCmd(SD_CMD_SD_ERASE_GRP_START, (StartAddr) * (flag_SDHC == 1 ? 1 : BlockSize)
 429:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 430:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 9


 431:User/SDcard/SD_Card_Drive.c ****     if (response.r1 == SD_R1_NO_ERROR) {
 432:User/SDcard/SD_Card_Drive.c ****         /* Send CMD33 (Erase group end) and Check if the SD acknowledged the erase command: R1 resp
 433:User/SDcard/SD_Card_Drive.c ****         response = SD_SendCmd(SD_CMD_SD_ERASE_GRP_END, (EndAddr*512) * (flag_SDHC == 1 ? 1 : BlockS
 434:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 435:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 436:User/SDcard/SD_Card_Drive.c ****         if (response.r1 == SD_R1_NO_ERROR) {
 437:User/SDcard/SD_Card_Drive.c ****             /* Send CMD38 (Erase) and Check if the SD acknowledged the erase command: R1 response (
 438:User/SDcard/SD_Card_Drive.c ****             response = SD_SendCmd(SD_CMD_ERASE, 0, 0xFF, SD_ANSWER_R1B_EXPECTED);
 439:User/SDcard/SD_Card_Drive.c ****             if (response.r1 == SD_R1_NO_ERROR) {
 440:User/SDcard/SD_Card_Drive.c ****                 retr = BSP_SD_OK;
 441:User/SDcard/SD_Card_Drive.c ****             }
 442:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 443:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 444:User/SDcard/SD_Card_Drive.c ****         }
 445:User/SDcard/SD_Card_Drive.c ****     }
 446:User/SDcard/SD_Card_Drive.c **** 
 447:User/SDcard/SD_Card_Drive.c ****     /* Return the reponse */
 448:User/SDcard/SD_Card_Drive.c ****     return retr;
 449:User/SDcard/SD_Card_Drive.c **** }
 450:User/SDcard/SD_Card_Drive.c **** 
 451:User/SDcard/SD_Card_Drive.c **** /**
 452:User/SDcard/SD_Card_Drive.c ****   * @brief  Returns the SD status.
 453:User/SDcard/SD_Card_Drive.c ****   * @param  None
 454:User/SDcard/SD_Card_Drive.c ****   * @retval The SD status.
 455:User/SDcard/SD_Card_Drive.c ****   */
 456:User/SDcard/SD_Card_Drive.c **** uint8_t BSP_SD_GetCardState(void)
 457:User/SDcard/SD_Card_Drive.c **** {
 458:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef retr;
 459:User/SDcard/SD_Card_Drive.c **** 
 460:User/SDcard/SD_Card_Drive.c ****     /* Send CMD13 (SD_SEND_STATUS) to get SD status */
 461:User/SDcard/SD_Card_Drive.c ****     retr = SD_SendCmd(SD_CMD_SEND_STATUS, 0, 0xFF, SD_ANSWER_R2_EXPECTED);
 462:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 463:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 464:User/SDcard/SD_Card_Drive.c **** 
 465:User/SDcard/SD_Card_Drive.c ****     /* Find SD status according to card state */
 466:User/SDcard/SD_Card_Drive.c ****     if(( retr.r1 == SD_R1_NO_ERROR) && ( retr.r2 == SD_R2_NO_ERROR)) {
 467:User/SDcard/SD_Card_Drive.c ****         return BSP_SD_OK;
 468:User/SDcard/SD_Card_Drive.c ****     }
 469:User/SDcard/SD_Card_Drive.c **** 
 470:User/SDcard/SD_Card_Drive.c ****     return BSP_SD_ERROR;
 471:User/SDcard/SD_Card_Drive.c **** }
 472:User/SDcard/SD_Card_Drive.c **** 
 473:User/SDcard/SD_Card_Drive.c **** /**
 474:User/SDcard/SD_Card_Drive.c ****   * @brief  Reads the SD card SCD register.
 475:User/SDcard/SD_Card_Drive.c ****   *         Reading the contents of the CSD register in SPI mode is a simple
 476:User/SDcard/SD_Card_Drive.c ****   *         read-block transaction.
 477:User/SDcard/SD_Card_Drive.c ****   * @param  Csd: pointer on an SCD register structure
 478:User/SDcard/SD_Card_Drive.c ****   * @retval SD status
 479:User/SDcard/SD_Card_Drive.c ****   */
 480:User/SDcard/SD_Card_Drive.c **** uint8_t SD_GetCSDRegister(SD_CSD* Csd)
 481:User/SDcard/SD_Card_Drive.c **** {
 482:User/SDcard/SD_Card_Drive.c ****     uint16_t counter = 0;
 483:User/SDcard/SD_Card_Drive.c ****     uint8_t CSD_Tab[16];
 484:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 485:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 486:User/SDcard/SD_Card_Drive.c **** 
 487:User/SDcard/SD_Card_Drive.c ****     /* Send CMD9 (CSD register) or CMD10(CSD register) and Wait for response in the R1 format (0x00
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 10


 488:User/SDcard/SD_Card_Drive.c ****     response = SD_SendCmd(SD_CMD_SEND_CSD, 0, 0xFF, SD_ANSWER_R1_EXPECTED);
 489:User/SDcard/SD_Card_Drive.c ****     if(response.r1 == SD_R1_NO_ERROR) {
 490:User/SDcard/SD_Card_Drive.c ****         if (SD_WaitData(SD_TOKEN_START_DATA_SINGLE_BLOCK_READ) == BSP_SD_OK) {
 491:User/SDcard/SD_Card_Drive.c ****             for (counter = 0; counter < 16; counter++) {
 492:User/SDcard/SD_Card_Drive.c ****                 /* Store CSD register value on CSD_Tab */
 493:User/SDcard/SD_Card_Drive.c ****                 CSD_Tab[counter] = SD_IO_WriteByte(SD_DUMMY_BYTE);
 494:User/SDcard/SD_Card_Drive.c ****             }
 495:User/SDcard/SD_Card_Drive.c **** 
 496:User/SDcard/SD_Card_Drive.c ****             /* Get CRC bytes (not really needed by us, but required by SD) */
 497:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 498:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 499:User/SDcard/SD_Card_Drive.c **** 
 500:User/SDcard/SD_Card_Drive.c ****             /*************************************************************************
 501:User/SDcard/SD_Card_Drive.c ****               CSD header decoding
 502:User/SDcard/SD_Card_Drive.c ****             *************************************************************************/
 503:User/SDcard/SD_Card_Drive.c **** 
 504:User/SDcard/SD_Card_Drive.c ****             /* Byte 0 */
 505:User/SDcard/SD_Card_Drive.c ****             Csd->CSDStruct = (CSD_Tab[0] & 0xC0) >> 6;
 506:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved1 =  CSD_Tab[0] & 0x3F;
 507:User/SDcard/SD_Card_Drive.c **** 
 508:User/SDcard/SD_Card_Drive.c ****             /* Byte 1 */
 509:User/SDcard/SD_Card_Drive.c ****             Csd->TAAC = CSD_Tab[1];
 510:User/SDcard/SD_Card_Drive.c **** 
 511:User/SDcard/SD_Card_Drive.c ****             /* Byte 2 */
 512:User/SDcard/SD_Card_Drive.c ****             Csd->NSAC = CSD_Tab[2];
 513:User/SDcard/SD_Card_Drive.c **** 
 514:User/SDcard/SD_Card_Drive.c ****             /* Byte 3 */
 515:User/SDcard/SD_Card_Drive.c ****             Csd->MaxBusClkFrec = CSD_Tab[3];
 516:User/SDcard/SD_Card_Drive.c **** 
 517:User/SDcard/SD_Card_Drive.c ****             /* Byte 4/5 */
 518:User/SDcard/SD_Card_Drive.c ****             Csd->CardComdClasses = (CSD_Tab[4] << 4) | ((CSD_Tab[5] & 0xF0) >> 4);
 519:User/SDcard/SD_Card_Drive.c ****             Csd->RdBlockLen = CSD_Tab[5] & 0x0F;
 520:User/SDcard/SD_Card_Drive.c **** 
 521:User/SDcard/SD_Card_Drive.c ****             /* Byte 6 */
 522:User/SDcard/SD_Card_Drive.c ****             Csd->PartBlockRead   = (CSD_Tab[6] & 0x80) >> 7;
 523:User/SDcard/SD_Card_Drive.c ****             Csd->WrBlockMisalign = (CSD_Tab[6] & 0x40) >> 6;
 524:User/SDcard/SD_Card_Drive.c ****             Csd->RdBlockMisalign = (CSD_Tab[6] & 0x20) >> 5;
 525:User/SDcard/SD_Card_Drive.c ****             Csd->DSRImpl         = (CSD_Tab[6] & 0x10) >> 4;
 526:User/SDcard/SD_Card_Drive.c **** 
 527:User/SDcard/SD_Card_Drive.c ****             /*************************************************************************
 528:User/SDcard/SD_Card_Drive.c ****               CSD v1/v2 decoding
 529:User/SDcard/SD_Card_Drive.c ****             *************************************************************************/
 530:User/SDcard/SD_Card_Drive.c **** 
 531:User/SDcard/SD_Card_Drive.c ****             if(flag_SDHC == 0) {
 532:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.Reserved1 = ((CSD_Tab[6] & 0x0C) >> 2);
 533:User/SDcard/SD_Card_Drive.c **** 
 534:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.DeviceSize =  ((CSD_Tab[6] & 0x03) << 10)
 535:User/SDcard/SD_Card_Drive.c ****                                               |  (CSD_Tab[7] << 2)
 536:User/SDcard/SD_Card_Drive.c ****                                               | ((CSD_Tab[8] & 0xC0) >> 6);
 537:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxRdCurrentVDDMin = (CSD_Tab[8] & 0x38) >> 3;
 538:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxRdCurrentVDDMax = (CSD_Tab[8] & 0x07);
 539:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxWrCurrentVDDMin = (CSD_Tab[9] & 0xE0) >> 5;
 540:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxWrCurrentVDDMax = (CSD_Tab[9] & 0x1C) >> 2;
 541:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.DeviceSizeMul = ((CSD_Tab[9] & 0x03) << 1)
 542:User/SDcard/SD_Card_Drive.c ****                                                 |((CSD_Tab[10] & 0x80) >> 7);
 543:User/SDcard/SD_Card_Drive.c ****             } else {
 544:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.Reserved1 = ((CSD_Tab[6] & 0x0F) << 2) | ((CSD_Tab[7] & 0xC0) >> 6)
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 11


 545:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.DeviceSize= ((CSD_Tab[7] & 0x3F) << 16) | (CSD_Tab[8] << 8) | CSD_T
 546:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.Reserved2 = ((CSD_Tab[10] & 0x80) >> 8);
 547:User/SDcard/SD_Card_Drive.c ****             }
 548:User/SDcard/SD_Card_Drive.c **** 
 549:User/SDcard/SD_Card_Drive.c ****             Csd->EraseSingleBlockEnable = (CSD_Tab[10] & 0x40) >> 6;
 550:User/SDcard/SD_Card_Drive.c ****             Csd->EraseSectorSize   = ((CSD_Tab[10] & 0x3F) << 1)
 551:User/SDcard/SD_Card_Drive.c ****                                      |((CSD_Tab[11] & 0x80) >> 7);
 552:User/SDcard/SD_Card_Drive.c ****             Csd->WrProtectGrSize   = (CSD_Tab[11] & 0x7F);
 553:User/SDcard/SD_Card_Drive.c ****             Csd->WrProtectGrEnable = (CSD_Tab[12] & 0x80) >> 7;
 554:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved2         = (CSD_Tab[12] & 0x60) >> 5;
 555:User/SDcard/SD_Card_Drive.c ****             Csd->WrSpeedFact       = (CSD_Tab[12] & 0x1C) >> 2;
 556:User/SDcard/SD_Card_Drive.c ****             Csd->MaxWrBlockLen     = ((CSD_Tab[12] & 0x03) << 2)
 557:User/SDcard/SD_Card_Drive.c ****                                      |((CSD_Tab[13] & 0xC0) >> 6);
 558:User/SDcard/SD_Card_Drive.c ****             Csd->WriteBlockPartial = (CSD_Tab[13] & 0x20) >> 5;
 559:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved3         = (CSD_Tab[13] & 0x1F);
 560:User/SDcard/SD_Card_Drive.c ****             Csd->FileFormatGrouop  = (CSD_Tab[14] & 0x80) >> 7;
 561:User/SDcard/SD_Card_Drive.c ****             Csd->CopyFlag          = (CSD_Tab[14] & 0x40) >> 6;
 562:User/SDcard/SD_Card_Drive.c ****             Csd->PermWrProtect     = (CSD_Tab[14] & 0x20) >> 5;
 563:User/SDcard/SD_Card_Drive.c ****             Csd->TempWrProtect     = (CSD_Tab[14] & 0x10) >> 4;
 564:User/SDcard/SD_Card_Drive.c ****             Csd->FileFormat        = (CSD_Tab[14] & 0x0C) >> 2;
 565:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved4         = (CSD_Tab[14] & 0x03);
 566:User/SDcard/SD_Card_Drive.c ****             Csd->crc               = (CSD_Tab[15] & 0xFE) >> 1;
 567:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved5         = (CSD_Tab[15] & 0x01);
 568:User/SDcard/SD_Card_Drive.c **** 
 569:User/SDcard/SD_Card_Drive.c ****             retr = BSP_SD_OK;
 570:User/SDcard/SD_Card_Drive.c ****         }
 571:User/SDcard/SD_Card_Drive.c ****     }
 572:User/SDcard/SD_Card_Drive.c **** 
 573:User/SDcard/SD_Card_Drive.c ****     /* Send dummy byte: 8 Clock pulses of delay */
 574:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 575:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 576:User/SDcard/SD_Card_Drive.c **** 
 577:User/SDcard/SD_Card_Drive.c ****     /* Return the reponse */
 578:User/SDcard/SD_Card_Drive.c ****     return retr;
 579:User/SDcard/SD_Card_Drive.c **** }
 580:User/SDcard/SD_Card_Drive.c **** 
 581:User/SDcard/SD_Card_Drive.c **** /**
 582:User/SDcard/SD_Card_Drive.c ****   * @brief  Reads the SD card CID register.
 583:User/SDcard/SD_Card_Drive.c ****   *         Reading the contents of the CID register in SPI mode is a simple
 584:User/SDcard/SD_Card_Drive.c ****   *         read-block transaction.
 585:User/SDcard/SD_Card_Drive.c ****   * @param  Cid: pointer on an CID register structure
 586:User/SDcard/SD_Card_Drive.c ****   * @retval SD status
 587:User/SDcard/SD_Card_Drive.c ****   */
 588:User/SDcard/SD_Card_Drive.c **** uint8_t SD_GetCIDRegister(SD_CID* Cid)
 589:User/SDcard/SD_Card_Drive.c **** {
 590:User/SDcard/SD_Card_Drive.c ****     uint32_t counter = 0;
 591:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 592:User/SDcard/SD_Card_Drive.c ****     uint8_t CID_Tab[16];
 593:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 594:User/SDcard/SD_Card_Drive.c **** 
 595:User/SDcard/SD_Card_Drive.c ****     /* Send CMD10 (CID register) and Wait for response in the R1 format (0x00 is no errors) */
 596:User/SDcard/SD_Card_Drive.c ****     response = SD_SendCmd(SD_CMD_SEND_CID, 0, 0xFF, SD_ANSWER_R1_EXPECTED);
 597:User/SDcard/SD_Card_Drive.c ****     if(response.r1 == SD_R1_NO_ERROR) {
 598:User/SDcard/SD_Card_Drive.c ****         if(SD_WaitData(SD_TOKEN_START_DATA_SINGLE_BLOCK_READ) == BSP_SD_OK) {
 599:User/SDcard/SD_Card_Drive.c ****             /* Store CID register value on CID_Tab */
 600:User/SDcard/SD_Card_Drive.c ****             for (counter = 0; counter < 16; counter++) {
 601:User/SDcard/SD_Card_Drive.c ****                 CID_Tab[counter] = SD_IO_WriteByte(SD_DUMMY_BYTE);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 12


 602:User/SDcard/SD_Card_Drive.c ****             }
 603:User/SDcard/SD_Card_Drive.c **** 
 604:User/SDcard/SD_Card_Drive.c ****             /* Get CRC bytes (not really needed by us, but required by SD) */
 605:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 606:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 607:User/SDcard/SD_Card_Drive.c **** 
 608:User/SDcard/SD_Card_Drive.c ****             /* Byte 0 */
 609:User/SDcard/SD_Card_Drive.c ****             Cid->ManufacturerID = CID_Tab[0];
 610:User/SDcard/SD_Card_Drive.c **** 
 611:User/SDcard/SD_Card_Drive.c ****             /* Byte 1 */
 612:User/SDcard/SD_Card_Drive.c ****             Cid->OEM_AppliID = CID_Tab[1] << 8;
 613:User/SDcard/SD_Card_Drive.c **** 
 614:User/SDcard/SD_Card_Drive.c ****             /* Byte 2 */
 615:User/SDcard/SD_Card_Drive.c ****             Cid->OEM_AppliID |= CID_Tab[2];
 616:User/SDcard/SD_Card_Drive.c **** 
 617:User/SDcard/SD_Card_Drive.c ****             /* Byte 3 */
 618:User/SDcard/SD_Card_Drive.c ****             Cid->ProdName1 = CID_Tab[3] << 24;
 619:User/SDcard/SD_Card_Drive.c **** 
 620:User/SDcard/SD_Card_Drive.c ****             /* Byte 4 */
 621:User/SDcard/SD_Card_Drive.c ****             Cid->ProdName1 |= CID_Tab[4] << 16;
 622:User/SDcard/SD_Card_Drive.c **** 
 623:User/SDcard/SD_Card_Drive.c ****             /* Byte 5 */
 624:User/SDcard/SD_Card_Drive.c ****             Cid->ProdName1 |= CID_Tab[5] << 8;
 625:User/SDcard/SD_Card_Drive.c **** 
 626:User/SDcard/SD_Card_Drive.c ****             /* Byte 6 */
 627:User/SDcard/SD_Card_Drive.c ****             Cid->ProdName1 |= CID_Tab[6];
 628:User/SDcard/SD_Card_Drive.c **** 
 629:User/SDcard/SD_Card_Drive.c ****             /* Byte 7 */
 630:User/SDcard/SD_Card_Drive.c ****             Cid->ProdName2 = CID_Tab[7];
 631:User/SDcard/SD_Card_Drive.c **** 
 632:User/SDcard/SD_Card_Drive.c ****             /* Byte 8 */
 633:User/SDcard/SD_Card_Drive.c ****             Cid->ProdRev = CID_Tab[8];
 634:User/SDcard/SD_Card_Drive.c **** 
 635:User/SDcard/SD_Card_Drive.c ****             /* Byte 9 */
 636:User/SDcard/SD_Card_Drive.c ****             Cid->ProdSN = CID_Tab[9] << 24;
 637:User/SDcard/SD_Card_Drive.c **** 
 638:User/SDcard/SD_Card_Drive.c ****             /* Byte 10 */
 639:User/SDcard/SD_Card_Drive.c ****             Cid->ProdSN |= CID_Tab[10] << 16;
 640:User/SDcard/SD_Card_Drive.c **** 
 641:User/SDcard/SD_Card_Drive.c ****             /* Byte 11 */
 642:User/SDcard/SD_Card_Drive.c ****             Cid->ProdSN |= CID_Tab[11] << 8;
 643:User/SDcard/SD_Card_Drive.c **** 
 644:User/SDcard/SD_Card_Drive.c ****             /* Byte 12 */
 645:User/SDcard/SD_Card_Drive.c ****             Cid->ProdSN |= CID_Tab[12];
 646:User/SDcard/SD_Card_Drive.c **** 
 647:User/SDcard/SD_Card_Drive.c ****             /* Byte 13 */
 648:User/SDcard/SD_Card_Drive.c ****             Cid->Reserved1 |= (CID_Tab[13] & 0xF0) >> 4;
 649:User/SDcard/SD_Card_Drive.c ****             Cid->ManufactDate = (CID_Tab[13] & 0x0F) << 8;
 650:User/SDcard/SD_Card_Drive.c **** 
 651:User/SDcard/SD_Card_Drive.c ****             /* Byte 14 */
 652:User/SDcard/SD_Card_Drive.c ****             Cid->ManufactDate |= CID_Tab[14];
 653:User/SDcard/SD_Card_Drive.c **** 
 654:User/SDcard/SD_Card_Drive.c ****             /* Byte 15 */
 655:User/SDcard/SD_Card_Drive.c ****             Cid->CID_CRC = (CID_Tab[15] & 0xFE) >> 1;
 656:User/SDcard/SD_Card_Drive.c ****             Cid->Reserved2 = 1;
 657:User/SDcard/SD_Card_Drive.c **** 
 658:User/SDcard/SD_Card_Drive.c ****             retr = BSP_SD_OK;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 13


 659:User/SDcard/SD_Card_Drive.c ****         }
 660:User/SDcard/SD_Card_Drive.c ****     }
 661:User/SDcard/SD_Card_Drive.c **** 
 662:User/SDcard/SD_Card_Drive.c ****     /* Send dummy byte: 8 Clock pulses of delay */
 663:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 664:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 665:User/SDcard/SD_Card_Drive.c **** 
 666:User/SDcard/SD_Card_Drive.c ****     /* Return the reponse */
 667:User/SDcard/SD_Card_Drive.c ****     return retr;
 668:User/SDcard/SD_Card_Drive.c **** }
 669:User/SDcard/SD_Card_Drive.c **** 
 670:User/SDcard/SD_Card_Drive.c **** /**
 671:User/SDcard/SD_Card_Drive.c ****   * @brief  Sends 5 bytes command to the SD card and get response
 672:User/SDcard/SD_Card_Drive.c ****   * @param  Cmd: The user expected command to send to SD card.
 673:User/SDcard/SD_Card_Drive.c ****   * @param  Arg: The command argument.
 674:User/SDcard/SD_Card_Drive.c ****   * @param  Crc: The CRC.
 675:User/SDcard/SD_Card_Drive.c ****   * @param  Answer: SD_ANSWER_NOT_EXPECTED or SD_ANSWER_EXPECTED
 676:User/SDcard/SD_Card_Drive.c ****   * @retval SD status
 677:User/SDcard/SD_Card_Drive.c ****   */
 678:User/SDcard/SD_Card_Drive.c **** SD_CmdAnswer_typedef SD_SendCmd(uint8_t Cmd, uint32_t Arg, uint8_t Crc, uint8_t Answer)
 679:User/SDcard/SD_Card_Drive.c **** {
 680:User/SDcard/SD_Card_Drive.c ****     uint8_t frame[SD_CMD_LENGTH], frameout[SD_CMD_LENGTH];
 681:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef retr = {0xFF, 0xFF , 0xFF, 0xFF, 0xFF};
 682:User/SDcard/SD_Card_Drive.c **** 
 683:User/SDcard/SD_Card_Drive.c ****     /* R1 Lenght = NCS(0)+ 6 Bytes command + NCR(min1 max8) + 1 Bytes answer + NEC(0) = 15bytes */
 684:User/SDcard/SD_Card_Drive.c ****     /* R1b identical to R1 + Busy information                                                   */
 685:User/SDcard/SD_Card_Drive.c ****     /* R2 Lenght = NCS(0)+ 6 Bytes command + NCR(min1 max8) + 2 Bytes answer + NEC(0) = 16bytes */
 686:User/SDcard/SD_Card_Drive.c **** 
 687:User/SDcard/SD_Card_Drive.c ****     /* Prepare Frame to send */
 688:User/SDcard/SD_Card_Drive.c ****     frame[0] = (Cmd | 0x40);         /* Construct byte 1 */
 689:User/SDcard/SD_Card_Drive.c ****     frame[1] = (uint8_t)(Arg >> 24); /* Construct byte 2 */
 690:User/SDcard/SD_Card_Drive.c ****     frame[2] = (uint8_t)(Arg >> 16); /* Construct byte 3 */
 691:User/SDcard/SD_Card_Drive.c ****     frame[3] = (uint8_t)(Arg >> 8);  /* Construct byte 4 */
 692:User/SDcard/SD_Card_Drive.c ****     frame[4] = (uint8_t)(Arg);       /* Construct byte 5 */
 693:User/SDcard/SD_Card_Drive.c ****     frame[5] = (Crc | 0x01);         /* Construct byte 6 */
 694:User/SDcard/SD_Card_Drive.c **** 
 695:User/SDcard/SD_Card_Drive.c ****     /* Send the command */
 696:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(0);
 697:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteReadData(frame, frameout, SD_CMD_LENGTH); /* Send the Cmd bytes */
 698:User/SDcard/SD_Card_Drive.c **** 
 699:User/SDcard/SD_Card_Drive.c ****     switch(Answer) {
 700:User/SDcard/SD_Card_Drive.c ****     case SD_ANSWER_R1_EXPECTED :
 701:User/SDcard/SD_Card_Drive.c ****         retr.r1 = SD_ReadData();
 702:User/SDcard/SD_Card_Drive.c ****         break;
 703:User/SDcard/SD_Card_Drive.c ****     case SD_ANSWER_R1B_EXPECTED :
 704:User/SDcard/SD_Card_Drive.c ****         retr.r1 = SD_ReadData();
 705:User/SDcard/SD_Card_Drive.c ****         retr.r2 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 706:User/SDcard/SD_Card_Drive.c ****         /* Set CS High */
 707:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 708:User/SDcard/SD_Card_Drive.c ****         HAL_Delay(1);
 709:User/SDcard/SD_Card_Drive.c ****         /* Set CS Low */
 710:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(0);
 711:User/SDcard/SD_Card_Drive.c **** 
 712:User/SDcard/SD_Card_Drive.c ****         /* Wait IO line return 0xFF */
 713:User/SDcard/SD_Card_Drive.c ****         while (SD_IO_WriteByte(SD_DUMMY_BYTE) != 0xFF);
 714:User/SDcard/SD_Card_Drive.c ****         break;
 715:User/SDcard/SD_Card_Drive.c ****     case SD_ANSWER_R2_EXPECTED :
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 14


 716:User/SDcard/SD_Card_Drive.c ****         retr.r1 = SD_ReadData();
 717:User/SDcard/SD_Card_Drive.c ****         retr.r2 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 718:User/SDcard/SD_Card_Drive.c ****         break;
 719:User/SDcard/SD_Card_Drive.c ****     case SD_ANSWER_R3_EXPECTED :
 720:User/SDcard/SD_Card_Drive.c ****     case SD_ANSWER_R7_EXPECTED :
 721:User/SDcard/SD_Card_Drive.c ****         retr.r1 = SD_ReadData();
 722:User/SDcard/SD_Card_Drive.c ****         retr.r2 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 723:User/SDcard/SD_Card_Drive.c ****         retr.r3 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 724:User/SDcard/SD_Card_Drive.c ****         retr.r4 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 725:User/SDcard/SD_Card_Drive.c ****         retr.r5 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 726:User/SDcard/SD_Card_Drive.c ****         break;
 727:User/SDcard/SD_Card_Drive.c ****     default :
 728:User/SDcard/SD_Card_Drive.c ****         break;
 729:User/SDcard/SD_Card_Drive.c ****     }
 730:User/SDcard/SD_Card_Drive.c ****     return retr;
 731:User/SDcard/SD_Card_Drive.c **** }
 732:User/SDcard/SD_Card_Drive.c **** 
 733:User/SDcard/SD_Card_Drive.c **** /**
 734:User/SDcard/SD_Card_Drive.c ****   * @brief  Gets the SD card data response and check the busy flag.
 735:User/SDcard/SD_Card_Drive.c ****   * @param  None
 736:User/SDcard/SD_Card_Drive.c ****   * @retval The SD status: Read data response xxx0<status>1
 737:User/SDcard/SD_Card_Drive.c ****   *         - status 010: Data accecpted
 738:User/SDcard/SD_Card_Drive.c ****   *         - status 101: Data rejected due to a crc error
 739:User/SDcard/SD_Card_Drive.c ****   *         - status 110: Data rejected due to a Write error.
 740:User/SDcard/SD_Card_Drive.c ****   *         - status 111: Data rejected due to other error.
 741:User/SDcard/SD_Card_Drive.c ****   */
 742:User/SDcard/SD_Card_Drive.c **** uint8_t SD_GetDataResponse(void)
 743:User/SDcard/SD_Card_Drive.c **** {
 744:User/SDcard/SD_Card_Drive.c ****     uint8_t dataresponse;
 745:User/SDcard/SD_Card_Drive.c ****     uint8_t rvalue = SD_DATA_OTHER_ERROR;
 746:User/SDcard/SD_Card_Drive.c **** 
 747:User/SDcard/SD_Card_Drive.c ****     dataresponse = SD_IO_WriteByte(SD_DUMMY_BYTE);
 748:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE); /* read the busy response byte*/
 749:User/SDcard/SD_Card_Drive.c **** 
 750:User/SDcard/SD_Card_Drive.c ****     /* Mask unused bits */
 751:User/SDcard/SD_Card_Drive.c ****     switch (dataresponse & 0x1F) {
 752:User/SDcard/SD_Card_Drive.c ****     case SD_DATA_OK:
 753:User/SDcard/SD_Card_Drive.c ****         rvalue = SD_DATA_OK;
 754:User/SDcard/SD_Card_Drive.c **** 
 755:User/SDcard/SD_Card_Drive.c ****         /* Set CS High */
 756:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 757:User/SDcard/SD_Card_Drive.c ****         /* Set CS Low */
 758:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(0);
 759:User/SDcard/SD_Card_Drive.c **** 
 760:User/SDcard/SD_Card_Drive.c ****         /* Wait IO line return 0xFF */
 761:User/SDcard/SD_Card_Drive.c ****         while (SD_IO_WriteByte(SD_DUMMY_BYTE) != 0xFF);
 762:User/SDcard/SD_Card_Drive.c ****         break;
 763:User/SDcard/SD_Card_Drive.c ****     case SD_DATA_CRC_ERROR:
 764:User/SDcard/SD_Card_Drive.c ****         rvalue =  SD_DATA_CRC_ERROR;
 765:User/SDcard/SD_Card_Drive.c ****         break;
 766:User/SDcard/SD_Card_Drive.c ****     case SD_DATA_WRITE_ERROR:
 767:User/SDcard/SD_Card_Drive.c ****         rvalue = SD_DATA_WRITE_ERROR;
 768:User/SDcard/SD_Card_Drive.c ****         break;
 769:User/SDcard/SD_Card_Drive.c ****     default:
 770:User/SDcard/SD_Card_Drive.c ****         break;
 771:User/SDcard/SD_Card_Drive.c ****     }
 772:User/SDcard/SD_Card_Drive.c **** 
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 15


 773:User/SDcard/SD_Card_Drive.c ****     /* Return response */
 774:User/SDcard/SD_Card_Drive.c ****     return rvalue;
 775:User/SDcard/SD_Card_Drive.c **** }
 776:User/SDcard/SD_Card_Drive.c **** 
 777:User/SDcard/SD_Card_Drive.c **** 
 778:User/SDcard/SD_Card_Drive.c **** /**
 779:User/SDcard/SD_Card_Drive.c ****   * @brief  Put the SD in Idle state.
 780:User/SDcard/SD_Card_Drive.c ****   * @param  None
 781:User/SDcard/SD_Card_Drive.c ****   * @retval SD status
 782:User/SDcard/SD_Card_Drive.c ****   */
 783:User/SDcard/SD_Card_Drive.c **** uint8_t SD_GoIdleState(void)
 784:User/SDcard/SD_Card_Drive.c **** {
 785:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 786:User/SDcard/SD_Card_Drive.c ****     __IO uint8_t counter = 0;
 787:User/SDcard/SD_Card_Drive.c ****     /* Send CMD0 (SD_CMD_GO_IDLE_STATE) to put SD in SPI mode and
 788:User/SDcard/SD_Card_Drive.c ****        wait for In Idle State Response (R1 Format) equal to 0x01 */
 789:User/SDcard/SD_Card_Drive.c ****     do {
 790:User/SDcard/SD_Card_Drive.c ****         counter++;
 791:User/SDcard/SD_Card_Drive.c ****         response = SD_SendCmd(SD_CMD_GO_IDLE_STATE, 0, 0x95, SD_ANSWER_R1_EXPECTED);
 792:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 793:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 794:User/SDcard/SD_Card_Drive.c ****         if(counter >= SD_MAX_TRY) {
 795:User/SDcard/SD_Card_Drive.c ****             return BSP_SD_ERROR;
 796:User/SDcard/SD_Card_Drive.c ****         }
 797:User/SDcard/SD_Card_Drive.c ****     } while(response.r1 != SD_R1_IN_IDLE_STATE);
 798:User/SDcard/SD_Card_Drive.c **** 
 799:User/SDcard/SD_Card_Drive.c **** 
 800:User/SDcard/SD_Card_Drive.c ****     /* Send CMD8 (SD_CMD_SEND_IF_COND) to check the power supply status
 801:User/SDcard/SD_Card_Drive.c ****        and wait until response (R7 Format) equal to 0xAA and */
 802:User/SDcard/SD_Card_Drive.c ****     response = SD_SendCmd(SD_CMD_SEND_IF_COND, 0x1AA, 0x87, SD_ANSWER_R7_EXPECTED);
 803:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 804:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 805:User/SDcard/SD_Card_Drive.c ****     if((response.r1  & SD_R1_ILLEGAL_COMMAND) == SD_R1_ILLEGAL_COMMAND) {
 806:User/SDcard/SD_Card_Drive.c ****         /* initialise card V1 */
 807:User/SDcard/SD_Card_Drive.c ****         do {
 808:User/SDcard/SD_Card_Drive.c ****             /* initialise card V1 */
 809:User/SDcard/SD_Card_Drive.c ****             /* Send CMD55 (SD_CMD_APP_CMD) before any ACMD command: R1 response (0x00: no errors) *
 810:User/SDcard/SD_Card_Drive.c ****             response = SD_SendCmd(SD_CMD_APP_CMD, 0x00000000, 0xFF, SD_ANSWER_R1_EXPECTED);
 811:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 812:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 813:User/SDcard/SD_Card_Drive.c **** 
 814:User/SDcard/SD_Card_Drive.c ****             /* Send ACMD41 (SD_CMD_SD_APP_OP_COND) to initialize SDHC or SDXC cards: R1 response (0
 815:User/SDcard/SD_Card_Drive.c ****             response = SD_SendCmd(SD_CMD_SD_APP_OP_COND, 0x00000000, 0xFF, SD_ANSWER_R1_EXPECTED);
 816:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 817:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 818:User/SDcard/SD_Card_Drive.c ****         } while(response.r1 == SD_R1_IN_IDLE_STATE);
 819:User/SDcard/SD_Card_Drive.c ****         flag_SDHC = 0;
 820:User/SDcard/SD_Card_Drive.c ****     } else if(response.r1 == SD_R1_IN_IDLE_STATE) {
 821:User/SDcard/SD_Card_Drive.c ****         /* initialise card V2 */
 822:User/SDcard/SD_Card_Drive.c ****         do {
 823:User/SDcard/SD_Card_Drive.c **** 
 824:User/SDcard/SD_Card_Drive.c ****             /* Send CMD55 (SD_CMD_APP_CMD) before any ACMD command: R1 response (0x00: no errors) *
 825:User/SDcard/SD_Card_Drive.c ****             response = SD_SendCmd(SD_CMD_APP_CMD, 0, 0xFF, SD_ANSWER_R1_EXPECTED);
 826:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 827:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 828:User/SDcard/SD_Card_Drive.c **** 
 829:User/SDcard/SD_Card_Drive.c ****             /* Send ACMD41 (SD_CMD_SD_APP_OP_COND) to initialize SDHC or SDXC cards: R1 response (0
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 16


 830:User/SDcard/SD_Card_Drive.c ****             response = SD_SendCmd(SD_CMD_SD_APP_OP_COND, 0x40000000, 0xFF, SD_ANSWER_R1_EXPECTED);
 831:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 832:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 833:User/SDcard/SD_Card_Drive.c ****         } while(response.r1 == SD_R1_IN_IDLE_STATE);
 834:User/SDcard/SD_Card_Drive.c **** 
 835:User/SDcard/SD_Card_Drive.c ****         if((response.r1 & SD_R1_ILLEGAL_COMMAND) == SD_R1_ILLEGAL_COMMAND) {
 836:User/SDcard/SD_Card_Drive.c ****             do {
 837:User/SDcard/SD_Card_Drive.c ****                 /* Send CMD55 (SD_CMD_APP_CMD) before any ACMD command: R1 response (0x00: no error
 838:User/SDcard/SD_Card_Drive.c ****                 response = SD_SendCmd(SD_CMD_APP_CMD, 0, 0xFF, SD_ANSWER_R1_EXPECTED);
 839:User/SDcard/SD_Card_Drive.c ****                 SD_IO_CSState(1);
 840:User/SDcard/SD_Card_Drive.c ****                 SD_IO_WriteByte(SD_DUMMY_BYTE);
 841:User/SDcard/SD_Card_Drive.c ****                 if(response.r1 != SD_R1_IN_IDLE_STATE) {
 842:User/SDcard/SD_Card_Drive.c ****                     return BSP_SD_ERROR;
 843:User/SDcard/SD_Card_Drive.c ****                 }
 844:User/SDcard/SD_Card_Drive.c ****                 /* Send ACMD41 (SD_CMD_SD_APP_OP_COND) to initialize SDHC or SDXC cards: R1 respons
 845:User/SDcard/SD_Card_Drive.c ****                 response = SD_SendCmd(SD_CMD_SD_APP_OP_COND, 0x00000000, 0xFF, SD_ANSWER_R1_EXPECTE
 846:User/SDcard/SD_Card_Drive.c ****                 SD_IO_CSState(1);
 847:User/SDcard/SD_Card_Drive.c ****                 SD_IO_WriteByte(SD_DUMMY_BYTE);
 848:User/SDcard/SD_Card_Drive.c ****             } while(response.r1 == SD_R1_IN_IDLE_STATE);
 849:User/SDcard/SD_Card_Drive.c ****         }
 850:User/SDcard/SD_Card_Drive.c **** 
 851:User/SDcard/SD_Card_Drive.c ****         /* Send CMD58 (SD_CMD_READ_OCR) to initialize SDHC or SDXC cards: R3 response (0x00: no err
 852:User/SDcard/SD_Card_Drive.c ****         response = SD_SendCmd(SD_CMD_READ_OCR, 0x00000000, 0xFF, SD_ANSWER_R3_EXPECTED);
 853:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 854:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 855:User/SDcard/SD_Card_Drive.c ****         if(response.r1 != SD_R1_NO_ERROR) {
 856:User/SDcard/SD_Card_Drive.c ****             return BSP_SD_ERROR;
 857:User/SDcard/SD_Card_Drive.c ****         }
 858:User/SDcard/SD_Card_Drive.c ****         flag_SDHC = (response.r2 & 0x40) >> 6;
 859:User/SDcard/SD_Card_Drive.c ****     } else {
 860:User/SDcard/SD_Card_Drive.c ****         return BSP_SD_ERROR;
 861:User/SDcard/SD_Card_Drive.c ****     }
 862:User/SDcard/SD_Card_Drive.c **** 
 863:User/SDcard/SD_Card_Drive.c ****     return BSP_SD_OK;
 864:User/SDcard/SD_Card_Drive.c **** }
 865:User/SDcard/SD_Card_Drive.c **** 
 866:User/SDcard/SD_Card_Drive.c **** /**
 867:User/SDcard/SD_Card_Drive.c ****   * @brief  Waits a data until a value different from SD_DUMMY_BITE
 868:User/SDcard/SD_Card_Drive.c ****   * @param  None
 869:User/SDcard/SD_Card_Drive.c ****   * @retval the value read
 870:User/SDcard/SD_Card_Drive.c ****   */
 871:User/SDcard/SD_Card_Drive.c **** uint8_t SD_ReadData(void)
 872:User/SDcard/SD_Card_Drive.c **** {
  28              		.loc 1 872 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32 0000 10B5     		push	{r4, lr}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 8
  35              		.cfi_offset 4, -8
  36              		.cfi_offset 14, -4
 873:User/SDcard/SD_Card_Drive.c ****     uint8_t timeout = 0x08;
  37              		.loc 1 873 5 view .LVU1
  38              	.LVL0:
  39              		.loc 1 873 13 is_stmt 0 view .LVU2
  40 0002 0824     		movs	r4, #8
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 17


  41              	.LVL1:
  42              	.L3:
 874:User/SDcard/SD_Card_Drive.c ****     uint8_t readvalue;
  43              		.loc 1 874 5 is_stmt 1 discriminator 2 view .LVU3
 875:User/SDcard/SD_Card_Drive.c **** 
 876:User/SDcard/SD_Card_Drive.c ****     /* Check if response is got or a timeout is happen */
 877:User/SDcard/SD_Card_Drive.c ****     do {
  44              		.loc 1 877 5 discriminator 2 view .LVU4
 878:User/SDcard/SD_Card_Drive.c ****         readvalue = SD_IO_WriteByte(SD_DUMMY_BYTE);
  45              		.loc 1 878 9 discriminator 2 view .LVU5
  46              		.loc 1 878 21 is_stmt 0 discriminator 2 view .LVU6
  47 0004 FF20     		movs	r0, #255
  48 0006 FFF7FEFF 		bl	SD_IO_WriteByte
  49              	.LVL2:
 879:User/SDcard/SD_Card_Drive.c ****         timeout--;
  50              		.loc 1 879 9 is_stmt 1 discriminator 2 view .LVU7
  51              		.loc 1 879 16 is_stmt 0 discriminator 2 view .LVU8
  52 000a 013C     		subs	r4, r4, #1
  53              	.LVL3:
  54              		.loc 1 879 16 discriminator 2 view .LVU9
  55 000c E4B2     		uxtb	r4, r4
  56              	.LVL4:
 880:User/SDcard/SD_Card_Drive.c **** 
 881:User/SDcard/SD_Card_Drive.c ****     } while ((readvalue == SD_DUMMY_BYTE) && timeout);
  57              		.loc 1 881 13 is_stmt 1 discriminator 2 view .LVU10
  58              		.loc 1 881 5 is_stmt 0 discriminator 2 view .LVU11
  59 000e FF28     		cmp	r0, #255
  60 0010 01D1     		bne	.L2
  61              		.loc 1 881 43 discriminator 1 view .LVU12
  62 0012 002C     		cmp	r4, #0
  63 0014 F6D1     		bne	.L3
  64              	.L2:
 882:User/SDcard/SD_Card_Drive.c **** 
 883:User/SDcard/SD_Card_Drive.c ****     /* Right response got */
 884:User/SDcard/SD_Card_Drive.c ****     return readvalue;
  65              		.loc 1 884 5 is_stmt 1 view .LVU13
 885:User/SDcard/SD_Card_Drive.c **** }
  66              		.loc 1 885 1 is_stmt 0 view .LVU14
  67 0016 10BD     		pop	{r4, pc}
  68              		.loc 1 885 1 view .LVU15
  69              		.cfi_endproc
  70              	.LFE144:
  72              		.section	.text.SD_WaitData,"ax",%progbits
  73              		.align	1
  74              		.syntax unified
  75              		.thumb
  76              		.thumb_func
  77              		.fpu fpv4-sp-d16
  79              	SD_WaitData:
  80              	.LVL5:
  81              	.LFB145:
 886:User/SDcard/SD_Card_Drive.c **** 
 887:User/SDcard/SD_Card_Drive.c **** /**
 888:User/SDcard/SD_Card_Drive.c ****   * @brief  Waits a data from the SD card
 889:User/SDcard/SD_Card_Drive.c ****   * @param  data : Expected data from the SD card
 890:User/SDcard/SD_Card_Drive.c ****   * @retval BSP_SD_OK or BSP_SD_TIMEOUT
 891:User/SDcard/SD_Card_Drive.c ****   */
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 18


 892:User/SDcard/SD_Card_Drive.c **** uint8_t SD_WaitData(uint8_t data)
 893:User/SDcard/SD_Card_Drive.c **** {
  82              		.loc 1 893 1 is_stmt 1 view -0
  83              		.cfi_startproc
  84              		@ args = 0, pretend = 0, frame = 0
  85              		@ frame_needed = 0, uses_anonymous_args = 0
  86              		.loc 1 893 1 is_stmt 0 view .LVU17
  87 0000 38B5     		push	{r3, r4, r5, lr}
  88              	.LCFI1:
  89              		.cfi_def_cfa_offset 16
  90              		.cfi_offset 3, -16
  91              		.cfi_offset 4, -12
  92              		.cfi_offset 5, -8
  93              		.cfi_offset 14, -4
  94 0002 0546     		mov	r5, r0
 894:User/SDcard/SD_Card_Drive.c ****     uint16_t timeout = 0xFFFF;
  95              		.loc 1 894 5 is_stmt 1 view .LVU18
  96              	.LVL6:
  97              		.loc 1 894 14 is_stmt 0 view .LVU19
  98 0004 4FF6FF74 		movw	r4, #65535
  99              	.LVL7:
 100              	.L7:
 895:User/SDcard/SD_Card_Drive.c ****     uint8_t readvalue;
 101              		.loc 1 895 5 is_stmt 1 discriminator 2 view .LVU20
 896:User/SDcard/SD_Card_Drive.c **** 
 897:User/SDcard/SD_Card_Drive.c ****     /* Check if response is got or a timeout is happen */
 898:User/SDcard/SD_Card_Drive.c **** 
 899:User/SDcard/SD_Card_Drive.c ****     do {
 102              		.loc 1 899 5 discriminator 2 view .LVU21
 900:User/SDcard/SD_Card_Drive.c ****         readvalue = SD_IO_WriteByte(SD_DUMMY_BYTE);
 103              		.loc 1 900 9 discriminator 2 view .LVU22
 104              		.loc 1 900 21 is_stmt 0 discriminator 2 view .LVU23
 105 0008 FF20     		movs	r0, #255
 106 000a FFF7FEFF 		bl	SD_IO_WriteByte
 107              	.LVL8:
 901:User/SDcard/SD_Card_Drive.c ****         timeout--;
 108              		.loc 1 901 9 is_stmt 1 discriminator 2 view .LVU24
 109              		.loc 1 901 16 is_stmt 0 discriminator 2 view .LVU25
 110 000e 013C     		subs	r4, r4, #1
 111              	.LVL9:
 112              		.loc 1 901 16 discriminator 2 view .LVU26
 113 0010 A4B2     		uxth	r4, r4
 114              	.LVL10:
 902:User/SDcard/SD_Card_Drive.c ****     } while ((readvalue != data) && timeout);
 115              		.loc 1 902 13 is_stmt 1 discriminator 2 view .LVU27
 116              		.loc 1 902 5 is_stmt 0 discriminator 2 view .LVU28
 117 0012 A842     		cmp	r0, r5
 118 0014 01D0     		beq	.L6
 119              		.loc 1 902 34 discriminator 1 view .LVU29
 120 0016 002C     		cmp	r4, #0
 121 0018 F6D1     		bne	.L7
 122              	.L6:
 903:User/SDcard/SD_Card_Drive.c **** 
 904:User/SDcard/SD_Card_Drive.c ****     if (timeout == 0) {
 123              		.loc 1 904 5 is_stmt 1 view .LVU30
 124              		.loc 1 904 8 is_stmt 0 view .LVU31
 125 001a 0CB1     		cbz	r4, .L9
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 19


 905:User/SDcard/SD_Card_Drive.c ****         /* After time out */
 906:User/SDcard/SD_Card_Drive.c ****         return BSP_SD_TIMEOUT;
 907:User/SDcard/SD_Card_Drive.c ****     }
 908:User/SDcard/SD_Card_Drive.c **** 
 909:User/SDcard/SD_Card_Drive.c ****     /* Right response got */
 910:User/SDcard/SD_Card_Drive.c ****     return BSP_SD_OK;
 126              		.loc 1 910 12 view .LVU32
 127 001c 0020     		movs	r0, #0
 128              	.LVL11:
 129              	.L8:
 911:User/SDcard/SD_Card_Drive.c **** }
 130              		.loc 1 911 1 view .LVU33
 131 001e 38BD     		pop	{r3, r4, r5, pc}
 132              	.LVL12:
 133              	.L9:
 906:User/SDcard/SD_Card_Drive.c ****     }
 134              		.loc 1 906 16 view .LVU34
 135 0020 0220     		movs	r0, #2
 136              	.LVL13:
 906:User/SDcard/SD_Card_Drive.c ****     }
 137              		.loc 1 906 16 view .LVU35
 138 0022 FCE7     		b	.L8
 139              		.cfi_endproc
 140              	.LFE145:
 142              		.section	.text.SD_GetDataResponse,"ax",%progbits
 143              		.align	1
 144              		.syntax unified
 145              		.thumb
 146              		.thumb_func
 147              		.fpu fpv4-sp-d16
 149              	SD_GetDataResponse:
 150              	.LFB142:
 743:User/SDcard/SD_Card_Drive.c ****     uint8_t dataresponse;
 151              		.loc 1 743 1 is_stmt 1 view -0
 152              		.cfi_startproc
 153              		@ args = 0, pretend = 0, frame = 0
 154              		@ frame_needed = 0, uses_anonymous_args = 0
 155 0000 10B5     		push	{r4, lr}
 156              	.LCFI2:
 157              		.cfi_def_cfa_offset 8
 158              		.cfi_offset 4, -8
 159              		.cfi_offset 14, -4
 744:User/SDcard/SD_Card_Drive.c ****     uint8_t rvalue = SD_DATA_OTHER_ERROR;
 160              		.loc 1 744 5 view .LVU37
 745:User/SDcard/SD_Card_Drive.c **** 
 161              		.loc 1 745 5 view .LVU38
 162              	.LVL14:
 747:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE); /* read the busy response byte*/
 163              		.loc 1 747 5 view .LVU39
 747:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE); /* read the busy response byte*/
 164              		.loc 1 747 20 is_stmt 0 view .LVU40
 165 0002 FF20     		movs	r0, #255
 166 0004 FFF7FEFF 		bl	SD_IO_WriteByte
 167              	.LVL15:
 168 0008 0446     		mov	r4, r0
 169              	.LVL16:
 748:User/SDcard/SD_Card_Drive.c **** 
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 20


 170              		.loc 1 748 5 is_stmt 1 view .LVU41
 171 000a FF20     		movs	r0, #255
 172 000c FFF7FEFF 		bl	SD_IO_WriteByte
 173              	.LVL17:
 751:User/SDcard/SD_Card_Drive.c ****     case SD_DATA_OK:
 174              		.loc 1 751 5 view .LVU42
 175 0010 04F01F04 		and	r4, r4, #31
 176              	.LVL18:
 751:User/SDcard/SD_Card_Drive.c ****     case SD_DATA_OK:
 177              		.loc 1 751 5 is_stmt 0 view .LVU43
 178 0014 0B2C     		cmp	r4, #11
 179 0016 04D0     		beq	.L12
 180 0018 0D2C     		cmp	r4, #13
 181 001a 02D0     		beq	.L12
 182 001c 052C     		cmp	r4, #5
 183 001e 02D0     		beq	.L16
 184 0020 FF24     		movs	r4, #255
 185              	.LVL19:
 186              	.L12:
 774:User/SDcard/SD_Card_Drive.c **** }
 187              		.loc 1 774 5 is_stmt 1 view .LVU44
 775:User/SDcard/SD_Card_Drive.c **** 
 188              		.loc 1 775 1 is_stmt 0 view .LVU45
 189 0022 2046     		mov	r0, r4
 190 0024 10BD     		pop	{r4, pc}
 191              	.LVL20:
 192              	.L16:
 753:User/SDcard/SD_Card_Drive.c **** 
 193              		.loc 1 753 9 is_stmt 1 view .LVU46
 756:User/SDcard/SD_Card_Drive.c ****         /* Set CS Low */
 194              		.loc 1 756 9 view .LVU47
 195 0026 0120     		movs	r0, #1
 196 0028 FFF7FEFF 		bl	SD_IO_CSState
 197              	.LVL21:
 758:User/SDcard/SD_Card_Drive.c **** 
 198              		.loc 1 758 9 view .LVU48
 199 002c 0020     		movs	r0, #0
 200 002e FFF7FEFF 		bl	SD_IO_CSState
 201              	.LVL22:
 761:User/SDcard/SD_Card_Drive.c ****         break;
 202              		.loc 1 761 9 view .LVU49
 203              	.L13:
 761:User/SDcard/SD_Card_Drive.c ****         break;
 204              		.loc 1 761 55 discriminator 1 view .LVU50
 761:User/SDcard/SD_Card_Drive.c ****         break;
 205              		.loc 1 761 15 discriminator 1 view .LVU51
 761:User/SDcard/SD_Card_Drive.c ****         break;
 206              		.loc 1 761 16 is_stmt 0 discriminator 1 view .LVU52
 207 0032 FF20     		movs	r0, #255
 208 0034 FFF7FEFF 		bl	SD_IO_WriteByte
 209              	.LVL23:
 761:User/SDcard/SD_Card_Drive.c ****         break;
 210              		.loc 1 761 15 discriminator 1 view .LVU53
 211 0038 FF28     		cmp	r0, #255
 212 003a FAD1     		bne	.L13
 213 003c F1E7     		b	.L12
 214              		.cfi_endproc
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 21


 215              	.LFE142:
 217              		.section	.text.SD_SendCmd,"ax",%progbits
 218              		.align	1
 219              		.syntax unified
 220              		.thumb
 221              		.thumb_func
 222              		.fpu fpv4-sp-d16
 224              	SD_SendCmd:
 225              	.LVL24:
 226              	.LFB141:
 679:User/SDcard/SD_Card_Drive.c ****     uint8_t frame[SD_CMD_LENGTH], frameout[SD_CMD_LENGTH];
 227              		.loc 1 679 1 is_stmt 1 view -0
 228              		.cfi_startproc
 229              		@ args = 4, pretend = 0, frame = 16
 230              		@ frame_needed = 0, uses_anonymous_args = 0
 679:User/SDcard/SD_Card_Drive.c ****     uint8_t frame[SD_CMD_LENGTH], frameout[SD_CMD_LENGTH];
 231              		.loc 1 679 1 is_stmt 0 view .LVU55
 232 0000 70B5     		push	{r4, r5, r6, lr}
 233              	.LCFI3:
 234              		.cfi_def_cfa_offset 16
 235              		.cfi_offset 4, -16
 236              		.cfi_offset 5, -12
 237              		.cfi_offset 6, -8
 238              		.cfi_offset 14, -4
 239 0002 84B0     		sub	sp, sp, #16
 240              	.LCFI4:
 241              		.cfi_def_cfa_offset 32
 242 0004 0446     		mov	r4, r0
 243 0006 9DF82050 		ldrb	r5, [sp, #32]	@ zero_extendqisi2
 680:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef retr = {0xFF, 0xFF , 0xFF, 0xFF, 0xFF};
 244              		.loc 1 680 5 is_stmt 1 view .LVU56
 681:User/SDcard/SD_Card_Drive.c **** 
 245              		.loc 1 681 5 view .LVU57
 681:User/SDcard/SD_Card_Drive.c **** 
 246              		.loc 1 681 26 is_stmt 0 view .LVU58
 247 000a 304E     		ldr	r6, .L26
 248 000c 3068     		ldr	r0, [r6]
 249              	.LVL25:
 681:User/SDcard/SD_Card_Drive.c **** 
 250              		.loc 1 681 26 view .LVU59
 251 000e 2060     		str	r0, [r4]	@ unaligned
 252 0010 3079     		ldrb	r0, [r6, #4]	@ zero_extendqisi2
 253 0012 2071     		strb	r0, [r4, #4]
 688:User/SDcard/SD_Card_Drive.c ****     frame[1] = (uint8_t)(Arg >> 24); /* Construct byte 2 */
 254              		.loc 1 688 5 is_stmt 1 view .LVU60
 688:User/SDcard/SD_Card_Drive.c ****     frame[1] = (uint8_t)(Arg >> 24); /* Construct byte 2 */
 255              		.loc 1 688 14 is_stmt 0 view .LVU61
 256 0014 41F04001 		orr	r1, r1, #64
 257              	.LVL26:
 688:User/SDcard/SD_Card_Drive.c ****     frame[1] = (uint8_t)(Arg >> 24); /* Construct byte 2 */
 258              		.loc 1 688 14 view .LVU62
 259 0018 8DF80810 		strb	r1, [sp, #8]
 689:User/SDcard/SD_Card_Drive.c ****     frame[2] = (uint8_t)(Arg >> 16); /* Construct byte 3 */
 260              		.loc 1 689 5 is_stmt 1 view .LVU63
 689:User/SDcard/SD_Card_Drive.c ****     frame[2] = (uint8_t)(Arg >> 16); /* Construct byte 3 */
 261              		.loc 1 689 16 is_stmt 0 view .LVU64
 262 001c 110E     		lsrs	r1, r2, #24
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 22


 689:User/SDcard/SD_Card_Drive.c ****     frame[2] = (uint8_t)(Arg >> 16); /* Construct byte 3 */
 263              		.loc 1 689 14 view .LVU65
 264 001e 8DF80910 		strb	r1, [sp, #9]
 690:User/SDcard/SD_Card_Drive.c ****     frame[3] = (uint8_t)(Arg >> 8);  /* Construct byte 4 */
 265              		.loc 1 690 5 is_stmt 1 view .LVU66
 690:User/SDcard/SD_Card_Drive.c ****     frame[3] = (uint8_t)(Arg >> 8);  /* Construct byte 4 */
 266              		.loc 1 690 16 is_stmt 0 view .LVU67
 267 0022 C2F30741 		ubfx	r1, r2, #16, #8
 690:User/SDcard/SD_Card_Drive.c ****     frame[3] = (uint8_t)(Arg >> 8);  /* Construct byte 4 */
 268              		.loc 1 690 14 view .LVU68
 269 0026 8DF80A10 		strb	r1, [sp, #10]
 691:User/SDcard/SD_Card_Drive.c ****     frame[4] = (uint8_t)(Arg);       /* Construct byte 5 */
 270              		.loc 1 691 5 is_stmt 1 view .LVU69
 691:User/SDcard/SD_Card_Drive.c ****     frame[4] = (uint8_t)(Arg);       /* Construct byte 5 */
 271              		.loc 1 691 16 is_stmt 0 view .LVU70
 272 002a C2F30721 		ubfx	r1, r2, #8, #8
 691:User/SDcard/SD_Card_Drive.c ****     frame[4] = (uint8_t)(Arg);       /* Construct byte 5 */
 273              		.loc 1 691 14 view .LVU71
 274 002e 8DF80B10 		strb	r1, [sp, #11]
 692:User/SDcard/SD_Card_Drive.c ****     frame[5] = (Crc | 0x01);         /* Construct byte 6 */
 275              		.loc 1 692 5 is_stmt 1 view .LVU72
 692:User/SDcard/SD_Card_Drive.c ****     frame[5] = (Crc | 0x01);         /* Construct byte 6 */
 276              		.loc 1 692 14 is_stmt 0 view .LVU73
 277 0032 8DF80C20 		strb	r2, [sp, #12]
 693:User/SDcard/SD_Card_Drive.c **** 
 278              		.loc 1 693 5 is_stmt 1 view .LVU74
 693:User/SDcard/SD_Card_Drive.c **** 
 279              		.loc 1 693 14 is_stmt 0 view .LVU75
 280 0036 43F00103 		orr	r3, r3, #1
 281              	.LVL27:
 693:User/SDcard/SD_Card_Drive.c **** 
 282              		.loc 1 693 14 view .LVU76
 283 003a 8DF80D30 		strb	r3, [sp, #13]
 696:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteReadData(frame, frameout, SD_CMD_LENGTH); /* Send the Cmd bytes */
 284              		.loc 1 696 5 is_stmt 1 view .LVU77
 285 003e 0020     		movs	r0, #0
 286 0040 FFF7FEFF 		bl	SD_IO_CSState
 287              	.LVL28:
 697:User/SDcard/SD_Card_Drive.c **** 
 288              		.loc 1 697 5 view .LVU78
 289 0044 0622     		movs	r2, #6
 290 0046 6946     		mov	r1, sp
 291 0048 02A8     		add	r0, sp, #8
 292 004a FFF7FEFF 		bl	SD_IO_WriteReadData
 293              	.LVL29:
 699:User/SDcard/SD_Card_Drive.c ****     case SD_ANSWER_R1_EXPECTED :
 294              		.loc 1 699 5 view .LVU79
 295 004e 052D     		cmp	r5, #5
 296 0050 07D8     		bhi	.L17
 297 0052 DFE805F0 		tbb	[pc, r5]
 298              	.L20:
 299 0056 03       		.byte	(.L23-.L20)/2
 300 0057 09       		.byte	(.L22-.L20)/2
 301 0058 1F       		.byte	(.L21-.L20)/2
 302 0059 27       		.byte	(.L19-.L20)/2
 303 005a 06       		.byte	(.L17-.L20)/2
 304 005b 27       		.byte	(.L19-.L20)/2
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 23


 305              		.p2align 1
 306              	.L23:
 701:User/SDcard/SD_Card_Drive.c ****         break;
 307              		.loc 1 701 9 view .LVU80
 701:User/SDcard/SD_Card_Drive.c ****         break;
 308              		.loc 1 701 19 is_stmt 0 view .LVU81
 309 005c FFF7FEFF 		bl	SD_ReadData
 310              	.LVL30:
 701:User/SDcard/SD_Card_Drive.c ****         break;
 311              		.loc 1 701 17 view .LVU82
 312 0060 2070     		strb	r0, [r4]
 702:User/SDcard/SD_Card_Drive.c ****     case SD_ANSWER_R1B_EXPECTED :
 313              		.loc 1 702 9 is_stmt 1 view .LVU83
 314              	.L17:
 731:User/SDcard/SD_Card_Drive.c **** 
 315              		.loc 1 731 1 is_stmt 0 view .LVU84
 316 0062 2046     		mov	r0, r4
 317 0064 04B0     		add	sp, sp, #16
 318              	.LCFI5:
 319              		.cfi_remember_state
 320              		.cfi_def_cfa_offset 16
 321              		@ sp needed
 322 0066 70BD     		pop	{r4, r5, r6, pc}
 323              	.LVL31:
 324              	.L22:
 325              	.LCFI6:
 326              		.cfi_restore_state
 704:User/SDcard/SD_Card_Drive.c ****         retr.r2 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 327              		.loc 1 704 9 is_stmt 1 view .LVU85
 704:User/SDcard/SD_Card_Drive.c ****         retr.r2 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 328              		.loc 1 704 19 is_stmt 0 view .LVU86
 329 0068 FFF7FEFF 		bl	SD_ReadData
 330              	.LVL32:
 704:User/SDcard/SD_Card_Drive.c ****         retr.r2 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 331              		.loc 1 704 17 view .LVU87
 332 006c 2070     		strb	r0, [r4]
 705:User/SDcard/SD_Card_Drive.c ****         /* Set CS High */
 333              		.loc 1 705 9 is_stmt 1 view .LVU88
 705:User/SDcard/SD_Card_Drive.c ****         /* Set CS High */
 334              		.loc 1 705 19 is_stmt 0 view .LVU89
 335 006e FF20     		movs	r0, #255
 336 0070 FFF7FEFF 		bl	SD_IO_WriteByte
 337              	.LVL33:
 705:User/SDcard/SD_Card_Drive.c ****         /* Set CS High */
 338              		.loc 1 705 17 view .LVU90
 339 0074 6070     		strb	r0, [r4, #1]
 707:User/SDcard/SD_Card_Drive.c ****         HAL_Delay(1);
 340              		.loc 1 707 9 is_stmt 1 view .LVU91
 341 0076 0120     		movs	r0, #1
 342 0078 FFF7FEFF 		bl	SD_IO_CSState
 343              	.LVL34:
 708:User/SDcard/SD_Card_Drive.c ****         /* Set CS Low */
 344              		.loc 1 708 9 view .LVU92
 345 007c 0120     		movs	r0, #1
 346 007e FFF7FEFF 		bl	HAL_Delay
 347              	.LVL35:
 710:User/SDcard/SD_Card_Drive.c **** 
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 24


 348              		.loc 1 710 9 view .LVU93
 349 0082 0020     		movs	r0, #0
 350 0084 FFF7FEFF 		bl	SD_IO_CSState
 351              	.LVL36:
 713:User/SDcard/SD_Card_Drive.c ****         break;
 352              		.loc 1 713 9 view .LVU94
 353              	.L24:
 713:User/SDcard/SD_Card_Drive.c ****         break;
 354              		.loc 1 713 55 discriminator 1 view .LVU95
 713:User/SDcard/SD_Card_Drive.c ****         break;
 355              		.loc 1 713 15 discriminator 1 view .LVU96
 713:User/SDcard/SD_Card_Drive.c ****         break;
 356              		.loc 1 713 16 is_stmt 0 discriminator 1 view .LVU97
 357 0088 FF20     		movs	r0, #255
 358 008a FFF7FEFF 		bl	SD_IO_WriteByte
 359              	.LVL37:
 713:User/SDcard/SD_Card_Drive.c ****         break;
 360              		.loc 1 713 15 discriminator 1 view .LVU98
 361 008e FF28     		cmp	r0, #255
 362 0090 FAD1     		bne	.L24
 363 0092 E6E7     		b	.L17
 364              	.L21:
 716:User/SDcard/SD_Card_Drive.c ****         retr.r2 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 365              		.loc 1 716 9 is_stmt 1 view .LVU99
 716:User/SDcard/SD_Card_Drive.c ****         retr.r2 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 366              		.loc 1 716 19 is_stmt 0 view .LVU100
 367 0094 FFF7FEFF 		bl	SD_ReadData
 368              	.LVL38:
 716:User/SDcard/SD_Card_Drive.c ****         retr.r2 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 369              		.loc 1 716 17 view .LVU101
 370 0098 2070     		strb	r0, [r4]
 717:User/SDcard/SD_Card_Drive.c ****         break;
 371              		.loc 1 717 9 is_stmt 1 view .LVU102
 717:User/SDcard/SD_Card_Drive.c ****         break;
 372              		.loc 1 717 19 is_stmt 0 view .LVU103
 373 009a FF20     		movs	r0, #255
 374 009c FFF7FEFF 		bl	SD_IO_WriteByte
 375              	.LVL39:
 717:User/SDcard/SD_Card_Drive.c ****         break;
 376              		.loc 1 717 17 view .LVU104
 377 00a0 6070     		strb	r0, [r4, #1]
 718:User/SDcard/SD_Card_Drive.c ****     case SD_ANSWER_R3_EXPECTED :
 378              		.loc 1 718 9 is_stmt 1 view .LVU105
 379 00a2 DEE7     		b	.L17
 380              	.L19:
 721:User/SDcard/SD_Card_Drive.c ****         retr.r2 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 381              		.loc 1 721 9 view .LVU106
 721:User/SDcard/SD_Card_Drive.c ****         retr.r2 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 382              		.loc 1 721 19 is_stmt 0 view .LVU107
 383 00a4 FFF7FEFF 		bl	SD_ReadData
 384              	.LVL40:
 721:User/SDcard/SD_Card_Drive.c ****         retr.r2 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 385              		.loc 1 721 17 view .LVU108
 386 00a8 2070     		strb	r0, [r4]
 722:User/SDcard/SD_Card_Drive.c ****         retr.r3 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 387              		.loc 1 722 9 is_stmt 1 view .LVU109
 722:User/SDcard/SD_Card_Drive.c ****         retr.r3 = SD_IO_WriteByte(SD_DUMMY_BYTE);
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 25


 388              		.loc 1 722 19 is_stmt 0 view .LVU110
 389 00aa FF20     		movs	r0, #255
 390 00ac FFF7FEFF 		bl	SD_IO_WriteByte
 391              	.LVL41:
 722:User/SDcard/SD_Card_Drive.c ****         retr.r3 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 392              		.loc 1 722 17 view .LVU111
 393 00b0 6070     		strb	r0, [r4, #1]
 723:User/SDcard/SD_Card_Drive.c ****         retr.r4 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 394              		.loc 1 723 9 is_stmt 1 view .LVU112
 723:User/SDcard/SD_Card_Drive.c ****         retr.r4 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 395              		.loc 1 723 19 is_stmt 0 view .LVU113
 396 00b2 FF20     		movs	r0, #255
 397 00b4 FFF7FEFF 		bl	SD_IO_WriteByte
 398              	.LVL42:
 723:User/SDcard/SD_Card_Drive.c ****         retr.r4 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 399              		.loc 1 723 17 view .LVU114
 400 00b8 A070     		strb	r0, [r4, #2]
 724:User/SDcard/SD_Card_Drive.c ****         retr.r5 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 401              		.loc 1 724 9 is_stmt 1 view .LVU115
 724:User/SDcard/SD_Card_Drive.c ****         retr.r5 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 402              		.loc 1 724 19 is_stmt 0 view .LVU116
 403 00ba FF20     		movs	r0, #255
 404 00bc FFF7FEFF 		bl	SD_IO_WriteByte
 405              	.LVL43:
 724:User/SDcard/SD_Card_Drive.c ****         retr.r5 = SD_IO_WriteByte(SD_DUMMY_BYTE);
 406              		.loc 1 724 17 view .LVU117
 407 00c0 E070     		strb	r0, [r4, #3]
 725:User/SDcard/SD_Card_Drive.c ****         break;
 408              		.loc 1 725 9 is_stmt 1 view .LVU118
 725:User/SDcard/SD_Card_Drive.c ****         break;
 409              		.loc 1 725 19 is_stmt 0 view .LVU119
 410 00c2 FF20     		movs	r0, #255
 411 00c4 FFF7FEFF 		bl	SD_IO_WriteByte
 412              	.LVL44:
 725:User/SDcard/SD_Card_Drive.c ****         break;
 413              		.loc 1 725 17 view .LVU120
 414 00c8 2071     		strb	r0, [r4, #4]
 726:User/SDcard/SD_Card_Drive.c ****     default :
 415              		.loc 1 726 9 is_stmt 1 view .LVU121
 730:User/SDcard/SD_Card_Drive.c **** }
 416              		.loc 1 730 5 view .LVU122
 730:User/SDcard/SD_Card_Drive.c **** }
 417              		.loc 1 730 12 is_stmt 0 view .LVU123
 418 00ca CAE7     		b	.L17
 419              	.L27:
 420              		.align	2
 421              	.L26:
 422 00cc 00000000 		.word	.LANCHOR0
 423              		.cfi_endproc
 424              	.LFE141:
 426              		.section	.text.SD_GoIdleState,"ax",%progbits
 427              		.align	1
 428              		.syntax unified
 429              		.thumb
 430              		.thumb_func
 431              		.fpu fpv4-sp-d16
 433              	SD_GoIdleState:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 26


 434              	.LFB143:
 784:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 435              		.loc 1 784 1 is_stmt 1 view -0
 436              		.cfi_startproc
 437              		@ args = 0, pretend = 0, frame = 24
 438              		@ frame_needed = 0, uses_anonymous_args = 0
 439 0000 30B5     		push	{r4, r5, lr}
 440              	.LCFI7:
 441              		.cfi_def_cfa_offset 12
 442              		.cfi_offset 4, -12
 443              		.cfi_offset 5, -8
 444              		.cfi_offset 14, -4
 445 0002 89B0     		sub	sp, sp, #36
 446              	.LCFI8:
 447              		.cfi_def_cfa_offset 48
 785:User/SDcard/SD_Card_Drive.c ****     __IO uint8_t counter = 0;
 448              		.loc 1 785 5 view .LVU125
 786:User/SDcard/SD_Card_Drive.c ****     /* Send CMD0 (SD_CMD_GO_IDLE_STATE) to put SD in SPI mode and
 449              		.loc 1 786 5 view .LVU126
 786:User/SDcard/SD_Card_Drive.c ****     /* Send CMD0 (SD_CMD_GO_IDLE_STATE) to put SD in SPI mode and
 450              		.loc 1 786 18 is_stmt 0 view .LVU127
 451 0004 0023     		movs	r3, #0
 452 0006 8DF81730 		strb	r3, [sp, #23]
 453              	.L30:
 789:User/SDcard/SD_Card_Drive.c ****         counter++;
 454              		.loc 1 789 5 is_stmt 1 view .LVU128
 790:User/SDcard/SD_Card_Drive.c ****         response = SD_SendCmd(SD_CMD_GO_IDLE_STATE, 0, 0x95, SD_ANSWER_R1_EXPECTED);
 455              		.loc 1 790 9 view .LVU129
 790:User/SDcard/SD_Card_Drive.c ****         response = SD_SendCmd(SD_CMD_GO_IDLE_STATE, 0, 0x95, SD_ANSWER_R1_EXPECTED);
 456              		.loc 1 790 16 is_stmt 0 view .LVU130
 457 000a 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 458 000e 0133     		adds	r3, r3, #1
 459 0010 DBB2     		uxtb	r3, r3
 460 0012 8DF81730 		strb	r3, [sp, #23]
 791:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 461              		.loc 1 791 9 is_stmt 1 view .LVU131
 791:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 462              		.loc 1 791 20 is_stmt 0 view .LVU132
 463 0016 0021     		movs	r1, #0
 464 0018 0091     		str	r1, [sp]
 465 001a 9523     		movs	r3, #149
 466 001c 0A46     		mov	r2, r1
 467 001e 06A8     		add	r0, sp, #24
 468 0020 FFF7FEFF 		bl	SD_SendCmd
 469              	.LVL45:
 792:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 470              		.loc 1 792 9 is_stmt 1 view .LVU133
 471 0024 0120     		movs	r0, #1
 472 0026 FFF7FEFF 		bl	SD_IO_CSState
 473              	.LVL46:
 793:User/SDcard/SD_Card_Drive.c ****         if(counter >= SD_MAX_TRY) {
 474              		.loc 1 793 9 view .LVU134
 475 002a FF20     		movs	r0, #255
 476 002c FFF7FEFF 		bl	SD_IO_WriteByte
 477              	.LVL47:
 794:User/SDcard/SD_Card_Drive.c ****             return BSP_SD_ERROR;
 478              		.loc 1 794 9 view .LVU135
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 27


 794:User/SDcard/SD_Card_Drive.c ****             return BSP_SD_ERROR;
 479              		.loc 1 794 20 is_stmt 0 view .LVU136
 480 0030 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
 481 0034 DBB2     		uxtb	r3, r3
 794:User/SDcard/SD_Card_Drive.c ****             return BSP_SD_ERROR;
 482              		.loc 1 794 11 view .LVU137
 483 0036 632B     		cmp	r3, #99
 484 0038 00F2A680 		bhi	.L36
 797:User/SDcard/SD_Card_Drive.c **** 
 485              		.loc 1 797 12 is_stmt 1 view .LVU138
 797:User/SDcard/SD_Card_Drive.c **** 
 486              		.loc 1 797 21 is_stmt 0 view .LVU139
 487 003c 9DF81840 		ldrb	r4, [sp, #24]	@ zero_extendqisi2
 797:User/SDcard/SD_Card_Drive.c **** 
 488              		.loc 1 797 5 view .LVU140
 489 0040 012C     		cmp	r4, #1
 490 0042 E2D1     		bne	.L30
 802:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 491              		.loc 1 802 5 is_stmt 1 view .LVU141
 802:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 492              		.loc 1 802 16 is_stmt 0 view .LVU142
 493 0044 0523     		movs	r3, #5
 494 0046 0093     		str	r3, [sp]
 495 0048 8723     		movs	r3, #135
 496 004a 4FF4D572 		mov	r2, #426
 497 004e 0821     		movs	r1, #8
 498 0050 0DEB0100 		add	r0, sp, r1
 499 0054 FFF7FEFF 		bl	SD_SendCmd
 500              	.LVL48:
 501 0058 0298     		ldr	r0, [sp, #8]	@ unaligned
 502 005a 0690     		str	r0, [sp, #24]
 803:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 503              		.loc 1 803 5 is_stmt 1 view .LVU143
 504 005c 0120     		movs	r0, #1
 505 005e FFF7FEFF 		bl	SD_IO_CSState
 506              	.LVL49:
 804:User/SDcard/SD_Card_Drive.c ****     if((response.r1  & SD_R1_ILLEGAL_COMMAND) == SD_R1_ILLEGAL_COMMAND) {
 507              		.loc 1 804 5 view .LVU144
 508 0062 FF20     		movs	r0, #255
 509 0064 FFF7FEFF 		bl	SD_IO_WriteByte
 510              	.LVL50:
 805:User/SDcard/SD_Card_Drive.c ****         /* initialise card V1 */
 511              		.loc 1 805 5 view .LVU145
 805:User/SDcard/SD_Card_Drive.c ****         /* initialise card V1 */
 512              		.loc 1 805 17 is_stmt 0 view .LVU146
 513 0068 9DF81850 		ldrb	r5, [sp, #24]	@ zero_extendqisi2
 805:User/SDcard/SD_Card_Drive.c ****         /* initialise card V1 */
 514              		.loc 1 805 7 view .LVU147
 515 006c 15F0040F 		tst	r5, #4
 516 0070 23D0     		beq	.L31
 517              	.L32:
 807:User/SDcard/SD_Card_Drive.c ****             /* initialise card V1 */
 518              		.loc 1 807 9 is_stmt 1 discriminator 1 view .LVU148
 810:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 519              		.loc 1 810 13 discriminator 1 view .LVU149
 810:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 520              		.loc 1 810 24 is_stmt 0 discriminator 1 view .LVU150
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 28


 521 0072 0024     		movs	r4, #0
 522 0074 0094     		str	r4, [sp]
 523 0076 FF23     		movs	r3, #255
 524 0078 2246     		mov	r2, r4
 525 007a 3721     		movs	r1, #55
 526 007c 02A8     		add	r0, sp, #8
 527 007e FFF7FEFF 		bl	SD_SendCmd
 528              	.LVL51:
 811:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 529              		.loc 1 811 13 is_stmt 1 discriminator 1 view .LVU151
 530 0082 0120     		movs	r0, #1
 531 0084 FFF7FEFF 		bl	SD_IO_CSState
 532              	.LVL52:
 812:User/SDcard/SD_Card_Drive.c **** 
 533              		.loc 1 812 13 discriminator 1 view .LVU152
 534 0088 FF20     		movs	r0, #255
 535 008a FFF7FEFF 		bl	SD_IO_WriteByte
 536              	.LVL53:
 815:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 537              		.loc 1 815 13 discriminator 1 view .LVU153
 815:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 538              		.loc 1 815 24 is_stmt 0 discriminator 1 view .LVU154
 539 008e 0094     		str	r4, [sp]
 540 0090 FF23     		movs	r3, #255
 541 0092 2246     		mov	r2, r4
 542 0094 2921     		movs	r1, #41
 543 0096 02A8     		add	r0, sp, #8
 544 0098 FFF7FEFF 		bl	SD_SendCmd
 545              	.LVL54:
 546 009c 0298     		ldr	r0, [sp, #8]	@ unaligned
 547 009e 0690     		str	r0, [sp, #24]
 816:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 548              		.loc 1 816 13 is_stmt 1 discriminator 1 view .LVU155
 549 00a0 0120     		movs	r0, #1
 550 00a2 FFF7FEFF 		bl	SD_IO_CSState
 551              	.LVL55:
 817:User/SDcard/SD_Card_Drive.c ****         } while(response.r1 == SD_R1_IN_IDLE_STATE);
 552              		.loc 1 817 13 discriminator 1 view .LVU156
 553 00a6 FF20     		movs	r0, #255
 554 00a8 FFF7FEFF 		bl	SD_IO_WriteByte
 555              	.LVL56:
 818:User/SDcard/SD_Card_Drive.c ****         flag_SDHC = 0;
 556              		.loc 1 818 16 discriminator 1 view .LVU157
 818:User/SDcard/SD_Card_Drive.c ****         flag_SDHC = 0;
 557              		.loc 1 818 25 is_stmt 0 discriminator 1 view .LVU158
 558 00ac 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
 818:User/SDcard/SD_Card_Drive.c ****         flag_SDHC = 0;
 559              		.loc 1 818 9 discriminator 1 view .LVU159
 560 00b0 012B     		cmp	r3, #1
 561 00b2 DED0     		beq	.L32
 819:User/SDcard/SD_Card_Drive.c ****     } else if(response.r1 == SD_R1_IN_IDLE_STATE) {
 562              		.loc 1 819 9 is_stmt 1 view .LVU160
 819:User/SDcard/SD_Card_Drive.c ****     } else if(response.r1 == SD_R1_IN_IDLE_STATE) {
 563              		.loc 1 819 19 is_stmt 0 view .LVU161
 564 00b4 384B     		ldr	r3, .L40
 565 00b6 1C80     		strh	r4, [r3]	@ movhi
 566 00b8 67E0     		b	.L29
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 29


 567              	.L31:
 820:User/SDcard/SD_Card_Drive.c ****         /* initialise card V2 */
 568              		.loc 1 820 12 is_stmt 1 view .LVU162
 820:User/SDcard/SD_Card_Drive.c ****         /* initialise card V2 */
 569              		.loc 1 820 14 is_stmt 0 view .LVU163
 570 00ba 012D     		cmp	r5, #1
 571 00bc 65D1     		bne	.L29
 572              	.L33:
 822:User/SDcard/SD_Card_Drive.c **** 
 573              		.loc 1 822 9 is_stmt 1 discriminator 1 view .LVU164
 825:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 574              		.loc 1 825 13 discriminator 1 view .LVU165
 825:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 575              		.loc 1 825 24 is_stmt 0 discriminator 1 view .LVU166
 576 00be 0024     		movs	r4, #0
 577 00c0 0094     		str	r4, [sp]
 578 00c2 FF23     		movs	r3, #255
 579 00c4 2246     		mov	r2, r4
 580 00c6 3721     		movs	r1, #55
 581 00c8 02A8     		add	r0, sp, #8
 582 00ca FFF7FEFF 		bl	SD_SendCmd
 583              	.LVL57:
 826:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 584              		.loc 1 826 13 is_stmt 1 discriminator 1 view .LVU167
 585 00ce 0120     		movs	r0, #1
 586 00d0 FFF7FEFF 		bl	SD_IO_CSState
 587              	.LVL58:
 827:User/SDcard/SD_Card_Drive.c **** 
 588              		.loc 1 827 13 discriminator 1 view .LVU168
 589 00d4 FF20     		movs	r0, #255
 590 00d6 FFF7FEFF 		bl	SD_IO_WriteByte
 591              	.LVL59:
 830:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 592              		.loc 1 830 13 discriminator 1 view .LVU169
 830:User/SDcard/SD_Card_Drive.c ****             SD_IO_CSState(1);
 593              		.loc 1 830 24 is_stmt 0 discriminator 1 view .LVU170
 594 00da 0094     		str	r4, [sp]
 595 00dc FF23     		movs	r3, #255
 596 00de 4FF08042 		mov	r2, #1073741824
 597 00e2 2921     		movs	r1, #41
 598 00e4 02A8     		add	r0, sp, #8
 599 00e6 FFF7FEFF 		bl	SD_SendCmd
 600              	.LVL60:
 601 00ea 0298     		ldr	r0, [sp, #8]	@ unaligned
 602 00ec 0690     		str	r0, [sp, #24]
 831:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 603              		.loc 1 831 13 is_stmt 1 discriminator 1 view .LVU171
 604 00ee 0120     		movs	r0, #1
 605 00f0 FFF7FEFF 		bl	SD_IO_CSState
 606              	.LVL61:
 832:User/SDcard/SD_Card_Drive.c ****         } while(response.r1 == SD_R1_IN_IDLE_STATE);
 607              		.loc 1 832 13 discriminator 1 view .LVU172
 608 00f4 FF20     		movs	r0, #255
 609 00f6 FFF7FEFF 		bl	SD_IO_WriteByte
 610              	.LVL62:
 833:User/SDcard/SD_Card_Drive.c **** 
 611              		.loc 1 833 16 discriminator 1 view .LVU173
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 30


 833:User/SDcard/SD_Card_Drive.c **** 
 612              		.loc 1 833 25 is_stmt 0 discriminator 1 view .LVU174
 613 00fa 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
 833:User/SDcard/SD_Card_Drive.c **** 
 614              		.loc 1 833 9 discriminator 1 view .LVU175
 615 00fe 012B     		cmp	r3, #1
 616 0100 DDD0     		beq	.L33
 835:User/SDcard/SD_Card_Drive.c ****             do {
 617              		.loc 1 835 9 is_stmt 1 view .LVU176
 835:User/SDcard/SD_Card_Drive.c ****             do {
 618              		.loc 1 835 11 is_stmt 0 view .LVU177
 619 0102 13F0040F 		tst	r3, #4
 620 0106 25D0     		beq	.L34
 621              	.L35:
 836:User/SDcard/SD_Card_Drive.c ****                 /* Send CMD55 (SD_CMD_APP_CMD) before any ACMD command: R1 response (0x00: no error
 622              		.loc 1 836 13 is_stmt 1 view .LVU178
 838:User/SDcard/SD_Card_Drive.c ****                 SD_IO_CSState(1);
 623              		.loc 1 838 17 view .LVU179
 838:User/SDcard/SD_Card_Drive.c ****                 SD_IO_CSState(1);
 624              		.loc 1 838 28 is_stmt 0 view .LVU180
 625 0108 0022     		movs	r2, #0
 626 010a 0092     		str	r2, [sp]
 627 010c FF23     		movs	r3, #255
 628 010e 3721     		movs	r1, #55
 629 0110 02A8     		add	r0, sp, #8
 630 0112 FFF7FEFF 		bl	SD_SendCmd
 631              	.LVL63:
 632 0116 0298     		ldr	r0, [sp, #8]	@ unaligned
 633 0118 0690     		str	r0, [sp, #24]
 839:User/SDcard/SD_Card_Drive.c ****                 SD_IO_WriteByte(SD_DUMMY_BYTE);
 634              		.loc 1 839 17 is_stmt 1 view .LVU181
 635 011a 0120     		movs	r0, #1
 636 011c FFF7FEFF 		bl	SD_IO_CSState
 637              	.LVL64:
 840:User/SDcard/SD_Card_Drive.c ****                 if(response.r1 != SD_R1_IN_IDLE_STATE) {
 638              		.loc 1 840 17 view .LVU182
 639 0120 FF20     		movs	r0, #255
 640 0122 FFF7FEFF 		bl	SD_IO_WriteByte
 641              	.LVL65:
 841:User/SDcard/SD_Card_Drive.c ****                     return BSP_SD_ERROR;
 642              		.loc 1 841 17 view .LVU183
 841:User/SDcard/SD_Card_Drive.c ****                     return BSP_SD_ERROR;
 643              		.loc 1 841 28 is_stmt 0 view .LVU184
 644 0126 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
 841:User/SDcard/SD_Card_Drive.c ****                     return BSP_SD_ERROR;
 645              		.loc 1 841 19 view .LVU185
 646 012a 012B     		cmp	r3, #1
 647 012c 30D1     		bne	.L37
 845:User/SDcard/SD_Card_Drive.c ****                 SD_IO_CSState(1);
 648              		.loc 1 845 17 is_stmt 1 view .LVU186
 845:User/SDcard/SD_Card_Drive.c ****                 SD_IO_CSState(1);
 649              		.loc 1 845 28 is_stmt 0 view .LVU187
 650 012e 0022     		movs	r2, #0
 651 0130 0092     		str	r2, [sp]
 652 0132 FF23     		movs	r3, #255
 653 0134 2921     		movs	r1, #41
 654 0136 02A8     		add	r0, sp, #8
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 31


 655 0138 FFF7FEFF 		bl	SD_SendCmd
 656              	.LVL66:
 657 013c 0298     		ldr	r0, [sp, #8]	@ unaligned
 658 013e 0690     		str	r0, [sp, #24]
 846:User/SDcard/SD_Card_Drive.c ****                 SD_IO_WriteByte(SD_DUMMY_BYTE);
 659              		.loc 1 846 17 is_stmt 1 view .LVU188
 660 0140 0120     		movs	r0, #1
 661 0142 FFF7FEFF 		bl	SD_IO_CSState
 662              	.LVL67:
 847:User/SDcard/SD_Card_Drive.c ****             } while(response.r1 == SD_R1_IN_IDLE_STATE);
 663              		.loc 1 847 17 view .LVU189
 664 0146 FF20     		movs	r0, #255
 665 0148 FFF7FEFF 		bl	SD_IO_WriteByte
 666              	.LVL68:
 848:User/SDcard/SD_Card_Drive.c ****         }
 667              		.loc 1 848 20 view .LVU190
 848:User/SDcard/SD_Card_Drive.c ****         }
 668              		.loc 1 848 29 is_stmt 0 view .LVU191
 669 014c 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
 848:User/SDcard/SD_Card_Drive.c ****         }
 670              		.loc 1 848 13 view .LVU192
 671 0150 012B     		cmp	r3, #1
 672 0152 D9D0     		beq	.L35
 673              	.L34:
 852:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 674              		.loc 1 852 9 is_stmt 1 view .LVU193
 852:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 675              		.loc 1 852 20 is_stmt 0 view .LVU194
 676 0154 0323     		movs	r3, #3
 677 0156 0093     		str	r3, [sp]
 678 0158 FF23     		movs	r3, #255
 679 015a 0022     		movs	r2, #0
 680 015c 3A21     		movs	r1, #58
 681 015e 02A8     		add	r0, sp, #8
 682 0160 FFF7FEFF 		bl	SD_SendCmd
 683              	.LVL69:
 684 0164 0298     		ldr	r0, [sp, #8]	@ unaligned
 685 0166 0690     		str	r0, [sp, #24]
 853:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 686              		.loc 1 853 9 is_stmt 1 view .LVU195
 687 0168 0120     		movs	r0, #1
 688 016a FFF7FEFF 		bl	SD_IO_CSState
 689              	.LVL70:
 854:User/SDcard/SD_Card_Drive.c ****         if(response.r1 != SD_R1_NO_ERROR) {
 690              		.loc 1 854 9 view .LVU196
 691 016e FF20     		movs	r0, #255
 692 0170 FFF7FEFF 		bl	SD_IO_WriteByte
 693              	.LVL71:
 855:User/SDcard/SD_Card_Drive.c ****             return BSP_SD_ERROR;
 694              		.loc 1 855 9 view .LVU197
 855:User/SDcard/SD_Card_Drive.c ****             return BSP_SD_ERROR;
 695              		.loc 1 855 20 is_stmt 0 view .LVU198
 696 0174 9DF81840 		ldrb	r4, [sp, #24]	@ zero_extendqisi2
 855:User/SDcard/SD_Card_Drive.c ****             return BSP_SD_ERROR;
 697              		.loc 1 855 11 view .LVU199
 698 0178 64B9     		cbnz	r4, .L38
 858:User/SDcard/SD_Card_Drive.c ****     } else {
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 32


 699              		.loc 1 858 9 is_stmt 1 view .LVU200
 858:User/SDcard/SD_Card_Drive.c ****     } else {
 700              		.loc 1 858 30 is_stmt 0 view .LVU201
 701 017a 9DF81930 		ldrb	r3, [sp, #25]	@ zero_extendqisi2
 858:User/SDcard/SD_Card_Drive.c ****     } else {
 702              		.loc 1 858 42 view .LVU202
 703 017e C3F38013 		ubfx	r3, r3, #6, #1
 858:User/SDcard/SD_Card_Drive.c ****     } else {
 704              		.loc 1 858 19 view .LVU203
 705 0182 054A     		ldr	r2, .L40
 706 0184 1380     		strh	r3, [r2]	@ movhi
 707 0186 00E0     		b	.L29
 708              	.L36:
 795:User/SDcard/SD_Card_Drive.c ****         }
 709              		.loc 1 795 20 view .LVU204
 710 0188 0124     		movs	r4, #1
 711              	.L29:
 864:User/SDcard/SD_Card_Drive.c **** 
 712              		.loc 1 864 1 view .LVU205
 713 018a 2046     		mov	r0, r4
 714 018c 09B0     		add	sp, sp, #36
 715              	.LCFI9:
 716              		.cfi_remember_state
 717              		.cfi_def_cfa_offset 12
 718              		@ sp needed
 719 018e 30BD     		pop	{r4, r5, pc}
 720              	.L37:
 721              	.LCFI10:
 722              		.cfi_restore_state
 842:User/SDcard/SD_Card_Drive.c ****                 }
 723              		.loc 1 842 28 view .LVU206
 724 0190 2C46     		mov	r4, r5
 725 0192 FAE7     		b	.L29
 726              	.L38:
 856:User/SDcard/SD_Card_Drive.c ****         }
 727              		.loc 1 856 20 view .LVU207
 728 0194 2C46     		mov	r4, r5
 729 0196 F8E7     		b	.L29
 730              	.L41:
 731              		.align	2
 732              	.L40:
 733 0198 00000000 		.word	.LANCHOR1
 734              		.cfi_endproc
 735              	.LFE143:
 737              		.section	.text.SD_GetCSDRegister,"ax",%progbits
 738              		.align	1
 739              		.syntax unified
 740              		.thumb
 741              		.thumb_func
 742              		.fpu fpv4-sp-d16
 744              	SD_GetCSDRegister:
 745              	.LVL72:
 746              	.LFB139:
 481:User/SDcard/SD_Card_Drive.c ****     uint16_t counter = 0;
 747              		.loc 1 481 1 is_stmt 1 view -0
 748              		.cfi_startproc
 749              		@ args = 0, pretend = 0, frame = 24
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 33


 750              		@ frame_needed = 0, uses_anonymous_args = 0
 481:User/SDcard/SD_Card_Drive.c ****     uint16_t counter = 0;
 751              		.loc 1 481 1 is_stmt 0 view .LVU209
 752 0000 70B5     		push	{r4, r5, r6, lr}
 753              	.LCFI11:
 754              		.cfi_def_cfa_offset 16
 755              		.cfi_offset 4, -16
 756              		.cfi_offset 5, -12
 757              		.cfi_offset 6, -8
 758              		.cfi_offset 14, -4
 759 0002 88B0     		sub	sp, sp, #32
 760              	.LCFI12:
 761              		.cfi_def_cfa_offset 48
 762 0004 0546     		mov	r5, r0
 482:User/SDcard/SD_Card_Drive.c ****     uint8_t CSD_Tab[16];
 763              		.loc 1 482 5 is_stmt 1 view .LVU210
 764              	.LVL73:
 483:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 765              		.loc 1 483 5 view .LVU211
 484:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 766              		.loc 1 484 5 view .LVU212
 485:User/SDcard/SD_Card_Drive.c **** 
 767              		.loc 1 485 5 view .LVU213
 488:User/SDcard/SD_Card_Drive.c ****     if(response.r1 == SD_R1_NO_ERROR) {
 768              		.loc 1 488 5 view .LVU214
 488:User/SDcard/SD_Card_Drive.c ****     if(response.r1 == SD_R1_NO_ERROR) {
 769              		.loc 1 488 16 is_stmt 0 view .LVU215
 770 0006 0022     		movs	r2, #0
 771 0008 0092     		str	r2, [sp]
 772 000a FF23     		movs	r3, #255
 773 000c 0921     		movs	r1, #9
 774 000e 02A8     		add	r0, sp, #8
 775              	.LVL74:
 488:User/SDcard/SD_Card_Drive.c ****     if(response.r1 == SD_R1_NO_ERROR) {
 776              		.loc 1 488 16 view .LVU216
 777 0010 FFF7FEFF 		bl	SD_SendCmd
 778              	.LVL75:
 489:User/SDcard/SD_Card_Drive.c ****         if (SD_WaitData(SD_TOKEN_START_DATA_SINGLE_BLOCK_READ) == BSP_SD_OK) {
 779              		.loc 1 489 5 is_stmt 1 view .LVU217
 489:User/SDcard/SD_Card_Drive.c ****         if (SD_WaitData(SD_TOKEN_START_DATA_SINGLE_BLOCK_READ) == BSP_SD_OK) {
 780              		.loc 1 489 16 is_stmt 0 view .LVU218
 781 0014 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 489:User/SDcard/SD_Card_Drive.c ****         if (SD_WaitData(SD_TOKEN_START_DATA_SINGLE_BLOCK_READ) == BSP_SD_OK) {
 782              		.loc 1 489 7 view .LVU219
 783 0018 4BB1     		cbz	r3, .L51
 484:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 784              		.loc 1 484 13 view .LVU220
 785 001a 0126     		movs	r6, #1
 786              	.LVL76:
 787              	.L43:
 574:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 788              		.loc 1 574 5 is_stmt 1 view .LVU221
 789 001c 0120     		movs	r0, #1
 790 001e FFF7FEFF 		bl	SD_IO_CSState
 791              	.LVL77:
 575:User/SDcard/SD_Card_Drive.c **** 
 792              		.loc 1 575 5 view .LVU222
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 34


 793 0022 FF20     		movs	r0, #255
 794 0024 FFF7FEFF 		bl	SD_IO_WriteByte
 795              	.LVL78:
 578:User/SDcard/SD_Card_Drive.c **** }
 796              		.loc 1 578 5 view .LVU223
 579:User/SDcard/SD_Card_Drive.c **** 
 797              		.loc 1 579 1 is_stmt 0 view .LVU224
 798 0028 3046     		mov	r0, r6
 799 002a 08B0     		add	sp, sp, #32
 800              	.LCFI13:
 801              		.cfi_remember_state
 802              		.cfi_def_cfa_offset 16
 803              		@ sp needed
 804 002c 70BD     		pop	{r4, r5, r6, pc}
 805              	.LVL79:
 806              	.L51:
 807              	.LCFI14:
 808              		.cfi_restore_state
 490:User/SDcard/SD_Card_Drive.c ****             for (counter = 0; counter < 16; counter++) {
 809              		.loc 1 490 9 is_stmt 1 view .LVU225
 490:User/SDcard/SD_Card_Drive.c ****             for (counter = 0; counter < 16; counter++) {
 810              		.loc 1 490 13 is_stmt 0 view .LVU226
 811 002e FE20     		movs	r0, #254
 812 0030 FFF7FEFF 		bl	SD_WaitData
 813              	.LVL80:
 490:User/SDcard/SD_Card_Drive.c ****             for (counter = 0; counter < 16; counter++) {
 814              		.loc 1 490 12 view .LVU227
 815 0034 0646     		mov	r6, r0
 816 0036 08B1     		cbz	r0, .L49
 484:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 817              		.loc 1 484 13 view .LVU228
 818 0038 0126     		movs	r6, #1
 819 003a EFE7     		b	.L43
 820              	.L49:
 491:User/SDcard/SD_Card_Drive.c ****                 /* Store CSD register value on CSD_Tab */
 821              		.loc 1 491 26 view .LVU229
 822 003c 0024     		movs	r4, #0
 823              	.LVL81:
 824              	.L44:
 491:User/SDcard/SD_Card_Drive.c ****                 /* Store CSD register value on CSD_Tab */
 825              		.loc 1 491 31 is_stmt 1 discriminator 1 view .LVU230
 491:User/SDcard/SD_Card_Drive.c ****                 /* Store CSD register value on CSD_Tab */
 826              		.loc 1 491 13 is_stmt 0 discriminator 1 view .LVU231
 827 003e 0F2C     		cmp	r4, #15
 828 0040 09D8     		bhi	.L52
 493:User/SDcard/SD_Card_Drive.c ****             }
 829              		.loc 1 493 17 is_stmt 1 discriminator 3 view .LVU232
 493:User/SDcard/SD_Card_Drive.c ****             }
 830              		.loc 1 493 36 is_stmt 0 discriminator 3 view .LVU233
 831 0042 FF20     		movs	r0, #255
 832 0044 FFF7FEFF 		bl	SD_IO_WriteByte
 833              	.LVL82:
 493:User/SDcard/SD_Card_Drive.c ****             }
 834              		.loc 1 493 34 discriminator 3 view .LVU234
 835 0048 08AB     		add	r3, sp, #32
 836 004a 2344     		add	r3, r3, r4
 837 004c 03F8100C 		strb	r0, [r3, #-16]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 35


 491:User/SDcard/SD_Card_Drive.c ****                 /* Store CSD register value on CSD_Tab */
 838              		.loc 1 491 45 is_stmt 1 discriminator 3 view .LVU235
 491:User/SDcard/SD_Card_Drive.c ****                 /* Store CSD register value on CSD_Tab */
 839              		.loc 1 491 52 is_stmt 0 discriminator 3 view .LVU236
 840 0050 0134     		adds	r4, r4, #1
 841              	.LVL83:
 491:User/SDcard/SD_Card_Drive.c ****                 /* Store CSD register value on CSD_Tab */
 842              		.loc 1 491 52 discriminator 3 view .LVU237
 843 0052 A4B2     		uxth	r4, r4
 844              	.LVL84:
 491:User/SDcard/SD_Card_Drive.c ****                 /* Store CSD register value on CSD_Tab */
 845              		.loc 1 491 52 discriminator 3 view .LVU238
 846 0054 F3E7     		b	.L44
 847              	.L52:
 497:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 848              		.loc 1 497 13 is_stmt 1 view .LVU239
 849 0056 FF20     		movs	r0, #255
 850 0058 FFF7FEFF 		bl	SD_IO_WriteByte
 851              	.LVL85:
 498:User/SDcard/SD_Card_Drive.c **** 
 852              		.loc 1 498 13 view .LVU240
 853 005c FF20     		movs	r0, #255
 854 005e FFF7FEFF 		bl	SD_IO_WriteByte
 855              	.LVL86:
 505:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved1 =  CSD_Tab[0] & 0x3F;
 856              		.loc 1 505 13 view .LVU241
 505:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved1 =  CSD_Tab[0] & 0x3F;
 857              		.loc 1 505 38 is_stmt 0 view .LVU242
 858 0062 9DF81020 		ldrb	r2, [sp, #16]	@ zero_extendqisi2
 505:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved1 =  CSD_Tab[0] & 0x3F;
 859              		.loc 1 505 50 view .LVU243
 860 0066 9109     		lsrs	r1, r2, #6
 505:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved1 =  CSD_Tab[0] & 0x3F;
 861              		.loc 1 505 28 view .LVU244
 862 0068 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 863 006a 61F30103 		bfi	r3, r1, #0, #2
 506:User/SDcard/SD_Card_Drive.c **** 
 864              		.loc 1 506 13 is_stmt 1 view .LVU245
 506:User/SDcard/SD_Card_Drive.c **** 
 865              		.loc 1 506 28 is_stmt 0 view .LVU246
 866 006e 62F38703 		bfi	r3, r2, #2, #6
 867 0072 2B70     		strb	r3, [r5]
 509:User/SDcard/SD_Card_Drive.c **** 
 868              		.loc 1 509 13 is_stmt 1 view .LVU247
 509:User/SDcard/SD_Card_Drive.c **** 
 869              		.loc 1 509 32 is_stmt 0 view .LVU248
 870 0074 9DF81130 		ldrb	r3, [sp, #17]	@ zero_extendqisi2
 509:User/SDcard/SD_Card_Drive.c **** 
 871              		.loc 1 509 23 view .LVU249
 872 0078 6B70     		strb	r3, [r5, #1]
 512:User/SDcard/SD_Card_Drive.c **** 
 873              		.loc 1 512 13 is_stmt 1 view .LVU250
 512:User/SDcard/SD_Card_Drive.c **** 
 874              		.loc 1 512 32 is_stmt 0 view .LVU251
 875 007a 9DF81230 		ldrb	r3, [sp, #18]	@ zero_extendqisi2
 512:User/SDcard/SD_Card_Drive.c **** 
 876              		.loc 1 512 23 view .LVU252
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 36


 877 007e AB70     		strb	r3, [r5, #2]
 515:User/SDcard/SD_Card_Drive.c **** 
 878              		.loc 1 515 13 is_stmt 1 view .LVU253
 515:User/SDcard/SD_Card_Drive.c **** 
 879              		.loc 1 515 41 is_stmt 0 view .LVU254
 880 0080 9DF81330 		ldrb	r3, [sp, #19]	@ zero_extendqisi2
 515:User/SDcard/SD_Card_Drive.c **** 
 881              		.loc 1 515 32 view .LVU255
 882 0084 EB70     		strb	r3, [r5, #3]
 518:User/SDcard/SD_Card_Drive.c ****             Csd->RdBlockLen = CSD_Tab[5] & 0x0F;
 883              		.loc 1 518 13 is_stmt 1 view .LVU256
 518:User/SDcard/SD_Card_Drive.c ****             Csd->RdBlockLen = CSD_Tab[5] & 0x0F;
 884              		.loc 1 518 44 is_stmt 0 view .LVU257
 885 0086 9DF81430 		ldrb	r3, [sp, #20]	@ zero_extendqisi2
 518:User/SDcard/SD_Card_Drive.c ****             Csd->RdBlockLen = CSD_Tab[5] & 0x0F;
 886              		.loc 1 518 65 view .LVU258
 887 008a 9DF81510 		ldrb	r1, [sp, #21]	@ zero_extendqisi2
 518:User/SDcard/SD_Card_Drive.c ****             Csd->RdBlockLen = CSD_Tab[5] & 0x0F;
 888              		.loc 1 518 77 view .LVU259
 889 008e 0A09     		lsrs	r2, r1, #4
 518:User/SDcard/SD_Card_Drive.c ****             Csd->RdBlockLen = CSD_Tab[5] & 0x0F;
 890              		.loc 1 518 54 view .LVU260
 891 0090 42EA0312 		orr	r2, r2, r3, lsl #4
 518:User/SDcard/SD_Card_Drive.c ****             Csd->RdBlockLen = CSD_Tab[5] & 0x0F;
 892              		.loc 1 518 34 view .LVU261
 893 0094 AB88     		ldrh	r3, [r5, #4]
 894 0096 62F30B03 		bfi	r3, r2, #0, #12
 895 009a AB80     		strh	r3, [r5, #4]	@ movhi
 519:User/SDcard/SD_Card_Drive.c **** 
 896              		.loc 1 519 13 is_stmt 1 view .LVU262
 519:User/SDcard/SD_Card_Drive.c **** 
 897              		.loc 1 519 29 is_stmt 0 view .LVU263
 898 009c C3F30723 		ubfx	r3, r3, #8, #8
 899 00a0 61F30713 		bfi	r3, r1, #4, #4
 900 00a4 6B71     		strb	r3, [r5, #5]
 522:User/SDcard/SD_Card_Drive.c ****             Csd->WrBlockMisalign = (CSD_Tab[6] & 0x40) >> 6;
 901              		.loc 1 522 13 is_stmt 1 view .LVU264
 522:User/SDcard/SD_Card_Drive.c ****             Csd->WrBlockMisalign = (CSD_Tab[6] & 0x40) >> 6;
 902              		.loc 1 522 44 is_stmt 0 view .LVU265
 903 00a6 9DF81630 		ldrb	r3, [sp, #22]	@ zero_extendqisi2
 522:User/SDcard/SD_Card_Drive.c ****             Csd->WrBlockMisalign = (CSD_Tab[6] & 0x40) >> 6;
 904              		.loc 1 522 56 view .LVU266
 905 00aa D909     		lsrs	r1, r3, #7
 522:User/SDcard/SD_Card_Drive.c ****             Csd->WrBlockMisalign = (CSD_Tab[6] & 0x40) >> 6;
 906              		.loc 1 522 34 view .LVU267
 907 00ac AA79     		ldrb	r2, [r5, #6]	@ zero_extendqisi2
 908 00ae 61F30002 		bfi	r2, r1, #0, #1
 523:User/SDcard/SD_Card_Drive.c ****             Csd->RdBlockMisalign = (CSD_Tab[6] & 0x20) >> 5;
 909              		.loc 1 523 13 is_stmt 1 view .LVU268
 523:User/SDcard/SD_Card_Drive.c ****             Csd->RdBlockMisalign = (CSD_Tab[6] & 0x20) >> 5;
 910              		.loc 1 523 56 is_stmt 0 view .LVU269
 911 00b2 C3F38011 		ubfx	r1, r3, #6, #1
 523:User/SDcard/SD_Card_Drive.c ****             Csd->RdBlockMisalign = (CSD_Tab[6] & 0x20) >> 5;
 912              		.loc 1 523 34 view .LVU270
 913 00b6 61F34102 		bfi	r2, r1, #1, #1
 524:User/SDcard/SD_Card_Drive.c ****             Csd->DSRImpl         = (CSD_Tab[6] & 0x10) >> 4;
 914              		.loc 1 524 13 is_stmt 1 view .LVU271
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 37


 524:User/SDcard/SD_Card_Drive.c ****             Csd->DSRImpl         = (CSD_Tab[6] & 0x10) >> 4;
 915              		.loc 1 524 56 is_stmt 0 view .LVU272
 916 00ba C3F34011 		ubfx	r1, r3, #5, #1
 524:User/SDcard/SD_Card_Drive.c ****             Csd->DSRImpl         = (CSD_Tab[6] & 0x10) >> 4;
 917              		.loc 1 524 34 view .LVU273
 918 00be 61F38202 		bfi	r2, r1, #2, #1
 525:User/SDcard/SD_Card_Drive.c **** 
 919              		.loc 1 525 13 is_stmt 1 view .LVU274
 525:User/SDcard/SD_Card_Drive.c **** 
 920              		.loc 1 525 56 is_stmt 0 view .LVU275
 921 00c2 C3F30011 		ubfx	r1, r3, #4, #1
 525:User/SDcard/SD_Card_Drive.c **** 
 922              		.loc 1 525 34 view .LVU276
 923 00c6 61F3C302 		bfi	r2, r1, #3, #1
 924 00ca AA71     		strb	r2, [r5, #6]
 531:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.Reserved1 = ((CSD_Tab[6] & 0x0C) >> 2);
 925              		.loc 1 531 13 is_stmt 1 view .LVU277
 531:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.Reserved1 = ((CSD_Tab[6] & 0x0C) >> 2);
 926              		.loc 1 531 26 is_stmt 0 view .LVU278
 927 00cc 584A     		ldr	r2, .L53
 928 00ce 1288     		ldrh	r2, [r2]
 531:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.Reserved1 = ((CSD_Tab[6] & 0x0C) >> 2);
 929              		.loc 1 531 15 view .LVU279
 930 00d0 002A     		cmp	r2, #0
 931 00d2 40F08E80 		bne	.L46
 532:User/SDcard/SD_Card_Drive.c **** 
 932              		.loc 1 532 17 is_stmt 1 view .LVU280
 532:User/SDcard/SD_Card_Drive.c **** 
 933              		.loc 1 532 66 is_stmt 0 view .LVU281
 934 00d6 C3F38101 		ubfx	r1, r3, #2, #2
 532:User/SDcard/SD_Card_Drive.c **** 
 935              		.loc 1 532 43 view .LVU282
 936 00da 2A7A     		ldrb	r2, [r5, #8]	@ zero_extendqisi2
 937 00dc 61F30102 		bfi	r2, r1, #0, #2
 938 00e0 2A72     		strb	r2, [r5, #8]
 534:User/SDcard/SD_Card_Drive.c ****                                               |  (CSD_Tab[7] << 2)
 939              		.loc 1 534 17 is_stmt 1 view .LVU283
 534:User/SDcard/SD_Card_Drive.c ****                                               |  (CSD_Tab[7] << 2)
 940              		.loc 1 534 68 is_stmt 0 view .LVU284
 941 00e2 9B02     		lsls	r3, r3, #10
 942 00e4 03F44063 		and	r3, r3, #3072
 535:User/SDcard/SD_Card_Drive.c ****                                               | ((CSD_Tab[8] & 0xC0) >> 6);
 943              		.loc 1 535 58 view .LVU285
 944 00e8 9DF81720 		ldrb	r2, [sp, #23]	@ zero_extendqisi2
 535:User/SDcard/SD_Card_Drive.c ****                                               | ((CSD_Tab[8] & 0xC0) >> 6);
 945              		.loc 1 535 47 view .LVU286
 946 00ec 43EA8203 		orr	r3, r3, r2, lsl #2
 536:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxRdCurrentVDDMin = (CSD_Tab[8] & 0x38) >> 3;
 947              		.loc 1 536 58 view .LVU287
 948 00f0 9DF81820 		ldrb	r2, [sp, #24]	@ zero_extendqisi2
 536:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxRdCurrentVDDMin = (CSD_Tab[8] & 0x38) >> 3;
 949              		.loc 1 536 47 view .LVU288
 950 00f4 43EA9213 		orr	r3, r3, r2, lsr #6
 534:User/SDcard/SD_Card_Drive.c ****                                               |  (CSD_Tab[7] << 2)
 951              		.loc 1 534 44 view .LVU289
 952 00f8 2989     		ldrh	r1, [r5, #8]
 953 00fa 63F38D01 		bfi	r1, r3, #2, #12
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 38


 954 00fe 2981     		strh	r1, [r5, #8]	@ movhi
 537:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxRdCurrentVDDMax = (CSD_Tab[8] & 0x07);
 955              		.loc 1 537 17 is_stmt 1 view .LVU290
 537:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxRdCurrentVDDMax = (CSD_Tab[8] & 0x07);
 956              		.loc 1 537 74 is_stmt 0 view .LVU291
 957 0100 C2F3C201 		ubfx	r1, r2, #3, #3
 537:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxRdCurrentVDDMax = (CSD_Tab[8] & 0x07);
 958              		.loc 1 537 52 view .LVU292
 959 0104 AB7A     		ldrb	r3, [r5, #10]	@ zero_extendqisi2
 960 0106 61F30203 		bfi	r3, r1, #0, #3
 538:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxWrCurrentVDDMin = (CSD_Tab[9] & 0xE0) >> 5;
 961              		.loc 1 538 17 is_stmt 1 view .LVU293
 538:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxWrCurrentVDDMin = (CSD_Tab[9] & 0xE0) >> 5;
 962              		.loc 1 538 52 is_stmt 0 view .LVU294
 963 010a 62F3C503 		bfi	r3, r2, #3, #3
 964 010e AB72     		strb	r3, [r5, #10]
 539:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxWrCurrentVDDMax = (CSD_Tab[9] & 0x1C) >> 2;
 965              		.loc 1 539 17 is_stmt 1 view .LVU295
 539:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxWrCurrentVDDMax = (CSD_Tab[9] & 0x1C) >> 2;
 966              		.loc 1 539 62 is_stmt 0 view .LVU296
 967 0110 9DF81930 		ldrb	r3, [sp, #25]	@ zero_extendqisi2
 539:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxWrCurrentVDDMax = (CSD_Tab[9] & 0x1C) >> 2;
 968              		.loc 1 539 74 view .LVU297
 969 0114 5909     		lsrs	r1, r3, #5
 539:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.MaxWrCurrentVDDMax = (CSD_Tab[9] & 0x1C) >> 2;
 970              		.loc 1 539 52 view .LVU298
 971 0116 EA7A     		ldrb	r2, [r5, #11]	@ zero_extendqisi2
 972 0118 61F30202 		bfi	r2, r1, #0, #3
 540:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.DeviceSizeMul = ((CSD_Tab[9] & 0x03) << 1)
 973              		.loc 1 540 17 is_stmt 1 view .LVU299
 540:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.DeviceSizeMul = ((CSD_Tab[9] & 0x03) << 1)
 974              		.loc 1 540 74 is_stmt 0 view .LVU300
 975 011c C3F38201 		ubfx	r1, r3, #2, #3
 540:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v1.DeviceSizeMul = ((CSD_Tab[9] & 0x03) << 1)
 976              		.loc 1 540 52 view .LVU301
 977 0120 61F3C502 		bfi	r2, r1, #3, #3
 978 0124 EA72     		strb	r2, [r5, #11]
 541:User/SDcard/SD_Card_Drive.c ****                                                 |((CSD_Tab[10] & 0x80) >> 7);
 979              		.loc 1 541 17 is_stmt 1 view .LVU302
 541:User/SDcard/SD_Card_Drive.c ****                                                 |((CSD_Tab[10] & 0x80) >> 7);
 980              		.loc 1 541 70 is_stmt 0 view .LVU303
 981 0126 5B00     		lsls	r3, r3, #1
 982 0128 03F00603 		and	r3, r3, #6
 542:User/SDcard/SD_Card_Drive.c ****             } else {
 983              		.loc 1 542 59 view .LVU304
 984 012c 9DF81A20 		ldrb	r2, [sp, #26]	@ zero_extendqisi2
 542:User/SDcard/SD_Card_Drive.c ****             } else {
 985              		.loc 1 542 49 view .LVU305
 986 0130 43EAD213 		orr	r3, r3, r2, lsr #7
 541:User/SDcard/SD_Card_Drive.c ****                                                 |((CSD_Tab[10] & 0x80) >> 7);
 987              		.loc 1 541 47 view .LVU306
 988 0134 2A7B     		ldrb	r2, [r5, #12]	@ zero_extendqisi2
 989 0136 63F30202 		bfi	r2, r3, #0, #3
 990 013a 2A73     		strb	r2, [r5, #12]
 991              	.L47:
 549:User/SDcard/SD_Card_Drive.c ****             Csd->EraseSectorSize   = ((CSD_Tab[10] & 0x3F) << 1)
 992              		.loc 1 549 13 is_stmt 1 view .LVU307
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 39


 549:User/SDcard/SD_Card_Drive.c ****             Csd->EraseSectorSize   = ((CSD_Tab[10] & 0x3F) << 1)
 993              		.loc 1 549 51 is_stmt 0 view .LVU308
 994 013c 9DF81A30 		ldrb	r3, [sp, #26]	@ zero_extendqisi2
 549:User/SDcard/SD_Card_Drive.c ****             Csd->EraseSectorSize   = ((CSD_Tab[10] & 0x3F) << 1)
 995              		.loc 1 549 64 view .LVU309
 996 0140 C3F38011 		ubfx	r1, r3, #6, #1
 549:User/SDcard/SD_Card_Drive.c ****             Csd->EraseSectorSize   = ((CSD_Tab[10] & 0x3F) << 1)
 997              		.loc 1 549 41 view .LVU310
 998 0144 2A7C     		ldrb	r2, [r5, #16]	@ zero_extendqisi2
 999 0146 61F30002 		bfi	r2, r1, #0, #1
 550:User/SDcard/SD_Card_Drive.c ****                                      |((CSD_Tab[11] & 0x80) >> 7);
 1000              		.loc 1 550 13 is_stmt 1 view .LVU311
 550:User/SDcard/SD_Card_Drive.c ****                                      |((CSD_Tab[11] & 0x80) >> 7);
 1001              		.loc 1 550 60 is_stmt 0 view .LVU312
 1002 014a 5B00     		lsls	r3, r3, #1
 1003 014c 03F07E03 		and	r3, r3, #126
 551:User/SDcard/SD_Card_Drive.c ****             Csd->WrProtectGrSize   = (CSD_Tab[11] & 0x7F);
 1004              		.loc 1 551 48 view .LVU313
 1005 0150 9DF81B10 		ldrb	r1, [sp, #27]	@ zero_extendqisi2
 551:User/SDcard/SD_Card_Drive.c ****             Csd->WrProtectGrSize   = (CSD_Tab[11] & 0x7F);
 1006              		.loc 1 551 38 view .LVU314
 1007 0154 43EAD113 		orr	r3, r3, r1, lsr #7
 550:User/SDcard/SD_Card_Drive.c ****                                      |((CSD_Tab[11] & 0x80) >> 7);
 1008              		.loc 1 550 36 view .LVU315
 1009 0158 63F34702 		bfi	r2, r3, #1, #7
 1010 015c 2A74     		strb	r2, [r5, #16]
 552:User/SDcard/SD_Card_Drive.c ****             Csd->WrProtectGrEnable = (CSD_Tab[12] & 0x80) >> 7;
 1011              		.loc 1 552 13 is_stmt 1 view .LVU316
 552:User/SDcard/SD_Card_Drive.c ****             Csd->WrProtectGrEnable = (CSD_Tab[12] & 0x80) >> 7;
 1012              		.loc 1 552 36 is_stmt 0 view .LVU317
 1013 015e 6A7C     		ldrb	r2, [r5, #17]	@ zero_extendqisi2
 1014 0160 61F30602 		bfi	r2, r1, #0, #7
 553:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved2         = (CSD_Tab[12] & 0x60) >> 5;
 1015              		.loc 1 553 13 is_stmt 1 view .LVU318
 553:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved2         = (CSD_Tab[12] & 0x60) >> 5;
 1016              		.loc 1 553 46 is_stmt 0 view .LVU319
 1017 0164 9DF81C30 		ldrb	r3, [sp, #28]	@ zero_extendqisi2
 553:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved2         = (CSD_Tab[12] & 0x60) >> 5;
 1018              		.loc 1 553 59 view .LVU320
 1019 0168 D909     		lsrs	r1, r3, #7
 553:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved2         = (CSD_Tab[12] & 0x60) >> 5;
 1020              		.loc 1 553 36 view .LVU321
 1021 016a 61F3C712 		bfi	r2, r1, #7, #1
 1022 016e 6A74     		strb	r2, [r5, #17]
 554:User/SDcard/SD_Card_Drive.c ****             Csd->WrSpeedFact       = (CSD_Tab[12] & 0x1C) >> 2;
 1023              		.loc 1 554 13 is_stmt 1 view .LVU322
 554:User/SDcard/SD_Card_Drive.c ****             Csd->WrSpeedFact       = (CSD_Tab[12] & 0x1C) >> 2;
 1024              		.loc 1 554 59 is_stmt 0 view .LVU323
 1025 0170 C3F34111 		ubfx	r1, r3, #5, #2
 554:User/SDcard/SD_Card_Drive.c ****             Csd->WrSpeedFact       = (CSD_Tab[12] & 0x1C) >> 2;
 1026              		.loc 1 554 36 view .LVU324
 1027 0174 AA7C     		ldrb	r2, [r5, #18]	@ zero_extendqisi2
 1028 0176 61F30102 		bfi	r2, r1, #0, #2
 555:User/SDcard/SD_Card_Drive.c ****             Csd->MaxWrBlockLen     = ((CSD_Tab[12] & 0x03) << 2)
 1029              		.loc 1 555 13 is_stmt 1 view .LVU325
 555:User/SDcard/SD_Card_Drive.c ****             Csd->MaxWrBlockLen     = ((CSD_Tab[12] & 0x03) << 2)
 1030              		.loc 1 555 59 is_stmt 0 view .LVU326
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 40


 1031 017a C3F38201 		ubfx	r1, r3, #2, #3
 555:User/SDcard/SD_Card_Drive.c ****             Csd->MaxWrBlockLen     = ((CSD_Tab[12] & 0x03) << 2)
 1032              		.loc 1 555 36 view .LVU327
 1033 017e 61F38402 		bfi	r2, r1, #2, #3
 1034 0182 AA74     		strb	r2, [r5, #18]
 556:User/SDcard/SD_Card_Drive.c ****                                      |((CSD_Tab[13] & 0xC0) >> 6);
 1035              		.loc 1 556 13 is_stmt 1 view .LVU328
 556:User/SDcard/SD_Card_Drive.c ****                                      |((CSD_Tab[13] & 0xC0) >> 6);
 1036              		.loc 1 556 60 is_stmt 0 view .LVU329
 1037 0184 9B00     		lsls	r3, r3, #2
 1038 0186 03F00C03 		and	r3, r3, #12
 557:User/SDcard/SD_Card_Drive.c ****             Csd->WriteBlockPartial = (CSD_Tab[13] & 0x20) >> 5;
 1039              		.loc 1 557 48 view .LVU330
 1040 018a 9DF81D10 		ldrb	r1, [sp, #29]	@ zero_extendqisi2
 557:User/SDcard/SD_Card_Drive.c ****             Csd->WriteBlockPartial = (CSD_Tab[13] & 0x20) >> 5;
 1041              		.loc 1 557 38 view .LVU331
 1042 018e 43EA9113 		orr	r3, r3, r1, lsr #6
 556:User/SDcard/SD_Card_Drive.c ****                                      |((CSD_Tab[13] & 0xC0) >> 6);
 1043              		.loc 1 556 36 view .LVU332
 1044 0192 EA7C     		ldrb	r2, [r5, #19]	@ zero_extendqisi2
 1045 0194 63F30302 		bfi	r2, r3, #0, #4
 558:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved3         = (CSD_Tab[13] & 0x1F);
 1046              		.loc 1 558 13 is_stmt 1 view .LVU333
 558:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved3         = (CSD_Tab[13] & 0x1F);
 1047              		.loc 1 558 59 is_stmt 0 view .LVU334
 1048 0198 C1F34010 		ubfx	r0, r1, #5, #1
 558:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved3         = (CSD_Tab[13] & 0x1F);
 1049              		.loc 1 558 36 view .LVU335
 1050 019c 1346     		mov	r3, r2
 1051 019e 60F30413 		bfi	r3, r0, #4, #1
 1052 01a2 EB74     		strb	r3, [r5, #19]
 559:User/SDcard/SD_Card_Drive.c ****             Csd->FileFormatGrouop  = (CSD_Tab[14] & 0x80) >> 7;
 1053              		.loc 1 559 13 is_stmt 1 view .LVU336
 559:User/SDcard/SD_Card_Drive.c ****             Csd->FileFormatGrouop  = (CSD_Tab[14] & 0x80) >> 7;
 1054              		.loc 1 559 36 is_stmt 0 view .LVU337
 1055 01a4 2B7D     		ldrb	r3, [r5, #20]	@ zero_extendqisi2
 1056 01a6 61F30403 		bfi	r3, r1, #0, #5
 560:User/SDcard/SD_Card_Drive.c ****             Csd->CopyFlag          = (CSD_Tab[14] & 0x40) >> 6;
 1057              		.loc 1 560 13 is_stmt 1 view .LVU338
 560:User/SDcard/SD_Card_Drive.c ****             Csd->CopyFlag          = (CSD_Tab[14] & 0x40) >> 6;
 1058              		.loc 1 560 46 is_stmt 0 view .LVU339
 1059 01aa 9DF81E20 		ldrb	r2, [sp, #30]	@ zero_extendqisi2
 560:User/SDcard/SD_Card_Drive.c ****             Csd->CopyFlag          = (CSD_Tab[14] & 0x40) >> 6;
 1060              		.loc 1 560 59 view .LVU340
 1061 01ae D109     		lsrs	r1, r2, #7
 560:User/SDcard/SD_Card_Drive.c ****             Csd->CopyFlag          = (CSD_Tab[14] & 0x40) >> 6;
 1062              		.loc 1 560 36 view .LVU341
 1063 01b0 61F34513 		bfi	r3, r1, #5, #1
 561:User/SDcard/SD_Card_Drive.c ****             Csd->PermWrProtect     = (CSD_Tab[14] & 0x20) >> 5;
 1064              		.loc 1 561 13 is_stmt 1 view .LVU342
 561:User/SDcard/SD_Card_Drive.c ****             Csd->PermWrProtect     = (CSD_Tab[14] & 0x20) >> 5;
 1065              		.loc 1 561 59 is_stmt 0 view .LVU343
 1066 01b4 C2F38011 		ubfx	r1, r2, #6, #1
 561:User/SDcard/SD_Card_Drive.c ****             Csd->PermWrProtect     = (CSD_Tab[14] & 0x20) >> 5;
 1067              		.loc 1 561 36 view .LVU344
 1068 01b8 61F38613 		bfi	r3, r1, #6, #1
 562:User/SDcard/SD_Card_Drive.c ****             Csd->TempWrProtect     = (CSD_Tab[14] & 0x10) >> 4;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 41


 1069              		.loc 1 562 13 is_stmt 1 view .LVU345
 562:User/SDcard/SD_Card_Drive.c ****             Csd->TempWrProtect     = (CSD_Tab[14] & 0x10) >> 4;
 1070              		.loc 1 562 59 is_stmt 0 view .LVU346
 1071 01bc C2F34011 		ubfx	r1, r2, #5, #1
 562:User/SDcard/SD_Card_Drive.c ****             Csd->TempWrProtect     = (CSD_Tab[14] & 0x10) >> 4;
 1072              		.loc 1 562 36 view .LVU347
 1073 01c0 61F3C713 		bfi	r3, r1, #7, #1
 1074 01c4 2B75     		strb	r3, [r5, #20]
 563:User/SDcard/SD_Card_Drive.c ****             Csd->FileFormat        = (CSD_Tab[14] & 0x0C) >> 2;
 1075              		.loc 1 563 13 is_stmt 1 view .LVU348
 563:User/SDcard/SD_Card_Drive.c ****             Csd->FileFormat        = (CSD_Tab[14] & 0x0C) >> 2;
 1076              		.loc 1 563 59 is_stmt 0 view .LVU349
 1077 01c6 C2F30011 		ubfx	r1, r2, #4, #1
 563:User/SDcard/SD_Card_Drive.c ****             Csd->FileFormat        = (CSD_Tab[14] & 0x0C) >> 2;
 1078              		.loc 1 563 36 view .LVU350
 1079 01ca 6B7D     		ldrb	r3, [r5, #21]	@ zero_extendqisi2
 1080 01cc 61F30003 		bfi	r3, r1, #0, #1
 564:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved4         = (CSD_Tab[14] & 0x03);
 1081              		.loc 1 564 13 is_stmt 1 view .LVU351
 564:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved4         = (CSD_Tab[14] & 0x03);
 1082              		.loc 1 564 59 is_stmt 0 view .LVU352
 1083 01d0 C2F38101 		ubfx	r1, r2, #2, #2
 564:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved4         = (CSD_Tab[14] & 0x03);
 1084              		.loc 1 564 36 view .LVU353
 1085 01d4 61F34203 		bfi	r3, r1, #1, #2
 565:User/SDcard/SD_Card_Drive.c ****             Csd->crc               = (CSD_Tab[15] & 0xFE) >> 1;
 1086              		.loc 1 565 13 is_stmt 1 view .LVU354
 565:User/SDcard/SD_Card_Drive.c ****             Csd->crc               = (CSD_Tab[15] & 0xFE) >> 1;
 1087              		.loc 1 565 36 is_stmt 0 view .LVU355
 1088 01d8 62F3C403 		bfi	r3, r2, #3, #2
 1089 01dc 6B75     		strb	r3, [r5, #21]
 566:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved5         = (CSD_Tab[15] & 0x01);
 1090              		.loc 1 566 13 is_stmt 1 view .LVU356
 566:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved5         = (CSD_Tab[15] & 0x01);
 1091              		.loc 1 566 46 is_stmt 0 view .LVU357
 1092 01de 9DF81F20 		ldrb	r2, [sp, #31]	@ zero_extendqisi2
 566:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved5         = (CSD_Tab[15] & 0x01);
 1093              		.loc 1 566 59 view .LVU358
 1094 01e2 5108     		lsrs	r1, r2, #1
 566:User/SDcard/SD_Card_Drive.c ****             Csd->Reserved5         = (CSD_Tab[15] & 0x01);
 1095              		.loc 1 566 36 view .LVU359
 1096 01e4 AB7D     		ldrb	r3, [r5, #22]	@ zero_extendqisi2
 1097 01e6 61F30603 		bfi	r3, r1, #0, #7
 567:User/SDcard/SD_Card_Drive.c **** 
 1098              		.loc 1 567 13 is_stmt 1 view .LVU360
 567:User/SDcard/SD_Card_Drive.c **** 
 1099              		.loc 1 567 36 is_stmt 0 view .LVU361
 1100 01ea 62F3C713 		bfi	r3, r2, #7, #1
 1101 01ee AB75     		strb	r3, [r5, #22]
 569:User/SDcard/SD_Card_Drive.c ****         }
 1102              		.loc 1 569 13 is_stmt 1 view .LVU362
 1103              	.LVL87:
 569:User/SDcard/SD_Card_Drive.c ****         }
 1104              		.loc 1 569 13 is_stmt 0 view .LVU363
 1105 01f0 14E7     		b	.L43
 1106              	.LVL88:
 1107              	.L46:
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 42


 544:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.DeviceSize= ((CSD_Tab[7] & 0x3F) << 16) | (CSD_Tab[8] << 8) | CSD_T
 1108              		.loc 1 544 17 is_stmt 1 view .LVU364
 544:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.DeviceSize= ((CSD_Tab[7] & 0x3F) << 16) | (CSD_Tab[8] << 8) | CSD_T
 1109              		.loc 1 544 66 is_stmt 0 view .LVU365
 1110 01f2 9B00     		lsls	r3, r3, #2
 1111 01f4 03F03C03 		and	r3, r3, #60
 544:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.DeviceSize= ((CSD_Tab[7] & 0x3F) << 16) | (CSD_Tab[8] << 8) | CSD_T
 1112              		.loc 1 544 83 view .LVU366
 1113 01f8 9DF81720 		ldrb	r2, [sp, #23]	@ zero_extendqisi2
 544:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.DeviceSize= ((CSD_Tab[7] & 0x3F) << 16) | (CSD_Tab[8] << 8) | CSD_T
 1114              		.loc 1 544 72 view .LVU367
 1115 01fc 43EA9213 		orr	r3, r3, r2, lsr #6
 544:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.DeviceSize= ((CSD_Tab[7] & 0x3F) << 16) | (CSD_Tab[8] << 8) | CSD_T
 1116              		.loc 1 544 43 view .LVU368
 1117 0200 297A     		ldrb	r1, [r5, #8]	@ zero_extendqisi2
 1118 0202 63F30501 		bfi	r1, r3, #0, #6
 1119 0206 2972     		strb	r1, [r5, #8]
 545:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.Reserved2 = ((CSD_Tab[10] & 0x80) >> 8);
 1120              		.loc 1 545 17 is_stmt 1 view .LVU369
 545:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.Reserved2 = ((CSD_Tab[10] & 0x80) >> 8);
 1121              		.loc 1 545 66 is_stmt 0 view .LVU370
 1122 0208 1304     		lsls	r3, r2, #16
 1123 020a 03F47C13 		and	r3, r3, #4128768
 545:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.Reserved2 = ((CSD_Tab[10] & 0x80) >> 8);
 1124              		.loc 1 545 83 view .LVU371
 1125 020e 9DF81820 		ldrb	r2, [sp, #24]	@ zero_extendqisi2
 545:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.Reserved2 = ((CSD_Tab[10] & 0x80) >> 8);
 1126              		.loc 1 545 73 view .LVU372
 1127 0212 43EA0223 		orr	r3, r3, r2, lsl #8
 545:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.Reserved2 = ((CSD_Tab[10] & 0x80) >> 8);
 1128              		.loc 1 545 102 view .LVU373
 1129 0216 9DF81920 		ldrb	r2, [sp, #25]	@ zero_extendqisi2
 545:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.Reserved2 = ((CSD_Tab[10] & 0x80) >> 8);
 1130              		.loc 1 545 93 view .LVU374
 1131 021a 1343     		orrs	r3, r3, r2
 545:User/SDcard/SD_Card_Drive.c ****                 Csd->version.v2.Reserved2 = ((CSD_Tab[10] & 0x80) >> 8);
 1132              		.loc 1 545 43 view .LVU375
 1133 021c AA68     		ldr	r2, [r5, #8]
 1134 021e 63F39B12 		bfi	r2, r3, #6, #22
 1135 0222 AA60     		str	r2, [r5, #8]
 546:User/SDcard/SD_Card_Drive.c ****             }
 1136              		.loc 1 546 17 is_stmt 1 view .LVU376
 546:User/SDcard/SD_Card_Drive.c ****             }
 1137              		.loc 1 546 43 is_stmt 0 view .LVU377
 1138 0224 C2F30762 		ubfx	r2, r2, #24, #8
 1139 0228 6FF30412 		bfc	r2, #4, #1
 1140 022c EA72     		strb	r2, [r5, #11]
 1141 022e 85E7     		b	.L47
 1142              	.L54:
 1143              		.align	2
 1144              	.L53:
 1145 0230 00000000 		.word	.LANCHOR1
 1146              		.cfi_endproc
 1147              	.LFE139:
 1149              		.section	.text.SD_GetCIDRegister,"ax",%progbits
 1150              		.align	1
 1151              		.syntax unified
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 43


 1152              		.thumb
 1153              		.thumb_func
 1154              		.fpu fpv4-sp-d16
 1156              	SD_GetCIDRegister:
 1157              	.LVL89:
 1158              	.LFB140:
 589:User/SDcard/SD_Card_Drive.c ****     uint32_t counter = 0;
 1159              		.loc 1 589 1 is_stmt 1 view -0
 1160              		.cfi_startproc
 1161              		@ args = 0, pretend = 0, frame = 24
 1162              		@ frame_needed = 0, uses_anonymous_args = 0
 589:User/SDcard/SD_Card_Drive.c ****     uint32_t counter = 0;
 1163              		.loc 1 589 1 is_stmt 0 view .LVU379
 1164 0000 70B5     		push	{r4, r5, r6, lr}
 1165              	.LCFI15:
 1166              		.cfi_def_cfa_offset 16
 1167              		.cfi_offset 4, -16
 1168              		.cfi_offset 5, -12
 1169              		.cfi_offset 6, -8
 1170              		.cfi_offset 14, -4
 1171 0002 88B0     		sub	sp, sp, #32
 1172              	.LCFI16:
 1173              		.cfi_def_cfa_offset 48
 1174 0004 0546     		mov	r5, r0
 590:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 1175              		.loc 1 590 5 is_stmt 1 view .LVU380
 1176              	.LVL90:
 591:User/SDcard/SD_Card_Drive.c ****     uint8_t CID_Tab[16];
 1177              		.loc 1 591 5 view .LVU381
 592:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 1178              		.loc 1 592 5 view .LVU382
 593:User/SDcard/SD_Card_Drive.c **** 
 1179              		.loc 1 593 5 view .LVU383
 596:User/SDcard/SD_Card_Drive.c ****     if(response.r1 == SD_R1_NO_ERROR) {
 1180              		.loc 1 596 5 view .LVU384
 596:User/SDcard/SD_Card_Drive.c ****     if(response.r1 == SD_R1_NO_ERROR) {
 1181              		.loc 1 596 16 is_stmt 0 view .LVU385
 1182 0006 0022     		movs	r2, #0
 1183 0008 0092     		str	r2, [sp]
 1184 000a FF23     		movs	r3, #255
 1185 000c 0A21     		movs	r1, #10
 1186 000e 02A8     		add	r0, sp, #8
 1187              	.LVL91:
 596:User/SDcard/SD_Card_Drive.c ****     if(response.r1 == SD_R1_NO_ERROR) {
 1188              		.loc 1 596 16 view .LVU386
 1189 0010 FFF7FEFF 		bl	SD_SendCmd
 1190              	.LVL92:
 597:User/SDcard/SD_Card_Drive.c ****         if(SD_WaitData(SD_TOKEN_START_DATA_SINGLE_BLOCK_READ) == BSP_SD_OK) {
 1191              		.loc 1 597 5 is_stmt 1 view .LVU387
 597:User/SDcard/SD_Card_Drive.c ****         if(SD_WaitData(SD_TOKEN_START_DATA_SINGLE_BLOCK_READ) == BSP_SD_OK) {
 1192              		.loc 1 597 16 is_stmt 0 view .LVU388
 1193 0014 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 597:User/SDcard/SD_Card_Drive.c ****         if(SD_WaitData(SD_TOKEN_START_DATA_SINGLE_BLOCK_READ) == BSP_SD_OK) {
 1194              		.loc 1 597 7 view .LVU389
 1195 0018 4BB1     		cbz	r3, .L62
 591:User/SDcard/SD_Card_Drive.c ****     uint8_t CID_Tab[16];
 1196              		.loc 1 591 13 view .LVU390
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 44


 1197 001a 0126     		movs	r6, #1
 1198              	.LVL93:
 1199              	.L56:
 663:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 1200              		.loc 1 663 5 is_stmt 1 view .LVU391
 1201 001c 0120     		movs	r0, #1
 1202 001e FFF7FEFF 		bl	SD_IO_CSState
 1203              	.LVL94:
 664:User/SDcard/SD_Card_Drive.c **** 
 1204              		.loc 1 664 5 view .LVU392
 1205 0022 FF20     		movs	r0, #255
 1206 0024 FFF7FEFF 		bl	SD_IO_WriteByte
 1207              	.LVL95:
 667:User/SDcard/SD_Card_Drive.c **** }
 1208              		.loc 1 667 5 view .LVU393
 668:User/SDcard/SD_Card_Drive.c **** 
 1209              		.loc 1 668 1 is_stmt 0 view .LVU394
 1210 0028 3046     		mov	r0, r6
 1211 002a 08B0     		add	sp, sp, #32
 1212              	.LCFI17:
 1213              		.cfi_remember_state
 1214              		.cfi_def_cfa_offset 16
 1215              		@ sp needed
 1216 002c 70BD     		pop	{r4, r5, r6, pc}
 1217              	.LVL96:
 1218              	.L62:
 1219              	.LCFI18:
 1220              		.cfi_restore_state
 598:User/SDcard/SD_Card_Drive.c ****             /* Store CID register value on CID_Tab */
 1221              		.loc 1 598 9 is_stmt 1 view .LVU395
 598:User/SDcard/SD_Card_Drive.c ****             /* Store CID register value on CID_Tab */
 1222              		.loc 1 598 12 is_stmt 0 view .LVU396
 1223 002e FE20     		movs	r0, #254
 1224 0030 FFF7FEFF 		bl	SD_WaitData
 1225              	.LVL97:
 598:User/SDcard/SD_Card_Drive.c ****             /* Store CID register value on CID_Tab */
 1226              		.loc 1 598 11 view .LVU397
 1227 0034 0646     		mov	r6, r0
 1228 0036 08B1     		cbz	r0, .L60
 591:User/SDcard/SD_Card_Drive.c ****     uint8_t CID_Tab[16];
 1229              		.loc 1 591 13 view .LVU398
 1230 0038 0126     		movs	r6, #1
 1231 003a EFE7     		b	.L56
 1232              	.L60:
 600:User/SDcard/SD_Card_Drive.c ****                 CID_Tab[counter] = SD_IO_WriteByte(SD_DUMMY_BYTE);
 1233              		.loc 1 600 26 view .LVU399
 1234 003c 0024     		movs	r4, #0
 1235              	.LVL98:
 1236              	.L57:
 600:User/SDcard/SD_Card_Drive.c ****                 CID_Tab[counter] = SD_IO_WriteByte(SD_DUMMY_BYTE);
 1237              		.loc 1 600 31 is_stmt 1 discriminator 1 view .LVU400
 600:User/SDcard/SD_Card_Drive.c ****                 CID_Tab[counter] = SD_IO_WriteByte(SD_DUMMY_BYTE);
 1238              		.loc 1 600 13 is_stmt 0 discriminator 1 view .LVU401
 1239 003e 0F2C     		cmp	r4, #15
 1240 0040 08D8     		bhi	.L63
 601:User/SDcard/SD_Card_Drive.c ****             }
 1241              		.loc 1 601 17 is_stmt 1 discriminator 3 view .LVU402
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 45


 601:User/SDcard/SD_Card_Drive.c ****             }
 1242              		.loc 1 601 36 is_stmt 0 discriminator 3 view .LVU403
 1243 0042 FF20     		movs	r0, #255
 1244 0044 FFF7FEFF 		bl	SD_IO_WriteByte
 1245              	.LVL99:
 601:User/SDcard/SD_Card_Drive.c ****             }
 1246              		.loc 1 601 34 discriminator 3 view .LVU404
 1247 0048 08AB     		add	r3, sp, #32
 1248 004a 2344     		add	r3, r3, r4
 1249 004c 03F8100C 		strb	r0, [r3, #-16]
 600:User/SDcard/SD_Card_Drive.c ****                 CID_Tab[counter] = SD_IO_WriteByte(SD_DUMMY_BYTE);
 1250              		.loc 1 600 45 is_stmt 1 discriminator 3 view .LVU405
 600:User/SDcard/SD_Card_Drive.c ****                 CID_Tab[counter] = SD_IO_WriteByte(SD_DUMMY_BYTE);
 1251              		.loc 1 600 52 is_stmt 0 discriminator 3 view .LVU406
 1252 0050 0134     		adds	r4, r4, #1
 1253              	.LVL100:
 600:User/SDcard/SD_Card_Drive.c ****                 CID_Tab[counter] = SD_IO_WriteByte(SD_DUMMY_BYTE);
 1254              		.loc 1 600 52 discriminator 3 view .LVU407
 1255 0052 F4E7     		b	.L57
 1256              	.L63:
 605:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 1257              		.loc 1 605 13 is_stmt 1 view .LVU408
 1258 0054 FF20     		movs	r0, #255
 1259 0056 FFF7FEFF 		bl	SD_IO_WriteByte
 1260              	.LVL101:
 606:User/SDcard/SD_Card_Drive.c **** 
 1261              		.loc 1 606 13 view .LVU409
 1262 005a FF20     		movs	r0, #255
 1263 005c FFF7FEFF 		bl	SD_IO_WriteByte
 1264              	.LVL102:
 609:User/SDcard/SD_Card_Drive.c **** 
 1265              		.loc 1 609 13 view .LVU410
 609:User/SDcard/SD_Card_Drive.c **** 
 1266              		.loc 1 609 42 is_stmt 0 view .LVU411
 1267 0060 9DF81030 		ldrb	r3, [sp, #16]	@ zero_extendqisi2
 609:User/SDcard/SD_Card_Drive.c **** 
 1268              		.loc 1 609 33 view .LVU412
 1269 0064 2B70     		strb	r3, [r5]
 612:User/SDcard/SD_Card_Drive.c **** 
 1270              		.loc 1 612 13 is_stmt 1 view .LVU413
 612:User/SDcard/SD_Card_Drive.c **** 
 1271              		.loc 1 612 39 is_stmt 0 view .LVU414
 1272 0066 9DF81130 		ldrb	r3, [sp, #17]	@ zero_extendqisi2
 612:User/SDcard/SD_Card_Drive.c **** 
 1273              		.loc 1 612 43 view .LVU415
 1274 006a 1B02     		lsls	r3, r3, #8
 612:User/SDcard/SD_Card_Drive.c **** 
 1275              		.loc 1 612 30 view .LVU416
 1276 006c 6B80     		strh	r3, [r5, #2]	@ movhi
 615:User/SDcard/SD_Card_Drive.c **** 
 1277              		.loc 1 615 13 is_stmt 1 view .LVU417
 615:User/SDcard/SD_Card_Drive.c **** 
 1278              		.loc 1 615 30 is_stmt 0 view .LVU418
 1279 006e 6B88     		ldrh	r3, [r5, #2]
 1280 0070 9BB2     		uxth	r3, r3
 615:User/SDcard/SD_Card_Drive.c **** 
 1281              		.loc 1 615 40 view .LVU419
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 46


 1282 0072 9DF81220 		ldrb	r2, [sp, #18]	@ zero_extendqisi2
 615:User/SDcard/SD_Card_Drive.c **** 
 1283              		.loc 1 615 30 view .LVU420
 1284 0076 1343     		orrs	r3, r3, r2
 1285 0078 6B80     		strh	r3, [r5, #2]	@ movhi
 618:User/SDcard/SD_Card_Drive.c **** 
 1286              		.loc 1 618 13 is_stmt 1 view .LVU421
 618:User/SDcard/SD_Card_Drive.c **** 
 1287              		.loc 1 618 37 is_stmt 0 view .LVU422
 1288 007a 9DF81330 		ldrb	r3, [sp, #19]	@ zero_extendqisi2
 618:User/SDcard/SD_Card_Drive.c **** 
 1289              		.loc 1 618 41 view .LVU423
 1290 007e 1B06     		lsls	r3, r3, #24
 618:User/SDcard/SD_Card_Drive.c **** 
 1291              		.loc 1 618 28 view .LVU424
 1292 0080 6B60     		str	r3, [r5, #4]
 621:User/SDcard/SD_Card_Drive.c **** 
 1293              		.loc 1 621 13 is_stmt 1 view .LVU425
 621:User/SDcard/SD_Card_Drive.c **** 
 1294              		.loc 1 621 28 is_stmt 0 view .LVU426
 1295 0082 6B68     		ldr	r3, [r5, #4]
 621:User/SDcard/SD_Card_Drive.c **** 
 1296              		.loc 1 621 38 view .LVU427
 1297 0084 9DF81420 		ldrb	r2, [sp, #20]	@ zero_extendqisi2
 621:User/SDcard/SD_Card_Drive.c **** 
 1298              		.loc 1 621 28 view .LVU428
 1299 0088 43EA0243 		orr	r3, r3, r2, lsl #16
 1300 008c 6B60     		str	r3, [r5, #4]
 624:User/SDcard/SD_Card_Drive.c **** 
 1301              		.loc 1 624 13 is_stmt 1 view .LVU429
 624:User/SDcard/SD_Card_Drive.c **** 
 1302              		.loc 1 624 28 is_stmt 0 view .LVU430
 1303 008e 6B68     		ldr	r3, [r5, #4]
 624:User/SDcard/SD_Card_Drive.c **** 
 1304              		.loc 1 624 38 view .LVU431
 1305 0090 9DF81520 		ldrb	r2, [sp, #21]	@ zero_extendqisi2
 624:User/SDcard/SD_Card_Drive.c **** 
 1306              		.loc 1 624 28 view .LVU432
 1307 0094 43EA0223 		orr	r3, r3, r2, lsl #8
 1308 0098 6B60     		str	r3, [r5, #4]
 627:User/SDcard/SD_Card_Drive.c **** 
 1309              		.loc 1 627 13 is_stmt 1 view .LVU433
 627:User/SDcard/SD_Card_Drive.c **** 
 1310              		.loc 1 627 28 is_stmt 0 view .LVU434
 1311 009a 6B68     		ldr	r3, [r5, #4]
 627:User/SDcard/SD_Card_Drive.c **** 
 1312              		.loc 1 627 38 view .LVU435
 1313 009c 9DF81620 		ldrb	r2, [sp, #22]	@ zero_extendqisi2
 627:User/SDcard/SD_Card_Drive.c **** 
 1314              		.loc 1 627 28 view .LVU436
 1315 00a0 1343     		orrs	r3, r3, r2
 1316 00a2 6B60     		str	r3, [r5, #4]
 630:User/SDcard/SD_Card_Drive.c **** 
 1317              		.loc 1 630 13 is_stmt 1 view .LVU437
 630:User/SDcard/SD_Card_Drive.c **** 
 1318              		.loc 1 630 37 is_stmt 0 view .LVU438
 1319 00a4 9DF81730 		ldrb	r3, [sp, #23]	@ zero_extendqisi2
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 47


 630:User/SDcard/SD_Card_Drive.c **** 
 1320              		.loc 1 630 28 view .LVU439
 1321 00a8 2B72     		strb	r3, [r5, #8]
 633:User/SDcard/SD_Card_Drive.c **** 
 1322              		.loc 1 633 13 is_stmt 1 view .LVU440
 633:User/SDcard/SD_Card_Drive.c **** 
 1323              		.loc 1 633 35 is_stmt 0 view .LVU441
 1324 00aa 9DF81830 		ldrb	r3, [sp, #24]	@ zero_extendqisi2
 633:User/SDcard/SD_Card_Drive.c **** 
 1325              		.loc 1 633 26 view .LVU442
 1326 00ae 6B72     		strb	r3, [r5, #9]
 636:User/SDcard/SD_Card_Drive.c **** 
 1327              		.loc 1 636 13 is_stmt 1 view .LVU443
 636:User/SDcard/SD_Card_Drive.c **** 
 1328              		.loc 1 636 34 is_stmt 0 view .LVU444
 1329 00b0 9DF81930 		ldrb	r3, [sp, #25]	@ zero_extendqisi2
 636:User/SDcard/SD_Card_Drive.c **** 
 1330              		.loc 1 636 38 view .LVU445
 1331 00b4 1B06     		lsls	r3, r3, #24
 636:User/SDcard/SD_Card_Drive.c **** 
 1332              		.loc 1 636 25 view .LVU446
 1333 00b6 EB60     		str	r3, [r5, #12]
 639:User/SDcard/SD_Card_Drive.c **** 
 1334              		.loc 1 639 13 is_stmt 1 view .LVU447
 639:User/SDcard/SD_Card_Drive.c **** 
 1335              		.loc 1 639 25 is_stmt 0 view .LVU448
 1336 00b8 EB68     		ldr	r3, [r5, #12]
 639:User/SDcard/SD_Card_Drive.c **** 
 1337              		.loc 1 639 35 view .LVU449
 1338 00ba 9DF81A20 		ldrb	r2, [sp, #26]	@ zero_extendqisi2
 639:User/SDcard/SD_Card_Drive.c **** 
 1339              		.loc 1 639 25 view .LVU450
 1340 00be 43EA0243 		orr	r3, r3, r2, lsl #16
 1341 00c2 EB60     		str	r3, [r5, #12]
 642:User/SDcard/SD_Card_Drive.c **** 
 1342              		.loc 1 642 13 is_stmt 1 view .LVU451
 642:User/SDcard/SD_Card_Drive.c **** 
 1343              		.loc 1 642 25 is_stmt 0 view .LVU452
 1344 00c4 EB68     		ldr	r3, [r5, #12]
 642:User/SDcard/SD_Card_Drive.c **** 
 1345              		.loc 1 642 35 view .LVU453
 1346 00c6 9DF81B20 		ldrb	r2, [sp, #27]	@ zero_extendqisi2
 642:User/SDcard/SD_Card_Drive.c **** 
 1347              		.loc 1 642 25 view .LVU454
 1348 00ca 43EA0223 		orr	r3, r3, r2, lsl #8
 1349 00ce EB60     		str	r3, [r5, #12]
 645:User/SDcard/SD_Card_Drive.c **** 
 1350              		.loc 1 645 13 is_stmt 1 view .LVU455
 645:User/SDcard/SD_Card_Drive.c **** 
 1351              		.loc 1 645 25 is_stmt 0 view .LVU456
 1352 00d0 EB68     		ldr	r3, [r5, #12]
 645:User/SDcard/SD_Card_Drive.c **** 
 1353              		.loc 1 645 35 view .LVU457
 1354 00d2 9DF81C20 		ldrb	r2, [sp, #28]	@ zero_extendqisi2
 645:User/SDcard/SD_Card_Drive.c **** 
 1355              		.loc 1 645 25 view .LVU458
 1356 00d6 1343     		orrs	r3, r3, r2
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 48


 1357 00d8 EB60     		str	r3, [r5, #12]
 648:User/SDcard/SD_Card_Drive.c ****             Cid->ManufactDate = (CID_Tab[13] & 0x0F) << 8;
 1358              		.loc 1 648 13 is_stmt 1 view .LVU459
 648:User/SDcard/SD_Card_Drive.c ****             Cid->ManufactDate = (CID_Tab[13] & 0x0F) << 8;
 1359              		.loc 1 648 28 is_stmt 0 view .LVU460
 1360 00da 2A7C     		ldrb	r2, [r5, #16]	@ zero_extendqisi2
 648:User/SDcard/SD_Card_Drive.c ****             Cid->ManufactDate = (CID_Tab[13] & 0x0F) << 8;
 1361              		.loc 1 648 39 view .LVU461
 1362 00dc 9DF81D30 		ldrb	r3, [sp, #29]	@ zero_extendqisi2
 648:User/SDcard/SD_Card_Drive.c ****             Cid->ManufactDate = (CID_Tab[13] & 0x0F) << 8;
 1363              		.loc 1 648 28 view .LVU462
 1364 00e0 42EA1312 		orr	r2, r2, r3, lsr #4
 1365 00e4 2A74     		strb	r2, [r5, #16]
 649:User/SDcard/SD_Card_Drive.c **** 
 1366              		.loc 1 649 13 is_stmt 1 view .LVU463
 649:User/SDcard/SD_Card_Drive.c **** 
 1367              		.loc 1 649 54 is_stmt 0 view .LVU464
 1368 00e6 1B02     		lsls	r3, r3, #8
 1369 00e8 03F47063 		and	r3, r3, #3840
 649:User/SDcard/SD_Card_Drive.c **** 
 1370              		.loc 1 649 31 view .LVU465
 1371 00ec 6B82     		strh	r3, [r5, #18]	@ movhi
 652:User/SDcard/SD_Card_Drive.c **** 
 1372              		.loc 1 652 13 is_stmt 1 view .LVU466
 652:User/SDcard/SD_Card_Drive.c **** 
 1373              		.loc 1 652 31 is_stmt 0 view .LVU467
 1374 00ee 6B8A     		ldrh	r3, [r5, #18]
 1375 00f0 9BB2     		uxth	r3, r3
 652:User/SDcard/SD_Card_Drive.c **** 
 1376              		.loc 1 652 41 view .LVU468
 1377 00f2 9DF81E20 		ldrb	r2, [sp, #30]	@ zero_extendqisi2
 652:User/SDcard/SD_Card_Drive.c **** 
 1378              		.loc 1 652 31 view .LVU469
 1379 00f6 1343     		orrs	r3, r3, r2
 1380 00f8 6B82     		strh	r3, [r5, #18]	@ movhi
 655:User/SDcard/SD_Card_Drive.c ****             Cid->Reserved2 = 1;
 1381              		.loc 1 655 13 is_stmt 1 view .LVU470
 655:User/SDcard/SD_Card_Drive.c ****             Cid->Reserved2 = 1;
 1382              		.loc 1 655 36 is_stmt 0 view .LVU471
 1383 00fa 9DF81F30 		ldrb	r3, [sp, #31]	@ zero_extendqisi2
 655:User/SDcard/SD_Card_Drive.c ****             Cid->Reserved2 = 1;
 1384              		.loc 1 655 49 view .LVU472
 1385 00fe 5B08     		lsrs	r3, r3, #1
 655:User/SDcard/SD_Card_Drive.c ****             Cid->Reserved2 = 1;
 1386              		.loc 1 655 26 view .LVU473
 1387 0100 2B75     		strb	r3, [r5, #20]
 656:User/SDcard/SD_Card_Drive.c **** 
 1388              		.loc 1 656 13 is_stmt 1 view .LVU474
 656:User/SDcard/SD_Card_Drive.c **** 
 1389              		.loc 1 656 28 is_stmt 0 view .LVU475
 1390 0102 0123     		movs	r3, #1
 1391 0104 6B75     		strb	r3, [r5, #21]
 658:User/SDcard/SD_Card_Drive.c ****         }
 1392              		.loc 1 658 13 is_stmt 1 view .LVU476
 1393              	.LVL103:
 658:User/SDcard/SD_Card_Drive.c ****         }
 1394              		.loc 1 658 13 is_stmt 0 view .LVU477
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 49


 1395 0106 89E7     		b	.L56
 1396              		.cfi_endproc
 1397              	.LFE140:
 1399              		.section	.text.BSP_SD_Init,"ax",%progbits
 1400              		.align	1
 1401              		.global	BSP_SD_Init
 1402              		.syntax unified
 1403              		.thumb
 1404              		.thumb_func
 1405              		.fpu fpv4-sp-d16
 1407              	BSP_SD_Init:
 1408              	.LFB133:
 213:User/SDcard/SD_Card_Drive.c ****     uint8_t counter = 0;
 1409              		.loc 1 213 1 is_stmt 1 view -0
 1410              		.cfi_startproc
 1411              		@ args = 0, pretend = 0, frame = 0
 1412              		@ frame_needed = 0, uses_anonymous_args = 0
 1413 0000 10B5     		push	{r4, lr}
 1414              	.LCFI19:
 1415              		.cfi_def_cfa_offset 8
 1416              		.cfi_offset 4, -8
 1417              		.cfi_offset 14, -4
 214:User/SDcard/SD_Card_Drive.c **** 
 1418              		.loc 1 214 5 view .LVU479
 1419              	.LVL104:
 218:User/SDcard/SD_Card_Drive.c **** 
 1420              		.loc 1 218 5 view .LVU480
 1421 0002 0120     		movs	r0, #1
 1422 0004 FFF7FEFF 		bl	SD_IO_CSState
 1423              	.LVL105:
 222:User/SDcard/SD_Card_Drive.c ****         /* Send dummy byte 0xFF */
 1424              		.loc 1 222 5 view .LVU481
 222:User/SDcard/SD_Card_Drive.c ****         /* Send dummy byte 0xFF */
 1425              		.loc 1 222 18 is_stmt 0 view .LVU482
 1426 0008 0024     		movs	r4, #0
 1427              	.LVL106:
 1428              	.L65:
 222:User/SDcard/SD_Card_Drive.c ****         /* Send dummy byte 0xFF */
 1429              		.loc 1 222 23 is_stmt 1 discriminator 1 view .LVU483
 222:User/SDcard/SD_Card_Drive.c ****         /* Send dummy byte 0xFF */
 1430              		.loc 1 222 5 is_stmt 0 discriminator 1 view .LVU484
 1431 000a 092C     		cmp	r4, #9
 1432 000c 05D8     		bhi	.L68
 224:User/SDcard/SD_Card_Drive.c ****     }
 1433              		.loc 1 224 9 is_stmt 1 discriminator 3 view .LVU485
 1434 000e FF20     		movs	r0, #255
 1435 0010 FFF7FEFF 		bl	SD_IO_WriteByte
 1436              	.LVL107:
 222:User/SDcard/SD_Card_Drive.c ****         /* Send dummy byte 0xFF */
 1437              		.loc 1 222 37 discriminator 3 view .LVU486
 222:User/SDcard/SD_Card_Drive.c ****         /* Send dummy byte 0xFF */
 1438              		.loc 1 222 44 is_stmt 0 discriminator 3 view .LVU487
 1439 0014 0134     		adds	r4, r4, #1
 1440              	.LVL108:
 222:User/SDcard/SD_Card_Drive.c ****         /* Send dummy byte 0xFF */
 1441              		.loc 1 222 44 discriminator 3 view .LVU488
 1442 0016 E4B2     		uxtb	r4, r4
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 50


 1443              	.LVL109:
 222:User/SDcard/SD_Card_Drive.c ****         /* Send dummy byte 0xFF */
 1444              		.loc 1 222 44 discriminator 3 view .LVU489
 1445 0018 F7E7     		b	.L65
 1446              	.L68:
 228:User/SDcard/SD_Card_Drive.c **** 
 1447              		.loc 1 228 5 is_stmt 1 view .LVU490
 228:User/SDcard/SD_Card_Drive.c **** 
 1448              		.loc 1 228 14 is_stmt 0 view .LVU491
 1449 001a 034B     		ldr	r3, .L69
 1450 001c 0122     		movs	r2, #1
 1451 001e 1A70     		strb	r2, [r3]
 231:User/SDcard/SD_Card_Drive.c **** }
 1452              		.loc 1 231 5 is_stmt 1 view .LVU492
 231:User/SDcard/SD_Card_Drive.c **** }
 1453              		.loc 1 231 12 is_stmt 0 view .LVU493
 1454 0020 FFF7FEFF 		bl	SD_GoIdleState
 1455              	.LVL110:
 232:User/SDcard/SD_Card_Drive.c **** 
 1456              		.loc 1 232 1 view .LVU494
 1457 0024 10BD     		pop	{r4, pc}
 1458              	.LVL111:
 1459              	.L70:
 232:User/SDcard/SD_Card_Drive.c **** 
 1460              		.loc 1 232 1 view .LVU495
 1461 0026 00BF     		.align	2
 1462              	.L69:
 1463 0028 00000000 		.word	.LANCHOR2
 1464              		.cfi_endproc
 1465              	.LFE133:
 1467              		.section	.text.BSP_SD_GetCardInfo,"ax",%progbits
 1468              		.align	1
 1469              		.global	BSP_SD_GetCardInfo
 1470              		.syntax unified
 1471              		.thumb
 1472              		.thumb_func
 1473              		.fpu fpv4-sp-d16
 1475              	BSP_SD_GetCardInfo:
 1476              	.LVL112:
 1477              	.LFB134:
 243:User/SDcard/SD_Card_Drive.c ****     uint8_t status;
 1478              		.loc 1 243 1 is_stmt 1 view -0
 1479              		.cfi_startproc
 1480              		@ args = 0, pretend = 0, frame = 0
 1481              		@ frame_needed = 0, uses_anonymous_args = 0
 243:User/SDcard/SD_Card_Drive.c ****     uint8_t status;
 1482              		.loc 1 243 1 is_stmt 0 view .LVU497
 1483 0000 38B5     		push	{r3, r4, r5, lr}
 1484              	.LCFI20:
 1485              		.cfi_def_cfa_offset 16
 1486              		.cfi_offset 3, -16
 1487              		.cfi_offset 4, -12
 1488              		.cfi_offset 5, -8
 1489              		.cfi_offset 14, -4
 1490 0002 0446     		mov	r4, r0
 244:User/SDcard/SD_Card_Drive.c **** 
 1491              		.loc 1 244 5 is_stmt 1 view .LVU498
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 51


 246:User/SDcard/SD_Card_Drive.c ****     status|= SD_GetCIDRegister(&(pCardInfo->Cid));
 1492              		.loc 1 246 5 view .LVU499
 246:User/SDcard/SD_Card_Drive.c ****     status|= SD_GetCIDRegister(&(pCardInfo->Cid));
 1493              		.loc 1 246 14 is_stmt 0 view .LVU500
 1494 0004 FFF7FEFF 		bl	SD_GetCSDRegister
 1495              	.LVL113:
 246:User/SDcard/SD_Card_Drive.c ****     status|= SD_GetCIDRegister(&(pCardInfo->Cid));
 1496              		.loc 1 246 14 view .LVU501
 1497 0008 0546     		mov	r5, r0
 1498              	.LVL114:
 247:User/SDcard/SD_Card_Drive.c ****     if(flag_SDHC == 1 ) {
 1499              		.loc 1 247 5 is_stmt 1 view .LVU502
 247:User/SDcard/SD_Card_Drive.c ****     if(flag_SDHC == 1 ) {
 1500              		.loc 1 247 14 is_stmt 0 view .LVU503
 1501 000a 04F11800 		add	r0, r4, #24
 1502 000e FFF7FEFF 		bl	SD_GetCIDRegister
 1503              	.LVL115:
 247:User/SDcard/SD_Card_Drive.c ****     if(flag_SDHC == 1 ) {
 1504              		.loc 1 247 11 view .LVU504
 1505 0012 2843     		orrs	r0, r0, r5
 1506 0014 C0B2     		uxtb	r0, r0
 1507              	.LVL116:
 248:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockSize = 512;
 1508              		.loc 1 248 5 is_stmt 1 view .LVU505
 248:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockSize = 512;
 1509              		.loc 1 248 18 is_stmt 0 view .LVU506
 1510 0016 144B     		ldr	r3, .L76
 1511 0018 1B88     		ldrh	r3, [r3]
 248:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockSize = 512;
 1512              		.loc 1 248 7 view .LVU507
 1513 001a 012B     		cmp	r3, #1
 1514 001c 17D0     		beq	.L75
 254:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity *= (1 << (pCardInfo->Csd.version.v1.DeviceSizeMul + 2));
 1515              		.loc 1 254 9 is_stmt 1 view .LVU508
 254:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity *= (1 << (pCardInfo->Csd.version.v1.DeviceSizeMul + 2));
 1516              		.loc 1 254 61 is_stmt 0 view .LVU509
 1517 001e 2389     		ldrh	r3, [r4, #8]
 1518 0020 C3F38B03 		ubfx	r3, r3, #2, #12
 254:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity *= (1 << (pCardInfo->Csd.version.v1.DeviceSizeMul + 2));
 1519              		.loc 1 254 73 view .LVU510
 1520 0024 0133     		adds	r3, r3, #1
 255:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockSize = 512;
 1521              		.loc 1 255 9 is_stmt 1 view .LVU511
 255:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockSize = 512;
 1522              		.loc 1 255 68 is_stmt 0 view .LVU512
 1523 0026 227B     		ldrb	r2, [r4, #12]	@ zero_extendqisi2
 1524 0028 02F00702 		and	r2, r2, #7
 255:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockSize = 512;
 1525              		.loc 1 255 83 view .LVU513
 1526 002c 0232     		adds	r2, r2, #2
 255:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockSize = 512;
 1527              		.loc 1 255 33 view .LVU514
 1528 002e 03FA02F2 		lsl	r2, r3, r2
 256:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardBlockSize = 1 << (pCardInfo->Csd.RdBlockLen);
 1529              		.loc 1 256 9 is_stmt 1 view .LVU515
 256:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardBlockSize = 1 << (pCardInfo->Csd.RdBlockLen);
 1530              		.loc 1 256 33 is_stmt 0 view .LVU516
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 52


 1531 0032 4FF40073 		mov	r3, #512
 1532 0036 E363     		str	r3, [r4, #60]
 257:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity *= pCardInfo->CardBlockSize;
 1533              		.loc 1 257 9 is_stmt 1 view .LVU517
 257:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity *= pCardInfo->CardBlockSize;
 1534              		.loc 1 257 56 is_stmt 0 view .LVU518
 1535 0038 6379     		ldrb	r3, [r4, #5]	@ zero_extendqisi2
 1536 003a 1909     		lsrs	r1, r3, #4
 257:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity *= pCardInfo->CardBlockSize;
 1537              		.loc 1 257 38 view .LVU519
 1538 003c 0123     		movs	r3, #1
 1539 003e 8B40     		lsls	r3, r3, r1
 257:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity *= pCardInfo->CardBlockSize;
 1540              		.loc 1 257 34 view .LVU520
 1541 0040 6363     		str	r3, [r4, #52]
 258:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockNbr = (pCardInfo->CardCapacity) / (pCardInfo->LogBlockSize);
 1542              		.loc 1 258 9 is_stmt 1 view .LVU521
 258:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockNbr = (pCardInfo->CardCapacity) / (pCardInfo->LogBlockSize);
 1543              		.loc 1 258 33 is_stmt 0 view .LVU522
 1544 0042 03FB02F3 		mul	r3, r3, r2
 1545 0046 2363     		str	r3, [r4, #48]
 259:User/SDcard/SD_Card_Drive.c ****     }
 1546              		.loc 1 259 9 is_stmt 1 view .LVU523
 259:User/SDcard/SD_Card_Drive.c ****     }
 1547              		.loc 1 259 60 is_stmt 0 view .LVU524
 1548 0048 5B0A     		lsrs	r3, r3, #9
 259:User/SDcard/SD_Card_Drive.c ****     }
 1549              		.loc 1 259 32 view .LVU525
 1550 004a A363     		str	r3, [r4, #56]
 1551              	.L73:
 262:User/SDcard/SD_Card_Drive.c **** }
 1552              		.loc 1 262 5 is_stmt 1 view .LVU526
 263:User/SDcard/SD_Card_Drive.c **** 
 1553              		.loc 1 263 1 is_stmt 0 view .LVU527
 1554 004c 38BD     		pop	{r3, r4, r5, pc}
 1555              	.LVL117:
 1556              	.L75:
 249:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardBlockSize = 512;
 1557              		.loc 1 249 9 is_stmt 1 view .LVU528
 249:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardBlockSize = 512;
 1558              		.loc 1 249 33 is_stmt 0 view .LVU529
 1559 004e 4FF40073 		mov	r3, #512
 1560 0052 E363     		str	r3, [r4, #60]
 250:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity = (pCardInfo->Csd.version.v2.DeviceSize + 1) * 1024 * pCardInfo->Lo
 1561              		.loc 1 250 9 is_stmt 1 view .LVU530
 250:User/SDcard/SD_Card_Drive.c ****         pCardInfo->CardCapacity = (pCardInfo->Csd.version.v2.DeviceSize + 1) * 1024 * pCardInfo->Lo
 1562              		.loc 1 250 34 is_stmt 0 view .LVU531
 1563 0054 6363     		str	r3, [r4, #52]
 251:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockNbr = (pCardInfo->CardCapacity) / (pCardInfo->LogBlockSize);
 1564              		.loc 1 251 9 is_stmt 1 view .LVU532
 251:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockNbr = (pCardInfo->CardCapacity) / (pCardInfo->LogBlockSize);
 1565              		.loc 1 251 61 is_stmt 0 view .LVU533
 1566 0056 A368     		ldr	r3, [r4, #8]
 1567 0058 C3F39513 		ubfx	r3, r3, #6, #22
 251:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockNbr = (pCardInfo->CardCapacity) / (pCardInfo->LogBlockSize);
 1568              		.loc 1 251 73 view .LVU534
 1569 005c 0133     		adds	r3, r3, #1
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 53


 251:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockNbr = (pCardInfo->CardCapacity) / (pCardInfo->LogBlockSize);
 1570              		.loc 1 251 85 view .LVU535
 1571 005e DB04     		lsls	r3, r3, #19
 251:User/SDcard/SD_Card_Drive.c ****         pCardInfo->LogBlockNbr = (pCardInfo->CardCapacity) / (pCardInfo->LogBlockSize);
 1572              		.loc 1 251 33 view .LVU536
 1573 0060 2363     		str	r3, [r4, #48]
 252:User/SDcard/SD_Card_Drive.c ****     } else {
 1574              		.loc 1 252 9 is_stmt 1 view .LVU537
 252:User/SDcard/SD_Card_Drive.c ****     } else {
 1575              		.loc 1 252 60 is_stmt 0 view .LVU538
 1576 0062 5B0A     		lsrs	r3, r3, #9
 252:User/SDcard/SD_Card_Drive.c ****     } else {
 1577              		.loc 1 252 32 view .LVU539
 1578 0064 A363     		str	r3, [r4, #56]
 1579 0066 F1E7     		b	.L73
 1580              	.L77:
 1581              		.align	2
 1582              	.L76:
 1583 0068 00000000 		.word	.LANCHOR1
 1584              		.cfi_endproc
 1585              	.LFE134:
 1587              		.section	.text.BSP_SD_ReadBlocks,"ax",%progbits
 1588              		.align	1
 1589              		.global	BSP_SD_ReadBlocks
 1590              		.syntax unified
 1591              		.thumb
 1592              		.thumb_func
 1593              		.fpu fpv4-sp-d16
 1595              	BSP_SD_ReadBlocks:
 1596              	.LVL118:
 1597              	.LFB135:
 275:User/SDcard/SD_Card_Drive.c ****     uint32_t offset = 0;
 1598              		.loc 1 275 1 is_stmt 1 view -0
 1599              		.cfi_startproc
 1600              		@ args = 0, pretend = 0, frame = 16
 1601              		@ frame_needed = 0, uses_anonymous_args = 0
 275:User/SDcard/SD_Card_Drive.c ****     uint32_t offset = 0;
 1602              		.loc 1 275 1 is_stmt 0 view .LVU541
 1603 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1604              	.LCFI21:
 1605              		.cfi_def_cfa_offset 32
 1606              		.cfi_offset 4, -32
 1607              		.cfi_offset 5, -28
 1608              		.cfi_offset 6, -24
 1609              		.cfi_offset 7, -20
 1610              		.cfi_offset 8, -16
 1611              		.cfi_offset 9, -12
 1612              		.cfi_offset 10, -8
 1613              		.cfi_offset 14, -4
 1614 0004 86B0     		sub	sp, sp, #24
 1615              	.LCFI22:
 1616              		.cfi_def_cfa_offset 56
 1617 0006 8046     		mov	r8, r0
 1618 0008 0E46     		mov	r6, r1
 1619 000a 9246     		mov	r10, r2
 276:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 1620              		.loc 1 276 5 is_stmt 1 view .LVU542
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 54


 1621              	.LVL119:
 277:User/SDcard/SD_Card_Drive.c ****     uint8_t *ptr = NULL;
 1622              		.loc 1 277 5 view .LVU543
 278:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 1623              		.loc 1 278 5 view .LVU544
 279:User/SDcard/SD_Card_Drive.c ****     uint16_t BlockSize = 512;
 1624              		.loc 1 279 5 view .LVU545
 280:User/SDcard/SD_Card_Drive.c **** 
 1625              		.loc 1 280 5 view .LVU546
 284:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 1626              		.loc 1 284 5 view .LVU547
 284:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 1627              		.loc 1 284 16 is_stmt 0 view .LVU548
 1628 000c 0023     		movs	r3, #0
 1629              	.LVL120:
 284:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 1630              		.loc 1 284 16 view .LVU549
 1631 000e 0093     		str	r3, [sp]
 1632 0010 FF23     		movs	r3, #255
 1633 0012 4FF40072 		mov	r2, #512
 1634              	.LVL121:
 284:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 1635              		.loc 1 284 16 view .LVU550
 1636 0016 1021     		movs	r1, #16
 1637              	.LVL122:
 284:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 1638              		.loc 1 284 16 view .LVU551
 1639 0018 0DEB0100 		add	r0, sp, r1
 1640              	.LVL123:
 284:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 1641              		.loc 1 284 16 view .LVU552
 1642 001c FFF7FEFF 		bl	SD_SendCmd
 1643              	.LVL124:
 285:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 1644              		.loc 1 285 5 is_stmt 1 view .LVU553
 1645 0020 0120     		movs	r0, #1
 1646 0022 FFF7FEFF 		bl	SD_IO_CSState
 1647              	.LVL125:
 286:User/SDcard/SD_Card_Drive.c ****     if ( response.r1 != SD_R1_NO_ERROR) {
 1648              		.loc 1 286 5 view .LVU554
 1649 0026 FF20     		movs	r0, #255
 1650 0028 FFF7FEFF 		bl	SD_IO_WriteByte
 1651              	.LVL126:
 287:User/SDcard/SD_Card_Drive.c ****         goto error;
 1652              		.loc 1 287 5 view .LVU555
 287:User/SDcard/SD_Card_Drive.c ****         goto error;
 1653              		.loc 1 287 18 is_stmt 0 view .LVU556
 1654 002c 9DF81090 		ldrb	r9, [sp, #16]	@ zero_extendqisi2
 287:User/SDcard/SD_Card_Drive.c ****         goto error;
 1655              		.loc 1 287 8 view .LVU557
 1656 0030 B9F1000F 		cmp	r9, #0
 1657 0034 10D0     		beq	.L90
 278:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 1658              		.loc 1 278 14 view .LVU558
 1659 0036 0027     		movs	r7, #0
 277:User/SDcard/SD_Card_Drive.c ****     uint8_t *ptr = NULL;
 1660              		.loc 1 277 13 view .LVU559
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 55


 1661 0038 4FF00109 		mov	r9, #1
 1662              	.LVL127:
 1663              	.L79:
 329:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 1664              		.loc 1 329 5 is_stmt 1 view .LVU560
 1665 003c 0120     		movs	r0, #1
 1666 003e FFF7FEFF 		bl	SD_IO_CSState
 1667              	.LVL128:
 330:User/SDcard/SD_Card_Drive.c ****     if(ptr != NULL) free(ptr);
 1668              		.loc 1 330 5 view .LVU561
 1669 0042 FF20     		movs	r0, #255
 1670 0044 FFF7FEFF 		bl	SD_IO_WriteByte
 1671              	.LVL129:
 331:User/SDcard/SD_Card_Drive.c **** 
 1672              		.loc 1 331 5 view .LVU562
 331:User/SDcard/SD_Card_Drive.c **** 
 1673              		.loc 1 331 7 is_stmt 0 view .LVU563
 1674 0048 17B1     		cbz	r7, .L83
 331:User/SDcard/SD_Card_Drive.c **** 
 1675              		.loc 1 331 21 is_stmt 1 discriminator 1 view .LVU564
 1676 004a 3846     		mov	r0, r7
 1677 004c FFF7FEFF 		bl	free
 1678              	.LVL130:
 1679              	.L83:
 334:User/SDcard/SD_Card_Drive.c **** }
 1680              		.loc 1 334 5 view .LVU565
 335:User/SDcard/SD_Card_Drive.c **** 
 1681              		.loc 1 335 1 is_stmt 0 view .LVU566
 1682 0050 4846     		mov	r0, r9
 1683 0052 06B0     		add	sp, sp, #24
 1684              	.LCFI23:
 1685              		.cfi_remember_state
 1686              		.cfi_def_cfa_offset 32
 1687              		@ sp needed
 1688 0054 BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1689              	.LVL131:
 1690              	.L90:
 1691              	.LCFI24:
 1692              		.cfi_restore_state
 291:User/SDcard/SD_Card_Drive.c ****     if( ptr == NULL ) {
 1693              		.loc 1 291 5 is_stmt 1 view .LVU567
 291:User/SDcard/SD_Card_Drive.c ****     if( ptr == NULL ) {
 1694              		.loc 1 291 11 is_stmt 0 view .LVU568
 1695 0058 4FF40070 		mov	r0, #512
 1696 005c FFF7FEFF 		bl	malloc
 1697              	.LVL132:
 292:User/SDcard/SD_Card_Drive.c ****         goto error;
 1698              		.loc 1 292 5 is_stmt 1 view .LVU569
 292:User/SDcard/SD_Card_Drive.c ****         goto error;
 1699              		.loc 1 292 7 is_stmt 0 view .LVU570
 1700 0060 0746     		mov	r7, r0
 1701 0062 0028     		cmp	r0, #0
 1702 0064 3AD0     		beq	.L85
 295:User/SDcard/SD_Card_Drive.c **** 
 1703              		.loc 1 295 5 is_stmt 1 view .LVU571
 1704 0066 4FF40072 		mov	r2, #512
 1705 006a FF21     		movs	r1, #255
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 56


 1706 006c FFF7FEFF 		bl	memset
 1707              	.LVL133:
 298:User/SDcard/SD_Card_Drive.c ****         /* Send CMD17 (SD_CMD_READ_SINGLE_BLOCK) to read one block */
 1708              		.loc 1 298 5 view .LVU572
 276:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 1709              		.loc 1 276 14 is_stmt 0 view .LVU573
 1710 0070 0024     		movs	r4, #0
 298:User/SDcard/SD_Card_Drive.c ****         /* Send CMD17 (SD_CMD_READ_SINGLE_BLOCK) to read one block */
 1711              		.loc 1 298 11 view .LVU574
 1712 0072 26E0     		b	.L80
 1713              	.LVL134:
 1714              	.L86:
 301:User/SDcard/SD_Card_Drive.c ****         if ( response.r1 != SD_R1_NO_ERROR) {
 1715              		.loc 1 301 98 view .LVU575
 1716 0074 0121     		movs	r1, #1
 1717              	.L81:
 301:User/SDcard/SD_Card_Drive.c ****         if ( response.r1 != SD_R1_NO_ERROR) {
 1718              		.loc 1 301 20 discriminator 4 view .LVU576
 1719 0076 0023     		movs	r3, #0
 1720 0078 0093     		str	r3, [sp]
 1721 007a FF23     		movs	r3, #255
 1722 007c 01FB02F2 		mul	r2, r1, r2
 1723 0080 1121     		movs	r1, #17
 1724 0082 02A8     		add	r0, sp, #8
 1725 0084 FFF7FEFF 		bl	SD_SendCmd
 1726              	.LVL135:
 1727 0088 0298     		ldr	r0, [sp, #8]	@ unaligned
 302:User/SDcard/SD_Card_Drive.c ****             goto error;
 1728              		.loc 1 302 9 is_stmt 1 discriminator 4 view .LVU577
 302:User/SDcard/SD_Card_Drive.c ****             goto error;
 1729              		.loc 1 302 22 is_stmt 0 discriminator 4 view .LVU578
 1730 008a C0B2     		uxtb	r0, r0
 302:User/SDcard/SD_Card_Drive.c ****             goto error;
 1731              		.loc 1 302 12 discriminator 4 view .LVU579
 1732 008c 48BB     		cbnz	r0, .L87
 307:User/SDcard/SD_Card_Drive.c ****             /* Read the SD block data : read NumByteToRead data */
 1733              		.loc 1 307 9 is_stmt 1 view .LVU580
 307:User/SDcard/SD_Card_Drive.c ****             /* Read the SD block data : read NumByteToRead data */
 1734              		.loc 1 307 13 is_stmt 0 view .LVU581
 1735 008e FE20     		movs	r0, #254
 1736 0090 FFF7FEFF 		bl	SD_WaitData
 1737              	.LVL136:
 307:User/SDcard/SD_Card_Drive.c ****             /* Read the SD block data : read NumByteToRead data */
 1738              		.loc 1 307 12 view .LVU582
 1739 0094 40BB     		cbnz	r0, .L88
 309:User/SDcard/SD_Card_Drive.c **** 
 1740              		.loc 1 309 13 is_stmt 1 view .LVU583
 1741 0096 4FF40072 		mov	r2, #512
 1742 009a 08EB0401 		add	r1, r8, r4
 1743 009e 3846     		mov	r0, r7
 1744 00a0 FFF7FEFF 		bl	SD_IO_WriteReadData
 1745              	.LVL137:
 312:User/SDcard/SD_Card_Drive.c ****             /* get CRC bytes (not really needed by us, but required by SD) */
 1746              		.loc 1 312 13 view .LVU584
 312:User/SDcard/SD_Card_Drive.c ****             /* get CRC bytes (not really needed by us, but required by SD) */
 1747              		.loc 1 312 20 is_stmt 0 view .LVU585
 1748 00a4 04F50074 		add	r4, r4, #512
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 57


 1749              	.LVL138:
 314:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 1750              		.loc 1 314 13 is_stmt 1 view .LVU586
 1751 00a8 FF20     		movs	r0, #255
 1752 00aa FFF7FEFF 		bl	SD_IO_WriteByte
 1753              	.LVL139:
 315:User/SDcard/SD_Card_Drive.c ****         } else {
 1754              		.loc 1 315 13 view .LVU587
 1755 00ae FF20     		movs	r0, #255
 1756 00b0 FFF7FEFF 		bl	SD_IO_WriteByte
 1757              	.LVL140:
 321:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 1758              		.loc 1 321 9 view .LVU588
 1759 00b4 0120     		movs	r0, #1
 1760 00b6 FFF7FEFF 		bl	SD_IO_CSState
 1761              	.LVL141:
 322:User/SDcard/SD_Card_Drive.c ****     }
 1762              		.loc 1 322 9 view .LVU589
 1763 00ba FF20     		movs	r0, #255
 1764 00bc FFF7FEFF 		bl	SD_IO_WriteByte
 1765              	.LVL142:
 298:User/SDcard/SD_Card_Drive.c ****         /* Send CMD17 (SD_CMD_READ_SINGLE_BLOCK) to read one block */
 1766              		.loc 1 298 23 is_stmt 0 view .LVU590
 1767 00c0 AA46     		mov	r10, r5
 1768              	.LVL143:
 1769              	.L80:
 298:User/SDcard/SD_Card_Drive.c ****         /* Send CMD17 (SD_CMD_READ_SINGLE_BLOCK) to read one block */
 1770              		.loc 1 298 11 is_stmt 1 view .LVU591
 298:User/SDcard/SD_Card_Drive.c ****         /* Send CMD17 (SD_CMD_READ_SINGLE_BLOCK) to read one block */
 1771              		.loc 1 298 23 is_stmt 0 view .LVU592
 1772 00c2 0AF1FF35 		add	r5, r10, #-1
 1773              	.LVL144:
 298:User/SDcard/SD_Card_Drive.c ****         /* Send CMD17 (SD_CMD_READ_SINGLE_BLOCK) to read one block */
 1774              		.loc 1 298 11 view .LVU593
 1775 00c6 BAF1000F 		cmp	r10, #0
 1776 00ca B7D0     		beq	.L79
 301:User/SDcard/SD_Card_Drive.c ****         if ( response.r1 != SD_R1_NO_ERROR) {
 1777              		.loc 1 301 9 is_stmt 1 view .LVU594
 301:User/SDcard/SD_Card_Drive.c ****         if ( response.r1 != SD_R1_NO_ERROR) {
 1778              		.loc 1 301 67 is_stmt 0 view .LVU595
 1779 00cc A219     		adds	r2, r4, r6
 301:User/SDcard/SD_Card_Drive.c ****         if ( response.r1 != SD_R1_NO_ERROR) {
 1780              		.loc 1 301 90 view .LVU596
 1781 00ce 084B     		ldr	r3, .L91
 1782 00d0 1B88     		ldrh	r3, [r3]
 301:User/SDcard/SD_Card_Drive.c ****         if ( response.r1 != SD_R1_NO_ERROR) {
 1783              		.loc 1 301 98 view .LVU597
 1784 00d2 012B     		cmp	r3, #1
 1785 00d4 CED0     		beq	.L86
 1786 00d6 4FF40071 		mov	r1, #512
 1787 00da CCE7     		b	.L81
 1788              	.LVL145:
 1789              	.L85:
 277:User/SDcard/SD_Card_Drive.c ****     uint8_t *ptr = NULL;
 1790              		.loc 1 277 13 view .LVU598
 1791 00dc 4FF00109 		mov	r9, #1
 1792 00e0 ACE7     		b	.L79
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 58


 1793              	.LVL146:
 1794              	.L87:
 277:User/SDcard/SD_Card_Drive.c ****     uint8_t *ptr = NULL;
 1795              		.loc 1 277 13 view .LVU599
 1796 00e2 4FF00109 		mov	r9, #1
 1797 00e6 A9E7     		b	.L79
 1798              	.L88:
 1799 00e8 4FF00109 		mov	r9, #1
 1800 00ec A6E7     		b	.L79
 1801              	.L92:
 1802 00ee 00BF     		.align	2
 1803              	.L91:
 1804 00f0 00000000 		.word	.LANCHOR1
 1805              		.cfi_endproc
 1806              	.LFE135:
 1808              		.section	.text.BSP_SD_WriteBlocks,"ax",%progbits
 1809              		.align	1
 1810              		.global	BSP_SD_WriteBlocks
 1811              		.syntax unified
 1812              		.thumb
 1813              		.thumb_func
 1814              		.fpu fpv4-sp-d16
 1816              	BSP_SD_WriteBlocks:
 1817              	.LVL147:
 1818              	.LFB136:
 347:User/SDcard/SD_Card_Drive.c ****     uint32_t offset = 0;
 1819              		.loc 1 347 1 is_stmt 1 view -0
 1820              		.cfi_startproc
 1821              		@ args = 0, pretend = 0, frame = 16
 1822              		@ frame_needed = 0, uses_anonymous_args = 0
 347:User/SDcard/SD_Card_Drive.c ****     uint32_t offset = 0;
 1823              		.loc 1 347 1 is_stmt 0 view .LVU601
 1824 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
 1825              	.LCFI25:
 1826              		.cfi_def_cfa_offset 32
 1827              		.cfi_offset 4, -32
 1828              		.cfi_offset 5, -28
 1829              		.cfi_offset 6, -24
 1830              		.cfi_offset 7, -20
 1831              		.cfi_offset 8, -16
 1832              		.cfi_offset 9, -12
 1833              		.cfi_offset 10, -8
 1834              		.cfi_offset 14, -4
 1835 0004 86B0     		sub	sp, sp, #24
 1836              	.LCFI26:
 1837              		.cfi_def_cfa_offset 56
 1838 0006 0746     		mov	r7, r0
 1839 0008 0E46     		mov	r6, r1
 1840 000a 9246     		mov	r10, r2
 348:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 1841              		.loc 1 348 5 is_stmt 1 view .LVU602
 1842              	.LVL148:
 349:User/SDcard/SD_Card_Drive.c ****     uint8_t *ptr = NULL;
 1843              		.loc 1 349 5 view .LVU603
 350:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 1844              		.loc 1 350 5 view .LVU604
 351:User/SDcard/SD_Card_Drive.c ****     uint16_t BlockSize = 512;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 59


 1845              		.loc 1 351 5 view .LVU605
 352:User/SDcard/SD_Card_Drive.c **** 
 1846              		.loc 1 352 5 view .LVU606
 356:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 1847              		.loc 1 356 5 view .LVU607
 356:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 1848              		.loc 1 356 16 is_stmt 0 view .LVU608
 1849 000c 0023     		movs	r3, #0
 1850              	.LVL149:
 356:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 1851              		.loc 1 356 16 view .LVU609
 1852 000e 0093     		str	r3, [sp]
 1853 0010 FF23     		movs	r3, #255
 1854 0012 4FF40072 		mov	r2, #512
 1855              	.LVL150:
 356:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 1856              		.loc 1 356 16 view .LVU610
 1857 0016 1021     		movs	r1, #16
 1858              	.LVL151:
 356:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 1859              		.loc 1 356 16 view .LVU611
 1860 0018 0DEB0100 		add	r0, sp, r1
 1861              	.LVL152:
 356:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 1862              		.loc 1 356 16 view .LVU612
 1863 001c FFF7FEFF 		bl	SD_SendCmd
 1864              	.LVL153:
 357:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 1865              		.loc 1 357 5 is_stmt 1 view .LVU613
 1866 0020 0120     		movs	r0, #1
 1867 0022 FFF7FEFF 		bl	SD_IO_CSState
 1868              	.LVL154:
 358:User/SDcard/SD_Card_Drive.c ****     if ( response.r1 != SD_R1_NO_ERROR) {
 1869              		.loc 1 358 5 view .LVU614
 1870 0026 FF20     		movs	r0, #255
 1871 0028 FFF7FEFF 		bl	SD_IO_WriteByte
 1872              	.LVL155:
 359:User/SDcard/SD_Card_Drive.c ****         goto error;
 1873              		.loc 1 359 5 view .LVU615
 359:User/SDcard/SD_Card_Drive.c ****         goto error;
 1874              		.loc 1 359 18 is_stmt 0 view .LVU616
 1875 002c 9DF81090 		ldrb	r9, [sp, #16]	@ zero_extendqisi2
 359:User/SDcard/SD_Card_Drive.c ****         goto error;
 1876              		.loc 1 359 8 view .LVU617
 1877 0030 B9F1000F 		cmp	r9, #0
 1878 0034 0BD0     		beq	.L105
 349:User/SDcard/SD_Card_Drive.c ****     uint8_t *ptr = NULL;
 1879              		.loc 1 349 13 view .LVU618
 1880 0036 4FF00109 		mov	r9, #1
 1881              	.LVL156:
 1882              	.L94:
 408:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 1883              		.loc 1 408 5 is_stmt 1 view .LVU619
 1884 003a 0120     		movs	r0, #1
 1885 003c FFF7FEFF 		bl	SD_IO_CSState
 1886              	.LVL157:
 409:User/SDcard/SD_Card_Drive.c **** 
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 60


 1887              		.loc 1 409 5 view .LVU620
 1888 0040 FF20     		movs	r0, #255
 1889 0042 FFF7FEFF 		bl	SD_IO_WriteByte
 1890              	.LVL158:
 412:User/SDcard/SD_Card_Drive.c **** }
 1891              		.loc 1 412 5 view .LVU621
 413:User/SDcard/SD_Card_Drive.c **** 
 1892              		.loc 1 413 1 is_stmt 0 view .LVU622
 1893 0046 4846     		mov	r0, r9
 1894 0048 06B0     		add	sp, sp, #24
 1895              	.LCFI27:
 1896              		.cfi_remember_state
 1897              		.cfi_def_cfa_offset 32
 1898              		@ sp needed
 1899 004a BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 1900              	.LVL159:
 1901              	.L105:
 1902              	.LCFI28:
 1903              		.cfi_restore_state
 363:User/SDcard/SD_Card_Drive.c ****     if (ptr == NULL) {
 1904              		.loc 1 363 5 is_stmt 1 view .LVU623
 363:User/SDcard/SD_Card_Drive.c ****     if (ptr == NULL) {
 1905              		.loc 1 363 11 is_stmt 0 view .LVU624
 1906 004e 4FF40070 		mov	r0, #512
 1907 0052 FFF7FEFF 		bl	malloc
 1908              	.LVL160:
 364:User/SDcard/SD_Card_Drive.c ****         goto error;
 1909              		.loc 1 364 5 is_stmt 1 view .LVU625
 364:User/SDcard/SD_Card_Drive.c ****         goto error;
 1910              		.loc 1 364 8 is_stmt 0 view .LVU626
 1911 0056 8046     		mov	r8, r0
 1912 0058 0028     		cmp	r0, #0
 1913 005a 3DD0     		beq	.L100
 348:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 1914              		.loc 1 348 14 view .LVU627
 1915 005c 0024     		movs	r4, #0
 1916 005e 2EE0     		b	.L96
 1917              	.LVL161:
 1918              	.L101:
 372:User/SDcard/SD_Card_Drive.c ****         if (response.r1 != SD_R1_NO_ERROR) {
 1919              		.loc 1 372 101 view .LVU628
 1920 0060 0121     		movs	r1, #1
 1921              	.L97:
 372:User/SDcard/SD_Card_Drive.c ****         if (response.r1 != SD_R1_NO_ERROR) {
 1922              		.loc 1 372 20 discriminator 4 view .LVU629
 1923 0062 0023     		movs	r3, #0
 1924 0064 0093     		str	r3, [sp]
 1925 0066 FF23     		movs	r3, #255
 1926 0068 01FB02F2 		mul	r2, r1, r2
 1927 006c 1821     		movs	r1, #24
 1928 006e 02A8     		add	r0, sp, #8
 1929 0070 FFF7FEFF 		bl	SD_SendCmd
 1930              	.LVL162:
 1931 0074 0298     		ldr	r0, [sp, #8]	@ unaligned
 373:User/SDcard/SD_Card_Drive.c ****             goto error;
 1932              		.loc 1 373 9 is_stmt 1 discriminator 4 view .LVU630
 373:User/SDcard/SD_Card_Drive.c ****             goto error;
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 61


 1933              		.loc 1 373 21 is_stmt 0 discriminator 4 view .LVU631
 1934 0076 C0B2     		uxtb	r0, r0
 373:User/SDcard/SD_Card_Drive.c ****             goto error;
 1935              		.loc 1 373 12 discriminator 4 view .LVU632
 1936 0078 88BB     		cbnz	r0, .L102
 378:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 1937              		.loc 1 378 9 is_stmt 1 view .LVU633
 1938 007a FF20     		movs	r0, #255
 1939 007c FFF7FEFF 		bl	SD_IO_WriteByte
 1940              	.LVL163:
 379:User/SDcard/SD_Card_Drive.c **** 
 1941              		.loc 1 379 9 view .LVU634
 1942 0080 FF20     		movs	r0, #255
 1943 0082 FFF7FEFF 		bl	SD_IO_WriteByte
 1944              	.LVL164:
 382:User/SDcard/SD_Card_Drive.c **** 
 1945              		.loc 1 382 9 view .LVU635
 1946 0086 FE20     		movs	r0, #254
 1947 0088 FFF7FEFF 		bl	SD_IO_WriteByte
 1948              	.LVL165:
 385:User/SDcard/SD_Card_Drive.c **** 
 1949              		.loc 1 385 9 view .LVU636
 1950 008c 4FF40072 		mov	r2, #512
 1951 0090 4146     		mov	r1, r8
 1952 0092 3819     		adds	r0, r7, r4
 1953 0094 FFF7FEFF 		bl	SD_IO_WriteReadData
 1954              	.LVL166:
 388:User/SDcard/SD_Card_Drive.c **** 
 1955              		.loc 1 388 9 view .LVU637
 388:User/SDcard/SD_Card_Drive.c **** 
 1956              		.loc 1 388 16 is_stmt 0 view .LVU638
 1957 0098 04F50074 		add	r4, r4, #512
 1958              	.LVL167:
 391:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 1959              		.loc 1 391 9 is_stmt 1 view .LVU639
 1960 009c FF20     		movs	r0, #255
 1961 009e FFF7FEFF 		bl	SD_IO_WriteByte
 1962              	.LVL168:
 392:User/SDcard/SD_Card_Drive.c **** 
 1963              		.loc 1 392 9 view .LVU640
 1964 00a2 FF20     		movs	r0, #255
 1965 00a4 FFF7FEFF 		bl	SD_IO_WriteByte
 1966              	.LVL169:
 395:User/SDcard/SD_Card_Drive.c ****             /* Set response value to failure */
 1967              		.loc 1 395 9 view .LVU641
 395:User/SDcard/SD_Card_Drive.c ****             /* Set response value to failure */
 1968              		.loc 1 395 13 is_stmt 0 view .LVU642
 1969 00a8 FFF7FEFF 		bl	SD_GetDataResponse
 1970              	.LVL170:
 395:User/SDcard/SD_Card_Drive.c ****             /* Set response value to failure */
 1971              		.loc 1 395 12 view .LVU643
 1972 00ac 0528     		cmp	r0, #5
 1973 00ae 1FD1     		bne	.L103
 400:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 1974              		.loc 1 400 9 is_stmt 1 view .LVU644
 1975 00b0 0120     		movs	r0, #1
 1976 00b2 FFF7FEFF 		bl	SD_IO_CSState
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 62


 1977              	.LVL171:
 401:User/SDcard/SD_Card_Drive.c ****     }
 1978              		.loc 1 401 9 view .LVU645
 1979 00b6 FF20     		movs	r0, #255
 1980 00b8 FFF7FEFF 		bl	SD_IO_WriteByte
 1981              	.LVL172:
 369:User/SDcard/SD_Card_Drive.c ****         /* Send CMD24 (SD_CMD_WRITE_SINGLE_BLOCK) to write blocks  and
 1982              		.loc 1 369 23 is_stmt 0 view .LVU646
 1983 00bc AA46     		mov	r10, r5
 1984              	.LVL173:
 1985              	.L96:
 369:User/SDcard/SD_Card_Drive.c ****         /* Send CMD24 (SD_CMD_WRITE_SINGLE_BLOCK) to write blocks  and
 1986              		.loc 1 369 11 is_stmt 1 view .LVU647
 369:User/SDcard/SD_Card_Drive.c ****         /* Send CMD24 (SD_CMD_WRITE_SINGLE_BLOCK) to write blocks  and
 1987              		.loc 1 369 23 is_stmt 0 view .LVU648
 1988 00be 0AF1FF35 		add	r5, r10, #-1
 1989              	.LVL174:
 369:User/SDcard/SD_Card_Drive.c ****         /* Send CMD24 (SD_CMD_WRITE_SINGLE_BLOCK) to write blocks  and
 1990              		.loc 1 369 11 view .LVU649
 1991 00c2 BAF1000F 		cmp	r10, #0
 1992 00c6 0CD0     		beq	.L95
 372:User/SDcard/SD_Card_Drive.c ****         if (response.r1 != SD_R1_NO_ERROR) {
 1993              		.loc 1 372 9 is_stmt 1 view .LVU650
 372:User/SDcard/SD_Card_Drive.c ****         if (response.r1 != SD_R1_NO_ERROR) {
 1994              		.loc 1 372 69 is_stmt 0 view .LVU651
 1995 00c8 A219     		adds	r2, r4, r6
 372:User/SDcard/SD_Card_Drive.c ****         if (response.r1 != SD_R1_NO_ERROR) {
 1996              		.loc 1 372 92 view .LVU652
 1997 00ca 0B4B     		ldr	r3, .L106
 1998 00cc 1B88     		ldrh	r3, [r3]
 372:User/SDcard/SD_Card_Drive.c ****         if (response.r1 != SD_R1_NO_ERROR) {
 1999              		.loc 1 372 101 view .LVU653
 2000 00ce 012B     		cmp	r3, #1
 2001 00d0 C6D0     		beq	.L101
 2002 00d2 4FF40071 		mov	r1, #512
 2003 00d6 C4E7     		b	.L97
 2004              	.LVL175:
 2005              	.L100:
 349:User/SDcard/SD_Card_Drive.c ****     uint8_t *ptr = NULL;
 2006              		.loc 1 349 13 view .LVU654
 2007 00d8 4FF00109 		mov	r9, #1
 2008 00dc 01E0     		b	.L95
 2009              	.LVL176:
 2010              	.L102:
 349:User/SDcard/SD_Card_Drive.c ****     uint8_t *ptr = NULL;
 2011              		.loc 1 349 13 view .LVU655
 2012 00de 4FF00109 		mov	r9, #1
 2013              	.LVL177:
 2014              	.L95:
 406:User/SDcard/SD_Card_Drive.c ****     /* Send dummy byte: 8 Clock pulses of delay */
 2015              		.loc 1 406 5 is_stmt 1 view .LVU656
 406:User/SDcard/SD_Card_Drive.c ****     /* Send dummy byte: 8 Clock pulses of delay */
 2016              		.loc 1 406 7 is_stmt 0 view .LVU657
 2017 00e2 B8F1000F 		cmp	r8, #0
 2018 00e6 A8D0     		beq	.L94
 406:User/SDcard/SD_Card_Drive.c ****     /* Send dummy byte: 8 Clock pulses of delay */
 2019              		.loc 1 406 21 is_stmt 1 discriminator 1 view .LVU658
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 63


 2020 00e8 4046     		mov	r0, r8
 2021 00ea FFF7FEFF 		bl	free
 2022              	.LVL178:
 2023 00ee A4E7     		b	.L94
 2024              	.LVL179:
 2025              	.L103:
 349:User/SDcard/SD_Card_Drive.c ****     uint8_t *ptr = NULL;
 2026              		.loc 1 349 13 is_stmt 0 view .LVU659
 2027 00f0 4FF00109 		mov	r9, #1
 2028 00f4 F5E7     		b	.L95
 2029              	.L107:
 2030 00f6 00BF     		.align	2
 2031              	.L106:
 2032 00f8 00000000 		.word	.LANCHOR1
 2033              		.cfi_endproc
 2034              	.LFE136:
 2036              		.section	.text.BSP_SD_Erase,"ax",%progbits
 2037              		.align	1
 2038              		.global	BSP_SD_Erase
 2039              		.syntax unified
 2040              		.thumb
 2041              		.thumb_func
 2042              		.fpu fpv4-sp-d16
 2044              	BSP_SD_Erase:
 2045              	.LVL180:
 2046              	.LFB137:
 422:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 2047              		.loc 1 422 1 is_stmt 1 view -0
 2048              		.cfi_startproc
 2049              		@ args = 0, pretend = 0, frame = 16
 2050              		@ frame_needed = 0, uses_anonymous_args = 0
 422:User/SDcard/SD_Card_Drive.c ****     uint8_t retr = BSP_SD_ERROR;
 2051              		.loc 1 422 1 is_stmt 0 view .LVU661
 2052 0000 10B5     		push	{r4, lr}
 2053              	.LCFI29:
 2054              		.cfi_def_cfa_offset 8
 2055              		.cfi_offset 4, -8
 2056              		.cfi_offset 14, -4
 2057 0002 86B0     		sub	sp, sp, #24
 2058              	.LCFI30:
 2059              		.cfi_def_cfa_offset 32
 2060 0004 0C46     		mov	r4, r1
 423:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 2061              		.loc 1 423 5 is_stmt 1 view .LVU662
 2062              	.LVL181:
 424:User/SDcard/SD_Card_Drive.c ****     uint16_t BlockSize = 512;
 2063              		.loc 1 424 5 view .LVU663
 425:User/SDcard/SD_Card_Drive.c **** 
 2064              		.loc 1 425 5 view .LVU664
 428:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 2065              		.loc 1 428 5 view .LVU665
 428:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 2066              		.loc 1 428 79 is_stmt 0 view .LVU666
 2067 0006 284B     		ldr	r3, .L119
 2068 0008 1B88     		ldrh	r3, [r3]
 428:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 2069              		.loc 1 428 88 view .LVU667
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 64


 2070 000a 012B     		cmp	r3, #1
 2071 000c 30D0     		beq	.L113
 2072 000e 4FF40072 		mov	r2, #512
 2073              	.L109:
 428:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 2074              		.loc 1 428 16 discriminator 4 view .LVU668
 2075 0012 0023     		movs	r3, #0
 2076 0014 0093     		str	r3, [sp]
 2077 0016 FF23     		movs	r3, #255
 2078 0018 00FB02F2 		mul	r2, r0, r2
 2079 001c 2021     		movs	r1, #32
 2080              	.LVL182:
 428:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 2081              		.loc 1 428 16 discriminator 4 view .LVU669
 2082 001e 04A8     		add	r0, sp, #16
 2083              	.LVL183:
 428:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 2084              		.loc 1 428 16 discriminator 4 view .LVU670
 2085 0020 FFF7FEFF 		bl	SD_SendCmd
 2086              	.LVL184:
 429:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 2087              		.loc 1 429 5 is_stmt 1 discriminator 4 view .LVU671
 2088 0024 0120     		movs	r0, #1
 2089 0026 FFF7FEFF 		bl	SD_IO_CSState
 2090              	.LVL185:
 430:User/SDcard/SD_Card_Drive.c ****     if (response.r1 == SD_R1_NO_ERROR) {
 2091              		.loc 1 430 5 discriminator 4 view .LVU672
 2092 002a FF20     		movs	r0, #255
 2093 002c FFF7FEFF 		bl	SD_IO_WriteByte
 2094              	.LVL186:
 431:User/SDcard/SD_Card_Drive.c ****         /* Send CMD33 (Erase group end) and Check if the SD acknowledged the erase command: R1 resp
 2095              		.loc 1 431 5 discriminator 4 view .LVU673
 431:User/SDcard/SD_Card_Drive.c ****         /* Send CMD33 (Erase group end) and Check if the SD acknowledged the erase command: R1 resp
 2096              		.loc 1 431 17 is_stmt 0 discriminator 4 view .LVU674
 2097 0030 9DF81030 		ldrb	r3, [sp, #16]	@ zero_extendqisi2
 431:User/SDcard/SD_Card_Drive.c ****         /* Send CMD33 (Erase group end) and Check if the SD acknowledged the erase command: R1 resp
 2098              		.loc 1 431 8 discriminator 4 view .LVU675
 2099 0034 9BBB     		cbnz	r3, .L114
 433:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 2100              		.loc 1 433 9 is_stmt 1 view .LVU676
 433:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 2101              		.loc 1 433 83 is_stmt 0 view .LVU677
 2102 0036 1C4B     		ldr	r3, .L119
 2103 0038 1B88     		ldrh	r3, [r3]
 433:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 2104              		.loc 1 433 92 view .LVU678
 2105 003a 012B     		cmp	r3, #1
 2106 003c 1AD0     		beq	.L115
 2107 003e 4FF40071 		mov	r1, #512
 2108              	.L111:
 433:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 2109              		.loc 1 433 70 discriminator 4 view .LVU679
 2110 0042 04FB01F1 		mul	r1, r4, r1
 433:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 2111              		.loc 1 433 20 discriminator 4 view .LVU680
 2112 0046 0023     		movs	r3, #0
 2113 0048 0093     		str	r3, [sp]
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 65


 2114 004a FF23     		movs	r3, #255
 2115 004c 4A02     		lsls	r2, r1, #9
 2116 004e 2121     		movs	r1, #33
 2117 0050 02A8     		add	r0, sp, #8
 2118 0052 FFF7FEFF 		bl	SD_SendCmd
 2119              	.LVL187:
 2120 0056 0298     		ldr	r0, [sp, #8]	@ unaligned
 2121 0058 0490     		str	r0, [sp, #16]
 434:User/SDcard/SD_Card_Drive.c ****         SD_IO_WriteByte(SD_DUMMY_BYTE);
 2122              		.loc 1 434 9 is_stmt 1 discriminator 4 view .LVU681
 2123 005a 0120     		movs	r0, #1
 2124 005c FFF7FEFF 		bl	SD_IO_CSState
 2125              	.LVL188:
 435:User/SDcard/SD_Card_Drive.c ****         if (response.r1 == SD_R1_NO_ERROR) {
 2126              		.loc 1 435 9 discriminator 4 view .LVU682
 2127 0060 FF20     		movs	r0, #255
 2128 0062 FFF7FEFF 		bl	SD_IO_WriteByte
 2129              	.LVL189:
 436:User/SDcard/SD_Card_Drive.c ****             /* Send CMD38 (Erase) and Check if the SD acknowledged the erase command: R1 response (
 2130              		.loc 1 436 9 discriminator 4 view .LVU683
 436:User/SDcard/SD_Card_Drive.c ****             /* Send CMD38 (Erase) and Check if the SD acknowledged the erase command: R1 response (
 2131              		.loc 1 436 21 is_stmt 0 discriminator 4 view .LVU684
 2132 0066 9DF81030 		ldrb	r3, [sp, #16]	@ zero_extendqisi2
 436:User/SDcard/SD_Card_Drive.c ****             /* Send CMD38 (Erase) and Check if the SD acknowledged the erase command: R1 response (
 2133              		.loc 1 436 12 discriminator 4 view .LVU685
 2134 006a 2BB1     		cbz	r3, .L118
 423:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 2135              		.loc 1 423 13 view .LVU686
 2136 006c 0124     		movs	r4, #1
 2137              	.LVL190:
 423:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 2138              		.loc 1 423 13 view .LVU687
 2139 006e 17E0     		b	.L110
 2140              	.LVL191:
 2141              	.L113:
 428:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 2142              		.loc 1 428 88 view .LVU688
 2143 0070 0122     		movs	r2, #1
 2144 0072 CEE7     		b	.L109
 2145              	.LVL192:
 2146              	.L115:
 433:User/SDcard/SD_Card_Drive.c ****         SD_IO_CSState(1);
 2147              		.loc 1 433 92 view .LVU689
 2148 0074 0121     		movs	r1, #1
 2149 0076 E4E7     		b	.L111
 2150              	.L118:
 438:User/SDcard/SD_Card_Drive.c ****             if (response.r1 == SD_R1_NO_ERROR) {
 2151              		.loc 1 438 13 is_stmt 1 view .LVU690
 438:User/SDcard/SD_Card_Drive.c ****             if (response.r1 == SD_R1_NO_ERROR) {
 2152              		.loc 1 438 24 is_stmt 0 view .LVU691
 2153 0078 0123     		movs	r3, #1
 2154 007a 0093     		str	r3, [sp]
 2155 007c FF23     		movs	r3, #255
 2156 007e 0022     		movs	r2, #0
 2157 0080 2621     		movs	r1, #38
 2158 0082 02A8     		add	r0, sp, #8
 2159 0084 FFF7FEFF 		bl	SD_SendCmd
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 66


 2160              	.LVL193:
 2161 0088 0298     		ldr	r0, [sp, #8]	@ unaligned
 439:User/SDcard/SD_Card_Drive.c ****                 retr = BSP_SD_OK;
 2162              		.loc 1 439 13 is_stmt 1 view .LVU692
 439:User/SDcard/SD_Card_Drive.c ****                 retr = BSP_SD_OK;
 2163              		.loc 1 439 25 is_stmt 0 view .LVU693
 2164 008a C4B2     		uxtb	r4, r0
 2165              	.LVL194:
 439:User/SDcard/SD_Card_Drive.c ****                 retr = BSP_SD_OK;
 2166              		.loc 1 439 16 view .LVU694
 2167 008c 04B1     		cbz	r4, .L112
 423:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 2168              		.loc 1 423 13 view .LVU695
 2169 008e 0124     		movs	r4, #1
 2170              	.L112:
 2171              	.LVL195:
 442:User/SDcard/SD_Card_Drive.c ****             SD_IO_WriteByte(SD_DUMMY_BYTE);
 2172              		.loc 1 442 13 is_stmt 1 view .LVU696
 2173 0090 0120     		movs	r0, #1
 2174 0092 FFF7FEFF 		bl	SD_IO_CSState
 2175              	.LVL196:
 443:User/SDcard/SD_Card_Drive.c ****         }
 2176              		.loc 1 443 13 view .LVU697
 2177 0096 FF20     		movs	r0, #255
 2178 0098 FFF7FEFF 		bl	SD_IO_WriteByte
 2179              	.LVL197:
 2180 009c 00E0     		b	.L110
 2181              	.LVL198:
 2182              	.L114:
 423:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef response;
 2183              		.loc 1 423 13 is_stmt 0 view .LVU698
 2184 009e 0124     		movs	r4, #1
 2185              	.LVL199:
 2186              	.L110:
 448:User/SDcard/SD_Card_Drive.c **** }
 2187              		.loc 1 448 5 is_stmt 1 view .LVU699
 449:User/SDcard/SD_Card_Drive.c **** 
 2188              		.loc 1 449 1 is_stmt 0 view .LVU700
 2189 00a0 2046     		mov	r0, r4
 2190 00a2 06B0     		add	sp, sp, #24
 2191              	.LCFI31:
 2192              		.cfi_def_cfa_offset 8
 2193              		@ sp needed
 2194 00a4 10BD     		pop	{r4, pc}
 2195              	.LVL200:
 2196              	.L120:
 449:User/SDcard/SD_Card_Drive.c **** 
 2197              		.loc 1 449 1 view .LVU701
 2198 00a6 00BF     		.align	2
 2199              	.L119:
 2200 00a8 00000000 		.word	.LANCHOR1
 2201              		.cfi_endproc
 2202              	.LFE137:
 2204              		.section	.text.BSP_SD_GetCardState,"ax",%progbits
 2205              		.align	1
 2206              		.global	BSP_SD_GetCardState
 2207              		.syntax unified
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 67


 2208              		.thumb
 2209              		.thumb_func
 2210              		.fpu fpv4-sp-d16
 2212              	BSP_SD_GetCardState:
 2213              	.LFB138:
 457:User/SDcard/SD_Card_Drive.c ****     SD_CmdAnswer_typedef retr;
 2214              		.loc 1 457 1 is_stmt 1 view -0
 2215              		.cfi_startproc
 2216              		@ args = 0, pretend = 0, frame = 8
 2217              		@ frame_needed = 0, uses_anonymous_args = 0
 2218 0000 00B5     		push	{lr}
 2219              	.LCFI32:
 2220              		.cfi_def_cfa_offset 4
 2221              		.cfi_offset 14, -4
 2222 0002 85B0     		sub	sp, sp, #20
 2223              	.LCFI33:
 2224              		.cfi_def_cfa_offset 24
 458:User/SDcard/SD_Card_Drive.c **** 
 2225              		.loc 1 458 5 view .LVU703
 461:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 2226              		.loc 1 461 5 view .LVU704
 461:User/SDcard/SD_Card_Drive.c ****     SD_IO_CSState(1);
 2227              		.loc 1 461 12 is_stmt 0 view .LVU705
 2228 0004 0223     		movs	r3, #2
 2229 0006 0093     		str	r3, [sp]
 2230 0008 FF23     		movs	r3, #255
 2231 000a 0022     		movs	r2, #0
 2232 000c 0D21     		movs	r1, #13
 2233 000e 02A8     		add	r0, sp, #8
 2234 0010 FFF7FEFF 		bl	SD_SendCmd
 2235              	.LVL201:
 462:User/SDcard/SD_Card_Drive.c ****     SD_IO_WriteByte(SD_DUMMY_BYTE);
 2236              		.loc 1 462 5 is_stmt 1 view .LVU706
 2237 0014 0120     		movs	r0, #1
 2238 0016 FFF7FEFF 		bl	SD_IO_CSState
 2239              	.LVL202:
 463:User/SDcard/SD_Card_Drive.c **** 
 2240              		.loc 1 463 5 view .LVU707
 2241 001a FF20     		movs	r0, #255
 2242 001c FFF7FEFF 		bl	SD_IO_WriteByte
 2243              	.LVL203:
 466:User/SDcard/SD_Card_Drive.c ****         return BSP_SD_OK;
 2244              		.loc 1 466 5 view .LVU708
 466:User/SDcard/SD_Card_Drive.c ****         return BSP_SD_OK;
 2245              		.loc 1 466 14 is_stmt 0 view .LVU709
 2246 0020 9DF80830 		ldrb	r3, [sp, #8]	@ zero_extendqisi2
 466:User/SDcard/SD_Card_Drive.c ****         return BSP_SD_OK;
 2247              		.loc 1 466 7 view .LVU710
 2248 0024 23B9     		cbnz	r3, .L123
 466:User/SDcard/SD_Card_Drive.c ****         return BSP_SD_OK;
 2249              		.loc 1 466 46 discriminator 1 view .LVU711
 2250 0026 9DF80900 		ldrb	r0, [sp, #9]	@ zero_extendqisi2
 466:User/SDcard/SD_Card_Drive.c ****         return BSP_SD_OK;
 2251              		.loc 1 466 37 discriminator 1 view .LVU712
 2252 002a 10B1     		cbz	r0, .L122
 470:User/SDcard/SD_Card_Drive.c **** }
 2253              		.loc 1 470 12 view .LVU713
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 68


 2254 002c 0120     		movs	r0, #1
 2255 002e 00E0     		b	.L122
 2256              	.L123:
 2257 0030 0120     		movs	r0, #1
 2258              	.L122:
 471:User/SDcard/SD_Card_Drive.c **** 
 2259              		.loc 1 471 1 view .LVU714
 2260 0032 05B0     		add	sp, sp, #20
 2261              	.LCFI34:
 2262              		.cfi_def_cfa_offset 4
 2263              		@ sp needed
 2264 0034 5DF804FB 		ldr	pc, [sp], #4
 2265              		.cfi_endproc
 2266              	.LFE138:
 2268              		.global	flag_SDHC
 2269              		.global	SdStatus
 2270              		.section	.rodata
 2271              		.align	2
 2272              		.set	.LANCHOR0,. + 0
 2273              	.LC0:
 2274 0000 FF       		.byte	-1
 2275 0001 FF       		.byte	-1
 2276 0002 FF       		.byte	-1
 2277 0003 FF       		.byte	-1
 2278 0004 FF       		.byte	-1
 2279              		.section	.bss.SdStatus,"aw",%nobits
 2280              		.set	.LANCHOR2,. + 0
 2283              	SdStatus:
 2284 0000 00       		.space	1
 2285              		.section	.bss.flag_SDHC,"aw",%nobits
 2286              		.align	1
 2287              		.set	.LANCHOR1,. + 0
 2290              	flag_SDHC:
 2291 0000 0000     		.space	2
 2292              		.text
 2293              	.Letext0:
 2294              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 2295              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\inc
 2296              		.file 4 "User/SDcard/SD_Card_Drive.h"
 2297              		.file 5 "Drivers/CMSIS/Include/core_cm4.h"
 2298              		.file 6 "Drivers/CMSIS/Device/ST/STM32L4xx/Include/system_stm32l4xx.h"
 2299              		.file 7 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_def.h"
 2300              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal_flash.h"
 2301              		.file 9 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
 2302              		.file 10 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\lib\\gcc\\arm-non
 2303              		.file 11 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 2304              		.file 12 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 2305              		.file 13 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 2306              		.file 14 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
 2307              		.file 15 "User/SDcard/SD_Card_Interface.h"
 2308              		.file 16 "c:\\program files (x86)\\gnu arm embedded toolchain\\9 2020-q2-update\\arm-none-eabi\\in
ARM GAS  C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s 			page 69


DEFINED SYMBOLS
                            *ABS*:00000000 SD_Card_Drive.c
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:18     .text.SD_ReadData:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:25     .text.SD_ReadData:00000000 SD_ReadData
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:73     .text.SD_WaitData:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:79     .text.SD_WaitData:00000000 SD_WaitData
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:143    .text.SD_GetDataResponse:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:149    .text.SD_GetDataResponse:00000000 SD_GetDataResponse
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:218    .text.SD_SendCmd:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:224    .text.SD_SendCmd:00000000 SD_SendCmd
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:299    .text.SD_SendCmd:00000056 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:305    .text.SD_SendCmd:0000005c $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:422    .text.SD_SendCmd:000000cc $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:427    .text.SD_GoIdleState:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:433    .text.SD_GoIdleState:00000000 SD_GoIdleState
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:733    .text.SD_GoIdleState:00000198 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:738    .text.SD_GetCSDRegister:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:744    .text.SD_GetCSDRegister:00000000 SD_GetCSDRegister
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1145   .text.SD_GetCSDRegister:00000230 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1150   .text.SD_GetCIDRegister:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1156   .text.SD_GetCIDRegister:00000000 SD_GetCIDRegister
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1400   .text.BSP_SD_Init:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1407   .text.BSP_SD_Init:00000000 BSP_SD_Init
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1463   .text.BSP_SD_Init:00000028 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1468   .text.BSP_SD_GetCardInfo:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1475   .text.BSP_SD_GetCardInfo:00000000 BSP_SD_GetCardInfo
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1583   .text.BSP_SD_GetCardInfo:00000068 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1588   .text.BSP_SD_ReadBlocks:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1595   .text.BSP_SD_ReadBlocks:00000000 BSP_SD_ReadBlocks
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1804   .text.BSP_SD_ReadBlocks:000000f0 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1809   .text.BSP_SD_WriteBlocks:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:1816   .text.BSP_SD_WriteBlocks:00000000 BSP_SD_WriteBlocks
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:2032   .text.BSP_SD_WriteBlocks:000000f8 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:2037   .text.BSP_SD_Erase:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:2044   .text.BSP_SD_Erase:00000000 BSP_SD_Erase
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:2200   .text.BSP_SD_Erase:000000a8 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:2205   .text.BSP_SD_GetCardState:00000000 $t
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:2212   .text.BSP_SD_GetCardState:00000000 BSP_SD_GetCardState
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:2290   .bss.flag_SDHC:00000000 flag_SDHC
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:2283   .bss.SdStatus:00000000 SdStatus
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:2271   .rodata:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:2284   .bss.SdStatus:00000000 $d
C:\Users\ADMINI~1\AppData\Local\Temp\ccFxefnK.s:2286   .bss.flag_SDHC:00000000 $d

UNDEFINED SYMBOLS
SD_IO_WriteByte
SD_IO_CSState
SD_IO_WriteReadData
HAL_Delay
free
malloc
memset
